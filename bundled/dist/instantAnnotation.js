var InstantAnnotation=function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){t.exports=jQuery},function(t,e){t.exports=0},function(t,e){t.exports=moment},function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"removeNS",function(){return l}),n.d(a,"unique",function(){return c}),n.d(a,"htmlList",function(){return d}),n.d(a,"remove",function(){return f}),n.d(a,"set",function(){return m}),n.d(a,"clone",function(){return g}),n.d(a,"httpCall",function(){return _}),n.d(a,"httpPostJson",function(){return b}),n.d(a,"httpPatchJson",function(){return v}),n.d(a,"httpGet",function(){return h}),n.d(a,"send_snackbarMSG",function(){return u}),n.d(a,"send_snackbarMSG_fail",function(){return p}),n.d(a,"flatten",function(){return I}),n.d(a,"helperRemove",function(){return w}),n.d(a,"containsArray",function(){return A}),n.d(a,"stripHtml",function(){return x}),n.d(a,"syntaxHighlight",function(){return S}),n.d(a,"makeArray",function(){return k}),n.d(a,"copyStr",function(){return j}),n.d(a,"createInjectionCodeForURL",function(){return O}),n.d(a,"httpGetHeaders",function(){return y});var o=n(0),i=n.n(o);n(2),n(1);const s="https://semantify.it",r="https://smtfy.it/";function l(t){return t.split(":")[1]}function c(t){var e=[];return i.a.each(t,function(t,n){-1==i.a.inArray(n,e)&&e.push(n)}),e}function d(t){var e=[];return i.a.each(t,function(t,n){e.push("<li>"+n+"</li> \n")}),e}function p(t){u(t,5e3)}function u(t,e){var n={content:'<table class="snackbar-table"><td><i class="material-icons snackbar-icon">info</i><span>  '+t+"</span></td></table>",style:"toast",timeout:e||4e3,htmlAllowed:!0,onClose:function(){}};i.a.snackbar(n)}function f(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}function m(t,e,n){for(var a=t,o=e.split("-"),i=o.length,s=0;s<i-1;s++){var r=o[s];a[r]||(a[r]={}),a=a[r]}return a[o[i-1]]=n,t}function h(t,e){y(t,null,e)}function y(t,e,n){i.a.ajax({type:"GET",url:t,headers:e,success:function(t){n(t)},error:function(){n()}})}function b(t,e,n,a){_("POST",t,"application/json ; charset=utf-8",e,n,a)}function v(t,e,n,a){_("PATCH",t,"application/json ; charset=utf-8",e,n,a)}function _(t,e,n,a,o,s){i.a.ajax({type:t,contentType:n,headers:a,url:e,data:JSON.stringify(o),success:function(t){s(t)},error:function(t){s(t)}})}function g(t){return JSON.parse(JSON.stringify(t))}function I(t){var e,n=arguments[1]||"",a=arguments[2]||{};for(e in t)t.hasOwnProperty(e)&&("object"==typeof t[e]?I(t[e],n+e+".",a):a[n+e]=t[e]);return a}function w(t){return-1!=t.indexOf(":")?t.substr(t.indexOf(":")+1):t}function A(t){for(var e=[t],n=!1;!n&&e.length;){var a=e.shift();n=Object.keys(a).some(function(t){if("@type"!==t&&a[t]instanceof Array&&"@context"!==t)return!0;null!==a[t]&&"object"==typeof a[t]&&e.push(a[t])})}return n}function x(t){var e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText||""}function S(t){return"object"==typeof t&&(t=JSON.stringify(t,null,2)),(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"})}function k(t){return Array.isArray(t)?t:[t]}function j(t){var e=document.createElement("textarea");document.body.appendChild(e),e.setAttribute("id","dummy_id"),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e),u("Annotation copied into your clipboard",3e3)}function O(t){return"function appendAnnotation() {\n\tvar element = document.createElement('script');\n\telement.type = 'application/ld+json';\n\telement.text = this.responseText;\n\tdocument.querySelector('head').appendChild(element);\n}\nvar request = new XMLHttpRequest();\nrequest.onload = appendAnnotation;\nrequest.open(\"get\", \""+r+t+'", true);\nrequest.send();'}let D,C,J;function E(t,e){return D[t]?x(e+":\n"+D[t].description):x(e+":\nSorry, no description available!")}function L(t){if(!C[t])return t;var e=g(C[t].subClasses);return e.forEach(function(t){e=e.concat(L(t))}),e.push(t),c(e)}var U={name:"Save",icon:"save",createJsonLD:!0,onclick:function(t){var e=[],n={};if(n.content=t.jsonLd,n.dsHash=t.dsHash,e.push(n),null!=t.jsonLd){var a=t.options.smtfySemantifyWebsiteUID,o=t.options.smtfySemantifyWebsiteSecret,r=i()("#panel-"+t.panelId).data("smtfyAnnId"),l=(i()("#panel-"+t.panelId).data("smtfyWebId"),i()("#panel-"+t.panelId).data("smtfyWebSecret"));if(r)v(s+"/api/annotation/uid/"+r,{"website-secret":l},{content:t.jsonLd},function(t){t&&"Not Found"!==t.statusText&&"Forbidden"!==t.statusText?window.is_typo3?i.a.ajax({type:"post",url:window.myAjax.ajaxurl,data:{action:"iasemantify_refresh_cache"},success:function(t){u("Successfully updated Annotation")},error:function(t){p("An error occurred while saving to typo3")}}):u("Successfully updated Annotation"):p("An error occurred. Please check your semantify api-key!")});else b(s+"/api/annotation/"+a,{"website-secret":o},e,function(e){if(e&&!e.message){u("Successfully saved Annotation to semantify.it");var n=e[0].UID;i()("#panel-"+t.panelId).data("smtfyAnnId",n).data("smtfyWebId",a).data("smtfyWebSecret",o);var s=i()("#ia-data").attr("data-post_id"),r=i()("#ia-data").attr("data-nonce");i.a.ajax({type:"post",url:window.myAjax.ajaxurl,data:{action:"iasemantify_push_ann",post_id:s,nonce:r,ann_id:n,ds_hash:t.dsHash,web_id:a,web_secret:o},success:function(t){},error:function(t){p("An error occurred while saving to "+(window.is_typo3?"typo3":"wordpress"))}})}else p("An error occurred. Please check your semantify api-key! ("+e.message+")")})}}},P={name:"Delete",icon:"close",createJsonLD:!1,onclick:function(t){var e=i()("#panel-"+t.panelId).data("smtfyAnnId"),n=i()("#panel-"+t.panelId).data("smtfyWebId"),a=i()("#panel-"+t.panelId).data("smtfyWebSecret");if(f(window.IA_currently_added_annotations,e),window.IA_delete_id_whitelist.push(e),!e||confirm("Do you really want to delete this annotation?")){i()("#panel-"+t.panelId).hide(500);var o=i()("#ia-data").attr("data-post_id"),s=i()("#ia-data").attr("data-nonce");i.a.ajax({type:"post",url:window.myAjax.ajaxurl,data:{action:"iasemantify_delete_ann",post_id:o,nonce:s,ann_id:t.annId,ds_hash:t.dsHash||"NO_DS",web_id:n,web_secret:a},success:function(t){},error:function(t){p("An error occurred while deleting from wordpress")}})}}},T={name:"Copy",icon:"content_copy",createJsonLD:!0,onclick:function(t){t.jsonLd&&j(JSON.stringify(t.jsonLd,null,2))}},H={name:"Close",icon:"close",createJsonLD:!1,onclick:function(t){i()("#panel-"+t.panelId.toString()).hide()}},N={name:"Clear",icon:"delete",onclick:function(t){t.inputFields.forEach(function(e){var n=e.slice(e.indexOf("_")+1,e.indexOf("_",e.indexOf("_")+1));t.panelId.toString()===n&&i()("#"+e).val("")})}},W={name:"Save",icon:"save",onlyIcon:!1,createJsonLD:!0,onclick:function(t){if(t.jsonLd){var e=[],n={};n.content=t.jsonLd,n.dsHash=t.dsHash,e.push(n);var a={htmlAllowed:!0,style:"toast",timeout:3e3},o={"website-secret":t.options.smtfySemantifyWebsiteSecret};b(s+"/api/annotation/"+t.options.smtfySemantifyWebsiteUID,o,e,function(n){if(console.log(n),n&&n[0]&&n[0].UID){a.content="Successfully saved Annotation to semantify.it",i.a.snackbar(a);var o=r+n[0].UID,l=document.createElement("div");document.body.appendChild(l),l.setAttribute("id","IA_preview_id"),i()("#IA_preview_id").append('<div class="bootstrap semantify semantify-instant-annotations"><div class="modal fade" id="IA_saveModal" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h3 class="modal-title">Successfully saved JSON-LD annotation!</h3></div><div class="modal-body"><pre id="IA_preview_textArea" style="max-height: 300px;"></pre><button class="btn btn-default" id="IA_preview_copy" style="float: right; position:relative;bottom:55px; right:5px "> <i class="material-icons">content_copy</i> Copy</button><br/>Saved annotation "<b>'+n[0].name+'" </b><div id="IA_toWebsite" style="display: inline"></div> at: <a target="_blank" id="IA_annUrl" href="'+o+'">'+o+'</a> <br/><br/><button class="btn btn-default" style="margin:0; padding: 2px; text-transform:none; font-weight:normal" id="IA_JS_inject"><span class="caret"/>  How do i get this annotation into my website?</button><br/><br/><br/><div id="IA_loginSection"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div></div>'),i()("#IA_preview_copy").click(function(){j(JSON.stringify(t.jsonLd,null,2))}),i()("#IA_JS_inject").after('<div id="IA_JS_inject_area" style="display:none;"><br/> Add this Javascript code to your Website: <pre id="IA_JS_inject_code"></pre><button class="btn btn-default" id="IA_inject_copy" style="float: right; position:relative;bottom:55px; right:5px "> <i class="material-icons">content_copy</i> Copy</button></div>');var c=O(n[0].UID);i()("#IA_inject_copy").click(function(){j(c)}),i()("#IA_JS_inject_code").html(c),i()("#IA_JS_inject").click(function(){i()("#IA_JS_inject_area").html()&&("none"===i()("#IA_JS_inject_area").css("display")?i()("#IA_JS_inject_area").slideDown(200):i()("#IA_JS_inject_area").slideUp(200))}),i()("#IA_preview_textArea").html(S(JSON.stringify(t.jsonLd,null,2)));var d=function(){y(s+"/api/website",{Authorization:"Bearer "+J},function(t){t?(i()("#IA_loginSection").after('<div class="list-group" id="IA_my_websites"><h4>Your websites: (Select one to save your annotation to) </h4> </div>'),t.forEach(function(t){i()("#IA_my_websites").append('<button type="button" class="list-group-item list-group-item-action" id="IA_'+t.uid+'" style="padding: 5px 0">'+t.name+" ("+t.domain+")</button>"),i()("#IA_"+t.uid).click(function(){i()("#IA_my_websites").slideUp(100),console.log("ele",t);var n={"website-secret":t.secret};b(s+"/api/annotation/"+t.uid,n,e,function(e){if(console.log(e),e&&e[0]&&e[0].UID){console.log("saved",e),a.content="Saved the annotation to: "+t.name+" ("+t.domain+")",i.a.snackbar(a),i()("#IA_toWebsite").append("to website <b>"+t.name+(t.domain?" ("+t.domain+")":"")+"</b>");var n=r+e[0].UID;i()("#IA_annUrl").html(n).attr("href",n);var o=O(e[0].UID);i()("#IA_inject_copy").click(function(){j(o)}),i()("#IA_JS_inject_code").html(o)}else a.content="Failed to save the annotation to: "+t.name+" ("+t.domain+")",i.a.snackbar(a)})})})):(a.content="There has been an error when retrieving your websites",i.a.snackbar(a))})};J?d():i()("#IA_loginSection").append('<p>Want to save this Annotation to your Semantify.it account?</p><button type="button" class="btn button-sti-red" id="IA_loginBtn" style="margin:0 10px 0 0;padding:6px 30px; line-height:24px;">Login</button><button type="button" class="btn button-sti-red" id="IA_registerBtn" style="padding:6px 30px" onclick=" window.open(\'https://semantify.it/register\',\'_blank\')" title="Register at semantify.it"> <i class="material-icons">open_in_new</i>  Register</button><div id="IA_credentialsSection" hidden><input type="text" class="form-control" id="IA_username" placeholder="Username/Email" title="Username/Email"><input type="password" class="form-control" id="IA_password" placeholder="Password" title="Password"></div>');var p=function(t){13===t.keyCode&&i()("#IA_loginBtn").click()};i()("#IA_username").keyup(function(t){p(t)}),i()("#IA_password").keyup(function(t){p(t)}),i()("#IA_saveModal").modal().on("hidden.bs.modal",function(){i()(this).remove()}),i()("#IA_loginBtn").click(function(){if("none"===i()("#IA_credentialsSection").css("display"))i()("#IA_credentialsSection").slideDown(100);else{var t={identifier:i()("#IA_username").val(),password:i()("#IA_password").val()};b(s+"/api/login",void 0,t,function(t){t?(i()("#IA_loginSection").slideUp(100),J=t.token,d()):(a.content="Couldn't log in to semantify.it",i.a.snackbar(a))})}})}else a.content="There was an error saving annotation to semantify.it",i.a.snackbar(a)})}}},M={name:"Preview",icon:"find_in_page",createJsonLD:!0,onclick:function(t){if(null!==t.jsonLd){var e=document.createElement("div");document.body.appendChild(e),e.setAttribute("id","preview_id"),i()("#preview_id").append('<div class="bootstrap semantify semantify-instant-annotations"><div class="modal fade" id="previewModal" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Preview JSON-LD</h4></div><div class="modal-body"><pre id="preview_textArea" style="max-height: 500px;"></pre><button class="btn btn-default" id="IA_simple_preview_copy" style="float: right; position:relative;bottom:55px; right:5px "> <i class="material-icons">content_copy</i> Copy</button></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div></div>'),i()("#preview_textArea").html(S(JSON.stringify(t.jsonLd,null,2))),i()("#previewModal").modal().on("hidden.bs.modal",function(){i()(this).remove()}),i()("#IA_simple_preview_copy").click(function(){j(JSON.stringify(t.jsonLd,null,2))})}}},B=[M,N,W],G=[M,U,P];function q(t){var e=[];switch(t){case"no":e=[];break;case"default":case void 0:case null:e=B.slice();break;case"wp_delete":e=[P];break;case"wp_default":e=G.slice();break;default:t.split("+").forEach(function(t){switch(t){case"preview":e.push(M);break;case"clear":e.push(N);break;case"delete":e.push(H);break;case"save":e.push(W);break;case"copy":e.push(T);break;case"wpsave":e.push(U)}})}return e}n.d(e,"createIABox",function(){return ot}),n.d(e,"util",function(){return ct});const{httpGet:Y,removeNS:R,unique:F,containsArray:V,syntaxHighlight:z,flatten:Q,set:X,htmlList:Z,send_snackbarMSG:$}=a;h("https://semantify.it/assets/data/latest/sdo_properties.json",function(t){D=t}),h("https://semantify.it/assets/data/latest/sdo_classes.json",function(t){C=t});let K=[],tt=[],et=[];let nt=0;const at={};function ot(...t){D&&C?function(t,e,n,a){let o=i()("#"+t);if(!o)throw new Error("Cannot find div with id "+t);const r={panelId:"Panel"+nt++};o.append('<div id="loading'+r.panelId+'" class="col-lg-3 col-md-4 col-sm-6 text-center" style="margin: 10px; padding: 10px; background: white; border-radius: 10px;"><img src="'+s+'/images/loading.gif"></div>');const l=Object.assign({buttons:"default",title:void 0,panelColClass:"col-lg-3 col-md-4 col-sm-6 col-xs-12",withSubClassSelection:!0,annotation:void 0,smtfyAnnotationUID:void 0,smtfySemantifyWebsiteUID:"Hkqtxgmkz",smtfySemantifyWebsiteSecret:"ef0a64008d0490fc4764c2431ca4797b"},n);l.buttons=function(t){let e=[];for(let n of k(t))"string"==typeof n?e=e.concat(q(n)):e.push(n);return e}(l.buttons),e?function t(e,n){at[e]&&at[e].ready?n(at[e].data):at[e]&&!at[e].ready?setTimeout(function(){t(e,n)},50):(at[e]={ready:!1,data:null},Y(s+"/api/domainSpecification/hash/"+e,function(t){if(!t)throw new Error("Ds with hash '"+e+"'does not exist");t.hash=e,at[e].ready=!0,at[e].data=t,n(t)}))}(e,function(t){it(r,o,t,l,a)}):it(r,o,void 0,l,a)}(...t):setTimeout(function(){ot(...t)},50)}function it(t,e,n,a,o){let r=t.panelId;i()("#loading"+r).hide();var l,c=n&&n.content["@graph"][0],d=a&&a.title?a.title:void 0===c?"Domainspecification not found":c["schema:name"],p=d,u=a&&a.buttons&&a.buttons.length>0?'<div class="panel-footer text-center" id="panel-footer-'+r+'"></div>':"";if(e.append('<div class="'+a.panelColClass+'" id="panel-'+r+'"><div class="panel panel-info "><div class="panel-heading sti-red"> <h3>'+d+'</h3></div> <div class="panel-body" id="panel-body-'+r+'"></div>'+u+"</div></div>"),n){var f;if(Array.isArray(c["sh:targetClass"]))for(var m of(f=[],c["sh:targetClass"]))f.push(R(m));else f=R(c["sh:targetClass"]);var h={panelId:r,name:p,root:f};K.push(h);var y=[],b=[],v=function t(e,n,a,o,i){var s=[];for(var r in e)if(e.hasOwnProperty(r)){var l=e[r],c=l["sh:or"]["@list"][0],d=!l["sh:minCount"]||0===l["sh:minCount"],p=R(l["sh:path"]);if(c["sh:node"]){var u,f=""===n?p:n+"-"+p,m=f+"-@type";if(Array.isArray(c["sh:class"]))for(var h of(u=[],c["sh:class"]))u.push(R(h));else u=R(c["sh:class"]);var y={name:u,path:m,panelId:o};tt.push(y);var b=!0===i||d;s=s.concat(t(c["sh:node"]["sh:property"],f,c["sh:class"],o,b))}else{var v={simpleName:p,name:(""===n?"":n+"-")+p,type:c["sh:datatype"],fatherType:a,isOptional:d,multipleValuesAllowed:!1,rootIsOptional:i};if(c["sh:in"]){v.type="Enumeration";var _=[];c["sh:in"]["@list"].forEach(function(t){_.push(R(t))}),v.enums=_}s.push(v)}}return s}(c["sh:property"],"",f,r,!1);for(var _ of v)_.isOptional||_.rootIsOptional?b.push(_):y.push(_);for(var g of y)st(r,g.name,E(g.simpleName,g.name),g.type,g.enums,"#panel-body-",g.isOptional,g.rootIsOptional,g.multipleValuesAllowed);if(b.length>0)for(var g of(i()("#panel-body-"+r).append('<button type="button" class="btn btn-block btn-default text-left" id="panel-body-opt-btn-'+r+'" style="background-color: lightgrey;">Optional<span class="caret"></button>').append('<div id="panel-body-opt-'+r+'"> </div>'),l=r,i()("#panel-body-opt-btn-"+l).click(function(){var t=i()("#panel-body-opt-"+l);"none"===t.css("display")?t.slideDown(500):t.slideUp(500)}),b))st(r,g.name,E(g.simpleName,g.name),g.type,g.enums,"#panel-body-opt-",g.isOptional,g.rootIsOptional,g.multipleValuesAllowed);if(i()("#panel-body-opt-"+r).slideUp(0),a.withSubClassSelection)if(i()("#panel-body-"+r).append("<hr>"),Array.isArray(f)){m=0;for(var h of f){var I=L(h).sort();i()("#panel-body-"+r).append('<select name="select" class="form-control input-myBackground input-mySelect" id="sub_'+r+"_"+m+'" title="Select a sub-class if you want to specify further">'),(w=i()("#sub_"+r+"_"+m)).append('<option value="'+h+'">Default: '+h+"</option>"),I.forEach(function(t){w.append('<option value="'+t+'">'+t+"</option>")}),w.append("</select>"),m++}}else{var w;I=L(f).sort();i()("#panel-body-"+r).append('<select name="select" class="form-control input-myBackground input-mySelect" id="sub_'+r+'" title="Select a sub-class if you want to specify further">'),(w=i()("#sub_"+r)).append('<option value="'+f+'">Default: '+f+"</option>"),I.forEach(function(t){w.append('<option value="'+t+'">'+t+"</option>")}),w.append("</select>")}}else i()("#panel-body-"+r).html('<pre  style="max-height:400px" id="ia_panel_'+r+'_content"></pre>');for(var A of a.buttons)!function(e){var o=A.name,s=A.onclick,r=A.additionalClasses,l=A.hasOwnProperty("icon")?A.icon:null,c=!!A.createJsonLD,d=!1!==A.onlyIcon;i()("#panel-footer-"+e).append('<button class="btn button-sti-red" id="panel-footer-btn-'+o+"-"+e+'" style="margin: 5px 5px; padding: 10px 10px" '+(r||"")+' title="'+o+'" >'+(l?'<i class="material-icons">'+l+"</i>":o)+(d?"":" "+o)+"</button>"),i()("#panel-footer-btn-"+o+"-"+e).click(function(o){o.preventDefault(),s({jsonLd:i()("#panel-footer-btn-Preview-"+e).prop("already_annotation_created")?i()("#panel-footer-btn-Preview-"+e).prop("already_annotation_created"):c?lt(e):null,dsHash:n&&n.hash,annId:i()("#panel-"+e).data("smtfyAnnId"),webId:i()("#panel-"+e).data("smtfyWebId"),panelId:e,inputFields:et,options:a,iaBox:t})})}(r);a.annotation?rt(t,n,a,o):a.smtfyAnnotationUID?function(t,e,n,a){i()("#panel-"+t.panelId).data("smtfyAnnId",n.smtfyAnnotationUID).data("smtfyWebId",n.smtfySemantifyWebsiteUID).data("smtfyWebSecret",n.smtfySemantifyWebsiteSecret),Y(s+"/api/annotation/short/"+n.smtfyAnnotationUID,function(o){"string"==typeof o&&(o=JSON.parse(o)),void 0===o?(i()("#panel-body-"+t.panelId).html("There was an error loading the annotation with id: <b>"+n.smtfyAnnotationUID+"</b> from the server!\n Reload the page or check if the annotation was deleted"),i()("#panel-footer-btn-Preview-"+t.panelId).prop("disabled",!0),i()("#panel-footer-btn-Save-"+t.panelId).prop("disabled",!0)):(n.annotation=o,rt(t,e,n,a))})}(t,n,a,o):o&&o(t)}function st(t,e,n,a,o,s,r,l,c){var d="IA_"+t+"_"+e;switch(l&&!r&&!0,a){case"xsd:string":case"xsd:anyURI":case"xsd:double":case"xsd:float":case"xsd:integer":i()(s+t).append('<input type="text" class="form-control input-myBackground" id="'+d+'" placeholder="'+e+'" title="'+n+'">');break;case"xsd:boolean":i()(s+t).append('<select style="color:#aaa" name="select" class="form-control input-myBackground" id="'+d+'" title=" '+n+'"></select>'),i()("#"+d).append('<option value="" selected style="color:#aaa">'+e+'</option><option  style="color:#000" value="true">true</option><option style="color:#000" value="false">false</option>'),i()("#"+d).change(function(){""==i()(this).val()?i()(this).css({color:"#aaa"}):i()(this).css({color:"#000"})});break;case"xsd:date":i()(s+t).append('<input type="text" class="form-control input-myBackground" id="'+d+'" placeholder="'+e+'" title="'+n+'">'),i()("#"+d).datetimepicker({format:"YYYY-MM-DD"});break;case"xsd:dateTime":i()(s+t).append('<input type="text" class="form-control input-myBackground" id="'+d+'" placeholder="'+e+'" title="'+n+'">'),i()("#"+d).datetimepicker({format:"YYYY-MM-DDTHH:mm"});break;case"xsd:time":i()(s+t).append('<input type="text" class="form-control input-myBackground" id="'+d+'" placeholder="'+e+'" title="'+n+'">'),i()("#"+d).datetimepicker({format:"HH:mm"});break;case"Enumeration":c?i()(s+t).append('<select multiple name="select" class="form-control input-myBackground input-mySelect" id="'+d+'" title=" You can add more than one value by pressing *Ctrl* \n\n'+n+'">'):(i()(s+t).append('<select style="color:#bfc0bf" name="select" class="form-control input-myBackground" id="'+d+'" title=" '+n+'">'),i()("#"+d).change(function(){""==i()(this).val()?i()(this).css({color:"#bfc0bf"}):i()(this).css({color:"#555555"})}));var p=i()("#"+d);p.append('<option value="" selected style="color:#bfc0bf">Select: '+e+"</option>"),o.forEach(function(t){p.append('<option style="color:#555555" value="'+t+'">'+t+"</option>")}),p.append("</select>")}i()("#"+d).data("type",a).data("enumerations",o).data("isOptional",r).data("rootIsOptional",l).data("multipleValuesAllowed",c).data("name",e),et.push(d)}function rt(t,e,n,a){let o=t.panelId,s=n.annotation;if(V(s))i()("#panel-body-"+o).html('<pre id="ia_panel_'+o+'_content"></pre> To edit this annotation, please visit <a href="https://semantify.it">semantify.it</a>  and use the full editor. In this version, no multiple values are allowed! '),i()("#panel-footer-btn-Preview-"+o).prop("already_annotation_created",s),i()("#panel-footer-btn-Save-"+o).prop("disabled",!0),(f=i()("#ia_panel_"+o+"_content")).html(z(JSON.stringify(s,null,2))),f.css("max-height","200px"),f.css("overflow","hidden"),f.css("text-overflow","ellipsis"),f.css("-webkit-mask","linear-gradient(0deg, rgba(0,0,0,0) 20%, rgba(0,0,0,1) 70%)");else if(e){var r=Q(s);if(Array.isArray(s["@type"])){var l=0;for(var c of s["@type"])i()("#sub_"+o+"_"+l).val(c).change(),l++}else i()("#sub_"+o).val(r["@type"]).change();for(var d of function(t){var e=[];for(var n of et)n.slice(n.indexOf("_")+1,n.indexOf("_",n.indexOf("_")+1))===t.toString()&&e.push(n);return e}(o)){var p=i()("#"+d),u=r[p.data("name").replace(/-/g,".")];void 0!==u&&u.length>0&&(u=u.replace("http://schema.org/","")),p.val(u)}}else{var f;i()("#panel-body-"+o).append("This annotation does not have any Domain Specification. Therefore you won`t be able to edit it."),i()("#panel-footer-btn-Preview-"+o).prop("already_annotation_created",s),i()("#panel-footer-btn-Save-"+o).prop("disabled",!0),(f=i()("#ia_panel_"+o+"_content")).html(z(JSON.stringify(s,null,2))),f.css("max-height","200px"),f.css("overflow","hidden"),f.css("text-overflow","ellipsis"),f.css("-webkit-mask","linear-gradient(0deg, rgba(0,0,0,0) 20%, rgba(0,0,0,1) 70%)")}}function lt(t){var e,n="Thing";if(K.forEach(function(e){e.panelId==t&&(e.name,n=e.root)}),Array.isArray(n))for(var a in e=[],n)e.push(i()("#sub_"+t+"_"+a).val());else e=i()("#sub_"+t).val();null!=e&&""!=e&&null!=e&&(n=e);var o=[],s=[],r={"@context":"http://schema.org/","@type":n},l=!0,c=!0,d=[],p=[],u=[];for(var f of et){f.slice(f.indexOf("_")+1,f.indexOf("_",f.indexOf("_")+1))===t.toString()&&d.push(f)}for(var f of d){var m=i()("#"+f),h=m.val(),y=m.data("name"),b=m.data("isOptional"),v=m.data("rootIsOptional");if(null!=h&&""!==h&&0!==h.length&&null!=h.length||!1!==b||!1!==v||(l=!1,p.push(m)),null!=h&&null!=h&&""!=h&&0!=h.length&&null!=h.length&&!0===v){for(var _=[],g=y.split("-");g.length>1;)g.pop(),_.push(g.join("-"));d.forEach(function(t){var e=i()("#"+t),n=e.data("name"),a=e.data("isOptional"),o=e.data("rootIsOptional"),s=n.split("-");s=s.length;for(var r=e.val(),l=0;l<_.length;l++){var d=_[l].split("-");d=d.length,0==a&&1==o&&n.indexOf(_[l])>=0&&s===d+1&&(void 0!==r&&""!==r&&null!=r&&0!==r.length&&null!=r.length||(u.push(n),c=!1))}})}if(tt.forEach(function(e){if(e.panelId===t){var n={name:e.name,path:e.path};s.push(n)}}),null!=h&&""!==h&&0!==h.length&&null!=h.length){for(var I=y.split("-");I.length>1;){I.pop();var w=I.join("-")+"-@type";o.push(w)}s.forEach(function(t){o.forEach(function(e){e===t.path&&(r=X(r,t.path,t.name))})}),r=X(r,y,h)}}return l&&c?r:(l?(u=Z(F(u)),$("Please also fill in <ul>"+u.join("")+"</ul>",3e3+1e3*(u.length-1)),u.forEach(function(e){var n=i()("#IA_"+t+"_"+e.replace(/<(?:.|\n)*?>/gm,""));n.css({border:"1px solid rgba(255, 0, 0, 1)","box-shadow":"0 0 10px rgba(255, 0, 0, 1)"}),setTimeout(function(){n.css({border:"","box-shadow":""})},3e3)})):(p.forEach(function(t){t.css({border:"1px solid rgba(255, 0, 0, 1)","box-shadow":"0 0 10px rgba(255, 0, 0, 1)"}),setTimeout(function(){t.css({border:"","box-shadow":""})},3e3)}),$("Please fill in all required fields",3e3)),null)}const ct={semantifyUrl:s,remove:f,copyStr:j,syntaxHighlight:S,send_snackbarMSG:u,send_snackbarMSG_fail:p,httpGetHeaders:y,httpPostJson:b,httpCall:_,httpGet:h}}]);