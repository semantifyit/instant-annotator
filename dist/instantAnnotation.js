/*! For license information please see instantAnnotation.js.LICENSE */
var InstantAnnotation=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=94)}([function(e,t){e.exports=jQuery},function(e,t,n){"use strict";var r=n(30),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return a(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";const r=n(5),i=n(3),o=n(16).IdentifierIssuer,s=n(4),a=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,l=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,c=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,u={accept:"application/ld+json, application/json"},d={};e.exports=d,d.IdentifierIssuer=o,d.clone=function(e){if(e&&"object"==typeof e){let t;if(i.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=d.clone(e[n])}else if(e instanceof Map){t=new Map;for(const[n,r]of e)t.set(n,d.clone(r))}else if(e instanceof Set){t=new Set;for(const n of e)t.add(d.clone(n))}else if(i.isObject(e)){t={};for(const n in e)t[n]=d.clone(e[n])}else t=e.toString();return t}return e},d.asArray=function(e){return Array.isArray(e)?e:[e]},d.buildHeaders=(e={})=>{if(Object.keys(e).some(e=>"accept"===e.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+u.accept+'" is supported.');return Object.assign({Accept:u.accept},e)},d.parseLinkHeader=e=>{const t={},n=e.match(a);for(let e=0;e<n.length;++e){let r=n[e].match(l);if(!r)continue;const i={target:r[1]},o=r[2];for(;r=c.exec(o);)i[r[1]]=void 0===r[2]?r[3]:r[2];const s=i.rel||"";Array.isArray(t[s])?t[s].push(i):t.hasOwnProperty(s)?t[s]=[t[s],i]:t[s]=i}return t},d.validateTypeValue=(e,t)=>{if(!(i.isString(e)||i.isArray(e)&&e.every(e=>i.isString(e)))){if(t&&i.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&d.asArray(e["@default"]).every(e=>i.isString(e)))return}throw new s('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},d.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const n=e[t];return!i.isArray(n)||n.length>0}return!1},d.hasValue=(e,t,n)=>{if(d.hasProperty(e,t)){let o=e[t];const s=r.isList(o);if(i.isArray(o)||s){s&&(o=o["@list"]);for(let e=0;e<o.length;++e)if(d.compareValues(n,o[e]))return!0}else if(!i.isArray(n))return d.compareValues(n,o)}return!1},d.addValue=(e,t,n,r)=>{if("propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)e[t]=n;else if(i.isArray(n)){0===n.length&&r.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),r.prependValue&&(n=n.concat(e[t]),e[t]=[]);for(let i=0;i<n.length;++i)d.addValue(e,t,n[i],r)}else if(e.hasOwnProperty(t)){const o=!r.allowDuplicate&&d.hasValue(e,t,n);i.isArray(e[t])||o&&!r.propertyIsArray||(e[t]=[e[t]]),o||(r.prependValue?e[t].unshift(n):e[t].push(n))}else e[t]=r.propertyIsArray?[n]:n},d.getValues=(e,t)=>[].concat(e[t]||[]),d.removeProperty=(e,t)=>{delete e[t]},d.removeValue=(e,t,n,r)=>{"propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1);const i=d.getValues(e,t).filter(e=>!d.compareValues(e,n));0===i.length?d.removeProperty(e,t):1!==i.length||r.propertyIsArray?e[t]=i:e[t]=i[0]},d.relabelBlankNodes=(e,t)=>{return function e(t,n){if(i.isArray(n))for(let r=0;r<n.length;++r)n[r]=e(t,n[r]);else if(r.isList(n))n["@list"]=e(t,n["@list"]);else if(i.isObject(n)){r.isBlankNode(n)&&(n["@id"]=t.getId(n["@id"]));const i=Object.keys(n).sort();for(let r=0;r<i.length;++r){const o=i[r];"@id"!==o&&(n[o]=e(t,n[o]))}}return n}((t=t||{}).issuer||new o("_:b"),e)},d.compareValues=(e,t)=>e===t||(!(!r.isValue(e)||!r.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(i.isObject(e)&&"@id"in e&&i.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"]),d.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1},function(e,t,n){"use strict";const r={};e.exports=r,r.isArray=Array.isArray,r.isBoolean=e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e),r.isDouble=e=>r.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21),r.isEmptyObject=e=>r.isObject(e)&&0===Object.keys(e).length,r.isNumber=e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e),r.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),r.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),r.isString=e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e),r.isUndefined=e=>void 0===e},function(e,t,n){"use strict";e.exports=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",n={}){super(e),this.name=t,this.message=e,this.details=n}}},function(e,t,n){"use strict";const r=n(3),i={};e.exports=i,i.isSubject=e=>{if(r.isObject(e)&&!("@value"in e||"@set"in e||"@list"in e)){return Object.keys(e).length>1||!("@id"in e)}return!1},i.isSubjectReference=e=>r.isObject(e)&&1===Object.keys(e).length&&"@id"in e,i.isValue=e=>r.isObject(e)&&"@value"in e,i.isList=e=>r.isObject(e)&&"@list"in e,i.isGraph=e=>r.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter(e=>"@id"!==e&&"@index"!==e).length,i.isSimpleGraph=e=>i.isGraph(e)&&!("@id"in e),i.isBlankNode=e=>!!r.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e))},function(e,t,n){"use strict";const r=n(3),i={};e.exports=i,i.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},i.parse=(e,t)=>{const n={},r=i.parsers[t||"full"],o=r.regex.exec(e);let s=r.keys.length;for(;s--;)n[r.keys[s]]=void 0===o[s]?null:o[s];return("https"===n.scheme&&"443"===n.port||"http"===n.scheme&&"80"===n.port)&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=i.removeDotSegments(n.path),n},i.prependBase=(e,t)=>{if(null===e)return t;if(i.isAbsolute(t))return t;e&&!r.isString(e)||(e=i.parse(e||""));const n=i.parse(t),o={protocol:e.protocol||""};if(null!==n.authority)o.authority=n.authority,o.path=n.path,o.query=n.query;else if(o.authority=e.authority,""===n.path)o.path=e.path,null!==n.query?o.query=n.query:o.query=e.query;else{if(0===n.path.indexOf("/"))o.path=n.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),(t.length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=n.path,o.path=t}o.query=n.query}""!==n.path&&(o.path=i.removeDotSegments(o.path));let s=o.protocol;return null!==o.authority&&(s+="//"+o.authority),s+=o.path,null!==o.query&&(s+="?"+o.query),null!==n.fragment&&(s+="#"+n.fragment),""===s&&(s="./"),s},i.removeBase=(e,t)=>{if(null===e)return t;e&&!r.isString(e)||(e=i.parse(e||""));let n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),0!==t.indexOf(n))return t;const o=i.parse(t.substr(n.length)),s=e.normalizedPath.split("/"),a=o.normalizedPath.split("/"),l=o.fragment||o.query?0:1;for(;s.length>0&&a.length>l&&s[0]===a[0];)s.shift(),a.shift();let c="";if(s.length>0){s.pop();for(let e=0;e<s.length;++e)c+="../"}return c+=a.join("/"),null!==o.query&&(c+="?"+o.query),null!==o.fragment&&(c+="#"+o.fragment),""===c&&(c="./"),c},i.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),n=[];for(;t.length>0;){const e=t.shift(),r=0===t.length;"."!==e?".."!==e?n.push(e):(n.pop(),r&&n.push("")):r&&n.push("")}return"/"===e[0]&&n.length>0&&""!==n[0]&&n.unshift(""),1===n.length&&""===n[0]?"/":n.join("/")};const o=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;i.isAbsolute=e=>r.isString(e)&&o.test(e),i.isRelative=e=>r.isString(e)},function(e,t,n){const r=n(40);function i(e){if(void 0!==e)return JSON.parse(JSON.stringify(e))}function o(e){return!Array.isArray(e)&&(!s(e)&&"object"==typeof e)}function s(e){return null==e}function a(e){return!s(e)&&("string"==typeof e||e instanceof String)}function l(e){return Array.isArray(e)}e.exports={applyFilter:function(e,t,n){if(!Array.isArray(e)||0===e.length||null===t||0===Object.keys(t).length)return e;const r=[],i=n.context;if(a(t.fromVocabulary)){for(const e of Object.keys(i))if(i[e]===t.fromVocabulary){t.fromVocabulary=e;break}}else if(l(t.fromVocabulary))for(let e=0;e<t.fromVocabulary.length;e++)for(let n=0;n<Object.keys(i).length;n++)if(i[Object.keys(i)[n]]===t.fromVocabulary[e]){t.fromVocabulary[e]=Object.keys(i)[n];break}for(let i=0;i<e.length;i++){const o=n.getTerm(e[i]);if(void 0!==t.isSuperseded){if(!1===t.isSuperseded&&null!=o.isSupersededBy())continue;if(!0===t.isSuperseded&&null==o.isSupersededBy())continue}if(t.fromVocabulary){let e=!1;if(a(t.fromVocabulary))t.fromVocabulary&&o.getIRI(!0).startsWith(t.fromVocabulary)&&(e=!0);else if(l(t.fromVocabulary))for(let n=0;n<t.fromVocabulary.length;n++)o.getIRI(!0).startsWith(t.fromVocabulary[n])&&(e=!0);if(!e)continue}if(t.termType){let e=!1,n=[];a(t.termType)?n.push(t.termType):l(t.termType)&&(n=t.termType);for(let t=0;t<n.length;t++){let r;switch(n[t]){case"Class":r="rdfs:Class";break;case"Property":r="rdf:Property";break;case"Enumeration":r="schema:Enumeration";break;case"EnumerationMember":r="soa:EnumerationMember";break;case"DataType":r="schema:DataType";break;default:throw new Error("Invalid filter.termType "+n[t])}if(r===o.getTermType()){e=!0;break}}if(!e)continue}r.push(e[i])}return r},copByVal:i,isArray:l,isString:a,isObject:o,isNil:s,uniquifyArray:function(e){const t={},n=[];for(const r of e)t[r]||(t[r]=1,n.push(r));return n},preProcessVocab:async function(e,t){let n=!1;do{const t=[];n=!1;for(let r=0;r<e["@graph"].length;r++)void 0!==e["@graph"][r]["@graph"]?(t.push(...i(e["@graph"][r]["@graph"])),n=!0):t.push(i(e["@graph"][r]));e["@graph"]=i(t)}while(!0===n);const o=await r.expand(e),s=await r.compact(o,t);return void 0===s["@graph"]?(delete s["@context"],{"@context":t,"@graph":[s]}):s},generateContext:function(e,t){const n=Object.keys(e),r=Object.keys(t);let i=JSON.parse(JSON.stringify(e));for(let e=0;e<r.length;e++){const o=r[e];if(a(t[o])){let e=!1;for(let r=0;r<n.length;r++)if(a(i[n[r]])&&i[n[r]]===t[o]){e=!0;break}if(e)continue;if(i[o]){if(i[o]!==t[o]){let e=!1,n=1;for(;!1===e;){const r=o+n++;i[r]||(e=!0,i[r]=t[o])}}}else i[o]=t[o]}}const s={};Object.keys(i).sort().forEach((function(e){s[e]=i[e]})),i=s;const l=Object.keys(i),c={};for(let e=0;e<l.length;e++)a(i[l[e]])&&(c[l[e]]=i[l[e]]);for(let e=0;e<l.length;e++)o(i[l[e]])&&(c[l[e]]=i[l[e]]);return c},curateVocabNode:function(e,t){if(void 0!==e["rdfs:comment"]){if(a(e["rdfs:comment"]))e["rdfs:comment"]={en:e["rdfs:comment"]};else if(o(e["rdfs:comment"])){const t={};t[e["rdfs:comment"]["@language"]]=e["rdfs:comment"]["@value"],e["rdfs:comment"]=i(t)}else if(l(e["rdfs:comment"])){const t={};for(let n=0;n<e["rdfs:comment"].length;n++)o(e["rdfs:comment"][n])&&(t[e["rdfs:comment"][n]["@language"]]=e["rdfs:comment"][n]["@value"]);e["rdfs:comment"]=i(t)}}else e["rdfs:comment"]={};if(void 0!==e["rdfs:label"]){if(a(e["rdfs:label"]))e["rdfs:label"]={en:e["rdfs:label"]};else if(o(e["rdfs:label"])){const t={};t[e["rdfs:label"]["@language"]]=e["rdfs:label"]["@value"],e["rdfs:label"]=i(t)}else if(l(e["rdfs:label"])){const t={};for(let n=0;n<e["rdfs:label"].length;n++)o(e["rdfs:label"][n])&&(t[e["rdfs:label"][n]["@language"]]=e["rdfs:label"][n]["@value"]);e["rdfs:label"]=i(t)}}else e["rdfs:label"]={};if(a(e["rdfs:subClassOf"])?e["rdfs:subClassOf"]=[e["rdfs:subClassOf"]]:void 0===e["rdfs:subClassOf"]&&"rdfs:Class"===e["@type"]&&(e["rdfs:subClassOf"]=[]),a(e["rdfs:subPropertyOf"])?e["rdfs:subPropertyOf"]=[e["rdfs:subPropertyOf"]]:void 0===e["rdfs:subPropertyOf"]&&"rdf:Property"===e["@type"]&&(e["rdfs:subPropertyOf"]=[]),a(e["schema:domainIncludes"])?e["schema:domainIncludes"]=[e["schema:domainIncludes"]]:void 0===e["schema:domainIncludes"]&&"rdf:Property"===e["@type"]&&(e["schema:domainIncludes"]=[]),a(e["schema:rangeIncludes"])?e["schema:rangeIncludes"]=[e["schema:rangeIncludes"]]:void 0===e["schema:rangeIncludes"]&&"rdf:Property"===e["@type"]&&(e["schema:rangeIncludes"]=[]),!a(e["schema:isPartOf"])){const n=Object.keys(t);let r;for(let i=0;i<n.length;i++)if(e["@id"].substring(0,e["@id"].indexOf(":"))===n[i]){r=t[n[i]];break}if(void 0!==r){let t;do{t=!1,(r.endsWith("/")||r.endsWith("#"))&&(r=r.substring(0,r.length-1),t=!0)}while(!0===t);e["schema:isPartOf"]=r}}return e},toCompactIRI:function(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=t[n[r]];if(a(i)&&e.startsWith(i))return n[r]+":"+e.substring(i.length)}return null},toAbsoluteIRI:function(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=t[n[r]];if(e.substring(0,e.indexOf(":"))===n[r])return i.concat(e.substring(e.indexOf(":")+1))}return null},sortReleaseEntriesByDate:function(e){return Object.entries(e).sort((e,t)=>new Date(t[1])-new Date(e[1]))},getFileNameForSchemaOrgVersion:function(e){switch(e){case"2.0":case"2.1":case"2.2":case"3.0":throw new Error("There is no jsonld file for that schema.org version.");case"3.1":case"3.2":case"3.3":case"3.4":case"3.5":case"3.6":case"3.7":case"3.8":case"3.9":case"4.0":case"5.0":case"6.0":case"7.0":case"7.01":case"7.02":case"7.03":case"7.04":case"8.0":return"all-layers.jsonld";case"9.0":default:return"schemaorg-all-http.jsonld"}}}},function(e,t,n){"use strict";(function(t,n){const r={};e.exports=r;const i="function"==typeof t&&t,o=i?e=>i(e):e=>setTimeout(e,0);function s(e,t,r){try{return e(t,r)}catch(e){n.nextTick(()=>{throw e})}}"object"==typeof n&&"function"==typeof n.nextTick?r.nextTick=n.nextTick:r.nextTick=o,r.setImmediate=i?o:r.nextTick,r.clone=function(e){if(e&&"object"==typeof e){let t;if(Array.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=r.clone(e[n])}else if(r.isObject(e)){t={};for(const n in e)t[n]=r.clone(e[n])}else t=e.toString();return t}return e},r.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),r.isUndefined=e=>void 0===e,r.callbackify=e=>(async function(...t){const n=t[t.length-1];let r;"function"==typeof n&&t.pop();try{r=await e.apply(null,t)}catch(e){if("function"==typeof n)return s(n,e);throw e}return"function"==typeof n?s(n,null,r):r})}).call(this,n(22).setImmediate,n(10))},function(e,t,n){"use strict";const r=n(2),i=n(4),{isArray:o,isObject:s,isString:a,isUndefined:l}=n(3),{isAbsolute:c,isRelative:u,prependBase:d,parse:h}=n(6),{asArray:f,compareShortestLeast:p}=n(2),y=new Map,g=/^@[a-zA-Z]+$/,m={};function v(e,t,n,r,i,o){if(null===t||!a(t)||m.isKeyword(t))return t;if(t.match(g))return null;if(r&&r.hasOwnProperty(t)&&!0!==i.get(t)&&m.createTermDefinition({activeCtx:e,localCtx:r,term:t,defined:i,options:o}),(n=n||{}).vocab){const n=e.mappings.get(t);if(null===n)return null;if(s(n)&&"@id"in n)return n["@id"]}const l=t.indexOf(":");if(l>0){const n=t.substr(0,l),s=t.substr(l+1);if("_"===n||0===s.indexOf("//"))return t;r&&r.hasOwnProperty(n)&&m.createTermDefinition({activeCtx:e,localCtx:r,term:n,defined:i,options:o});const a=e.mappings.get(n);if(a&&a._prefix)return a["@id"]+s;if(c(t))return t}if(n.vocab&&"@vocab"in e)return e["@vocab"]+t;if(n.base&&"@base"in e){if(e["@base"])return d(d(o.base,e["@base"]),t)}else if(n.base)return d(o.base,t);return t}e.exports=m,m.process=async({activeCtx:e,localCtx:t,options:n,propagate:l=!0,overrideProtected:h=!1,cycles:p=new Set})=>{if(s(t)&&"@context"in t&&o(t["@context"])&&(t=t["@context"]),0===f(t).length)return e;const y=await n.contextResolver.resolve({activeCtx:e,context:t,documentLoader:n.documentLoader,base:n.base});s(y[0].document)&&"boolean"==typeof y[0].document["@propagate"]&&(l=y[0].document["@propagate"]);let g=e;l||g.previousContext||(g=g.clone(),g.previousContext=e);for(const o of y){let{document:l}=o;if(e=g,null===l){if(!h&&0!==Object.keys(e.protected).length){const s=n&&n.protectedMode||"error";if("error"===s)throw new i("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===s){console.warn("WARNING: invalid context nullification");const t=o.getProcessed(e);if(t){g=e=t;continue}const i=e;g=e=m.getInitialContext(n).clone();for(const[t,n]of Object.entries(i.protected))n&&(e.mappings[t]=r.clone(i.mappings[t]));e.protected=r.clone(i.protected),o.setProcessed(i,g);continue}throw new i("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,protectedMode:s})}g=e=m.getInitialContext(n).clone();continue}const f=o.getProcessed(e);if(f){g=e=f;continue}if(s(l)&&"@context"in l&&(l=l["@context"]),!s(l))throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:l});g=g.clone();const y=new Map;if("@version"in l){if(1.1!==l["@version"])throw new i("Unsupported JSON-LD version: "+l["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:l});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new i("@version: "+l["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:l});g.processingMode="json-ld-1.1",g["@version"]=l["@version"],y.set("@version",!0)}if(g.processingMode=g.processingMode||e.processingMode,"@base"in l){let e=l["@base"];if(null===e||c(e));else{if(!u(e))throw new i('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:l});e=d(g["@base"],e)}g["@base"]=e,y.set("@base",!0)}if("@vocab"in l){const e=l["@vocab"];if(null===e)delete g["@vocab"];else{if(!a(e))throw new i('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});if(!c(e)&&m.processingMode(g,1))throw new i('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});g["@vocab"]=v(g,e,{vocab:!0,base:!0},void 0,void 0,n)}y.set("@vocab",!0)}if("@language"in l){const e=l["@language"];if(null===e)delete g["@language"];else{if(!a(e))throw new i('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:l});g["@language"]=e.toLowerCase()}y.set("@language",!0)}if("@direction"in l){const t=l["@direction"];if("json-ld-1.0"===e.processingMode)throw new i("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:l});if(null===t)delete g["@direction"];else{if("ltr"!==t&&"rtl"!==t)throw new i('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:l});g["@direction"]=t}y.set("@direction",!0)}if("@propagate"in l){const n=l["@propagate"];if("json-ld-1.0"===e.processingMode)throw new i("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:l});if("boolean"!=typeof n)throw new i("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});y.set("@propagate",!0)}if("@import"in l){const r=l["@import"];if("json-ld-1.0"===e.processingMode)throw new i("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:l});if(!a(r))throw new i("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const o=await n.contextResolver.resolve({activeCtx:e,context:r,documentLoader:n.documentLoader,base:n.base});if(1!==o.length)throw new i("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const s=o[0].getProcessed(e);if(s)l=s;else{const n=o[0].document;if("@import"in n)throw new i("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const e in n)l.hasOwnProperty(e)||(l[e]=n[e]);o[0].setProcessed(e,l)}y.set("@import",!0)}y.set("@protected",l["@protected"]||!1);for(const e in l)if(m.createTermDefinition({activeCtx:g,localCtx:l,term:e,defined:y,options:n,overrideProtected:h}),s(l[e])&&"@context"in l[e]){const t=l[e]["@context"];let r=!0;if(a(t)){const e=d(n.base,t);p.has(e)?r=!1:p.add(e)}if(r)try{await m.process({activeCtx:g,localCtx:l[e]["@context"],overrideProtected:!0,options:n,cycles:p})}catch(t){throw new i("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:l[e]["@context"],term:e})}}o.setProcessed(e,g)}return g},m.createTermDefinition=({activeCtx:e,localCtx:t,term:n,defined:r,options:l,overrideProtected:u=!1})=>{if(r.has(n)){if(r.get(n))return;throw new i("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}let d;if(r.set(n,!1),t.hasOwnProperty(n)&&(d=t[n]),"@type"===n&&s(d)&&"@set"===(d["@container"]||"@set")&&m.processingMode(e,1.1)){const e=["@container","@id","@protected"],r=Object.keys(d);if(0===r.length||r.some(t=>!e.includes(t)))throw new i("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n})}else{if(m.isKeyword(n))throw new i("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(n.match(g))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:n});if(""===n)throw new i("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const h=e.mappings.get(n);e.mappings.has(n)&&e.mappings.delete(n);let f=!1;if((a(d)||null===d)&&(f=!0,d={"@id":d}),!s(d))throw new i("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const p={};e.mappings.set(n,p),p.reverse=!1;const y=["@container","@id","@language","@reverse","@type"];m.processingMode(e,1.1)&&y.push("@context","@direction","@index","@nest","@prefix","@protected");for(const e in d)if(!y.includes(e))throw new i("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const b=n.indexOf(":");if(p._termHasColon=b>0,"@reverse"in d){if("@id"in d)throw new i("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in d)throw new i("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const o=d["@reverse"];if(!a(o))throw new i("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(!m.isKeyword(o)&&o.match(g))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:o}),void(h?e.mappings.set(n,h):e.mappings.delete(n));const s=v(e,o,{vocab:!0,base:!1},t,r,l);if(!c(s))throw new i("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});p["@id"]=s,p.reverse=!0}else if("@id"in d){let o=d["@id"];if(o&&!a(o))throw new i("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(null===o)p["@id"]=null;else{if(!m.isKeyword(o)&&o.match(g))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:o}),void(h?e.mappings.set(n,h):e.mappings.delete(n));if(o!==n){if(o=v(e,o,{vocab:!0,base:!1},t,r,l),!c(o)&&!m.isKeyword(o))throw new i("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(n.match(/(?::[^:])|\//)){if(v(e,n,{vocab:!0,base:!1},t,new Map(r).set(n,!0),l)!==o)throw new i("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})}p["@id"]=o,p._prefix=f&&!p._termHasColon&&o.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in p))if(p._termHasColon){const i=n.substr(0,b);if(t.hasOwnProperty(i)&&m.createTermDefinition({activeCtx:e,localCtx:t,term:i,defined:r,options:l}),e.mappings.has(i)){const t=n.substr(b+1);p["@id"]=e.mappings.get(i)["@id"]+t}else p["@id"]=n}else if("@type"===n)p["@id"]=n;else{if(!("@vocab"in e))throw new i("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});p["@id"]=e["@vocab"]+n}if((!0===d["@protected"]||!0===r.get("@protected")&&!1!==d["@protected"])&&(e.protected[n]=!0,p.protected=!0),r.set(n,!0),"@type"in d){let n=d["@type"];if(!a(n))throw new i("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@json"===n||"@none"===n){if(m.processingMode(e,1))throw new i("Invalid JSON-LD syntax; an @context @type value must not be "+`"${n}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if("@id"!==n&&"@vocab"!==n){if(n=v(e,n,{vocab:!0,base:!1},t,r,l),!c(n))throw new i("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===n.indexOf("_:"))throw new i("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}p["@type"]=n}if("@container"in d){const n=a(d["@container"])?[d["@container"]]:d["@container"]||[],r=["@list","@set","@index","@language"];let s=!0;const l=n.includes("@set");if(m.processingMode(e,1.1)){if(r.push("@graph","@id","@type"),n.includes("@list")){if(1!==n.length)throw new i("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(n.includes("@graph")){if(n.some(e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e))throw new i("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else s&=n.length<=(l?2:1);if(n.includes("@type")&&(p["@type"]=p["@type"]||"@id",!["@id","@vocab"].includes(p["@type"])))throw new i("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else s&=!o(d["@container"]),s&=n.length<=1;if(s&=n.every(e=>r.includes(e)),s&=!(l&&n.includes("@list")),!s)throw new i("Invalid JSON-LD syntax; @context @container value must be one of the following: "+r.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(p.reverse&&!n.every(e=>["@index","@set"].includes(e)))throw new i("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});p["@container"]=n}if("@index"in d){if(!("@container"in d&&p["@container"].includes("@index")))throw new i("Invalid JSON-LD syntax; @index without @index in @container: "+`"${d["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!a(d["@index"])||0===d["@index"].indexOf("@"))throw new i("Invalid JSON-LD syntax; @index must expand to an IRI: "+`"${d["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});p["@index"]=d["@index"]}if("@context"in d&&(p["@context"]=d["@context"]),"@language"in d&&!("@type"in d)){let e=d["@language"];if(null!==e&&!a(e))throw new i("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),p["@language"]=e}if("@prefix"in d){if(n.match(/:|\//))throw new i("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(m.isKeyword(p["@id"]))throw new i("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof d["@prefix"])throw new i("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});p._prefix=!0===d["@prefix"]}if("@direction"in d){const e=d["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new i('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});p["@direction"]=e}if("@nest"in d){const e=d["@nest"];if(!a(e)||"@nest"!==e&&0===e.indexOf("@"))throw new i("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});p["@nest"]=e}const w=p["@id"];if("@context"===w||"@preserve"===w)throw new i("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(h&&h.protected&&!u&&(e.protected[n]=!0,p.protected=!0,!function e(t,n){if(!t||"object"!=typeof t||!n||"object"!=typeof n)return t===n;const r=Array.isArray(t);if(r!==Array.isArray(n))return!1;if(r){if(t.length!==n.length)return!1;for(let r=0;r<t.length;++r)if(!e(t[r],n[r]))return!1;return!0}const i=Object.keys(t),o=Object.keys(n);if(i.length!==o.length)return!1;for(const r in t){let i=t[r],o=n[r];if("@container"===r&&Array.isArray(i)&&Array.isArray(o)&&(i=i.slice().sort(),o=o.slice().sort()),!e(i,o))return!1}return!0}(h,p))){const e=l&&l.protectedMode||"error";if("error"===e)throw new i("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:n});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:n});throw new i("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:n,protectedMode:e})}},m.expandIri=(e,t,n,r)=>v(e,t,n,void 0,void 0,r),m.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),n=y.get(t);if(n)return n;const i={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},n=e.fastCurieMap={},r={},i=(e["@language"]||"@none").toLowerCase(),a=e["@direction"],l=e.mappings,c=[...l.keys()].sort(p);for(const e of c){const o=l.get(e);if(null===o)continue;let c=o["@container"]||"@none";if(c=[].concat(c).sort().join(""),null===o["@id"])continue;const u=f(o["@id"]);for(const l of u){let u=t[l];const d=m.isKeyword(l);if(u)d||o._termHasColon||r[l].push(e);else if(t[l]=u={},!d&&!o._termHasColon){r[l]=[e];const t={iri:l,terms:r[l]};l[0]in n?n[l[0]].push(t):n[l[0]]=[t]}if(u[c]||(u[c]={"@language":{},"@type":{},"@any":{}}),u=u[c],s(e,u["@any"],"@none"),o.reverse)s(e,u["@type"],"@reverse");else if("@none"===o["@type"])s(e,u["@any"],"@none"),s(e,u["@language"],"@none"),s(e,u["@type"],"@none");else if("@type"in o)s(e,u["@type"],o["@type"]);else if("@language"in o&&"@direction"in o){const t=o["@language"],n=o["@direction"];s(e,u["@language"],t&&n?`${t}_${n}`.toLowerCase():t?t.toLowerCase():n?`_${n}`:"@null")}else"@language"in o?s(e,u["@language"],(o["@language"]||"@null").toLowerCase()):"@direction"in o?o["@direction"]?s(e,u["@language"],`_${o["@direction"]}`):s(e,u["@language"],"@none"):a?(s(e,u["@language"],`_${a}`),s(e,u["@language"],"@none"),s(e,u["@type"],"@none")):(s(e,u["@language"],i),s(e,u["@language"],"@none"),s(e,u["@type"],"@none"))}}for(const e in n)o(n,e,1);return t},clone:function(){const e={};e.mappings=r.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=r.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone());e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]);"@language"in this&&(e["@language"]=this["@language"]);"@vocab"in this&&(e["@vocab"]=this["@vocab"]);return e},revertToPreviousContext:function(){if(!this.previousContext)return this;return this.previousContext.clone()},protected:{}};return 1e4===y.size&&y.clear(),y.set(t,i),i;function o(e,t,n){const r=e[t],i=e[t]={};let s,a;for(const e of r)s=e.iri,a=n>=s.length?"":s[n],a in i?i[a].push(e):i[a]=[e];for(const e in i)""!==e&&o(i,e,n+1)}function s(e,t,n){t.hasOwnProperty(n)||(t[n]=e)}},m.getContextValue=(e,t,n)=>{if(null===t){if("@context"===n)return;return null}if(e.mappings.has(t)){const r=e.mappings.get(t);if(l(n))return r;if(r.hasOwnProperty(n))return r[n]}return"@language"===n&&n in e?e[n]:"@direction"===n&&n in e?e[n]:"@context"!==n?null:void 0},m.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode,m.isKeyword=e=>{if(!a(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=a(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports={options:{usePureJavaScript:!1}}},function(e,t,n){"use strict";const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2001/XMLSchema#";e.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:r,RDF_LIST:r+"List",RDF_FIRST:r+"first",RDF_REST:r+"rest",RDF_NIL:r+"nil",RDF_TYPE:r+"type",RDF_PLAIN_LITERAL:r+"PlainLiteral",RDF_XML_LITERAL:r+"XMLLiteral",RDF_JSON_LITERAL:r+"JSON",RDF_OBJECT:r+"object",RDF_LANGSTRING:r+"langString",XSD:i,XSD_BOOLEAN:i+"boolean",XSD_DOUBLE:i+"double",XSD_INTEGER:i+"integer",XSD_STRING:i+"string"}},function(e,t,n){"use strict";const{isKeyword:r}=n(9),i=n(5),o=n(3),s=n(2),a=n(4),l={};e.exports=l,l.createMergedNodeMap=(e,t)=>{const n=(t=t||{}).issuer||new s.IdentifierIssuer("_:b"),r={"@default":{}};return l.createNodeMap(e,r,"@default",n),l.mergeNodeMaps(r)},l.createNodeMap=(e,t,n,c,u,d)=>{if(o.isArray(e)){for(const r of e)l.createNodeMap(r,t,n,c,void 0,d);return}if(!o.isObject(e))return void(d&&d.push(e));if(i.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=c.getId(t))}return void(d&&d.push(e))}if(d&&i.isList(e)){const r=[];return l.createNodeMap(e["@list"],t,n,c,u,r),void d.push({"@list":r})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&c.getId(e)}o.isUndefined(u)&&(u=i.isBlankNode(e)?c.getId(e["@id"]):e["@id"]),d&&d.push({"@id":u});const h=t[n],f=h[u]=h[u]||{};f["@id"]=u;const p=Object.keys(e).sort();for(let o of p){if("@id"===o)continue;if("@reverse"===o){const r={"@id":u},o=e["@reverse"];for(const e in o){const a=o[e];for(const o of a){let a=o["@id"];i.isBlankNode(o)&&(a=c.getId(a)),l.createNodeMap(o,t,n,c,a),s.addValue(h[a],e,r,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===o){u in t||(t[u]={}),l.createNodeMap(e[o],t,u,c);continue}if("@included"===o){l.createNodeMap(e[o],t,n,c);continue}if("@type"!==o&&r(o)){if("@index"===o&&o in f&&(e[o]!==f[o]||e[o]["@id"]!==f[o]["@id"]))throw new a("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[o]=e[o];continue}const d=e[o];if(0===o.indexOf("_:")&&(o=c.getId(o)),0!==d.length)for(let e of d)if("@type"===o&&(e=0===e.indexOf("_:")?c.getId(e):e),i.isSubject(e)||i.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const r=i.isBlankNode(e)?c.getId(e["@id"]):e["@id"];s.addValue(f,o,{"@id":r},{propertyIsArray:!0,allowDuplicate:!1}),l.createNodeMap(e,t,n,c,r)}else if(i.isValue(e))s.addValue(f,o,e,{propertyIsArray:!0,allowDuplicate:!1});else if(i.isList(e)){const r=[];l.createNodeMap(e["@list"],t,n,c,u,r),e={"@list":r},s.addValue(f,o,e,{propertyIsArray:!0,allowDuplicate:!1})}else l.createNodeMap(e,t,n,c,u),s.addValue(f,o,e,{propertyIsArray:!0,allowDuplicate:!1});else s.addValue(f,o,[],{propertyIsArray:!0})}},l.mergeNodeMapGraphs=e=>{const t={};for(const n of Object.keys(e).sort())for(const i of Object.keys(e[n]).sort()){const o=e[n][i];i in t||(t[i]={"@id":i});const a=t[i];for(const e of Object.keys(o).sort())if(r(e)&&"@type"!==e)a[e]=s.clone(o[e]);else for(const t of o[e])s.addValue(a,e,s.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},l.mergeNodeMaps=e=>{const t=e["@default"],n=Object.keys(e).sort();for(const r of n){if("@default"===r)continue;const n=e[r];let o=t[r];o?"@graph"in o||(o["@graph"]=[]):t[r]=o={"@id":r,"@graph":[]};const s=o["@graph"];for(const e of Object.keys(n).sort()){const t=n[e];i.isSubjectReference(t)||s.push(t)}}return t}},function(e,t){e.exports=0},function(e,t,n){"use strict";const r=n(8),i=n(23),o=n(49),s=n(28),a=n(50);let l;try{l=n(51)}catch(e){}const c={};e.exports=c,c.NQuads=n(19),c.IdentifierIssuer=n(17),c._rdfCanonizeNative=function(e){return e&&(l=e),l},c.canonize=r.callbackify((async function(e,t){let n;const r=new Promise((e,t)=>{n=(n,r)=>{if(n)return t(n);e(r)}});if(Array.isArray(e)||(e=c.NQuads.legacyDatasetToQuads(e)),t.useNative){if(!l)throw new Error("rdf-canonize-native not available");l.canonize(e,t,n)}else if("URDNA2015"===t.algorithm)new i(t).main(e,n);else{if("URGNA2012"!==t.algorithm)throw"algorithm"in t?new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.");new o(t).main(e,n)}return r})),c.canonizeSync=function(e,t){if(Array.isArray(e)||(e=c.NQuads.legacyDatasetToQuads(e)),t.useNative){if(l)return l.canonizeSync(e,t);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===t.algorithm)return new s(t).main(e);if("URGNA2012"===t.algorithm)return new a(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)}},function(e,t,n){"use strict";const r=n(8);e.exports=class e{constructor(e){this.prefix=e,this.counter=0,this.existing={}}clone(){const t=new e(this.prefix);return t.counter=this.counter,t.existing=r.clone(this.existing),t}getId(e){if(e&&e in this.existing)return this.existing[e];const t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t}hasId(e){return e in this.existing}}},function(e,t,n){var r=n(12);e.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}},function(e,t,n){"use strict";const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",i="http://www.w3.org/2001/XMLSchema#string",o={};function s(e,t){for(const n in e)if(e[n].termType!==t[n].termType||e[n].value!==t[n].value)return!1;return"Literal"!==e.object.termType||e.object.datatype.termType===t.object.datatype.termType&&e.object.datatype.value===t.object.datatype.value&&e.object.language===t.object.language}o.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,o.empty=new RegExp("^[ \\t]*$"),o.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),e.exports=class e{static parse(e){const t=[],n={},a=e.split(o.eoln);let c=0;for(const e of a){if(c++,o.empty.test(e))continue;const a=e.match(o.quad);if(null===a)throw new Error("N-Quads parse error on line "+c+".");const u={};if(void 0!==a[1]?u.subject={termType:"NamedNode",value:a[1]}:u.subject={termType:"BlankNode",value:a[2]},u.predicate={termType:"NamedNode",value:a[3]},void 0!==a[4]?u.object={termType:"NamedNode",value:a[4]}:void 0!==a[5]?u.object={termType:"BlankNode",value:a[5]}:(u.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==a[7]?u.object.datatype.value=a[7]:void 0!==a[8]?(u.object.datatype.value=r,u.object.language=a[8]):u.object.datatype.value=i,u.object.value=a[6].replace(l,(function(e,t,n,r){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(n)return String.fromCharCode(parseInt(n,16));if(r)throw new Error("Unsupported U escape")}))),void 0!==a[9]?u.graph={termType:"NamedNode",value:a[9]}:void 0!==a[10]?u.graph={termType:"BlankNode",value:a[10]}:u.graph={termType:"DefaultGraph",value:""},u.graph.value in n){let e=!0;const r=n[u.graph.value];for(const t of r)if(s(t,u)){e=!1;break}e&&(r.push(u),t.push(u))}else n[u.graph.value]=[u],t.push(u)}return t}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const n=[];for(const r of t)n.push(e.serializeQuad(r));return n.sort().join("")}static serializeQuad(e){const t=e.subject,n=e.predicate,o=e.object,s=e.graph;let l="";return[t,n].forEach(e=>{"NamedNode"===e.termType?l+="<"+e.value+">":l+=e.value,l+=" "}),"NamedNode"===o.termType?l+="<"+o.value+">":"BlankNode"===o.termType?l+=o.value:(l+='"'+function(e){return e.replace(a,(function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}}))}(o.value)+'"',o.datatype.value===r?o.language&&(l+="@"+o.language):o.datatype.value!==i&&(l+="^^<"+o.datatype.value+">")),"NamedNode"===s.termType?l+=" <"+s.value+">":"BlankNode"===s.termType&&(l+=" "+s.value),l+=" .\n",l}static legacyDatasetToQuads(e){const t=[],n={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"};for(const o in e){e[o].forEach(e=>{const s={};for(const t in e){const o=e[t],a={termType:n[o.type],value:o.value};"Literal"===a.termType&&(a.datatype={termType:"NamedNode"},"datatype"in o&&(a.datatype.value=o.datatype),"language"in o?("datatype"in o||(a.datatype.value=r),a.language=o.language):"datatype"in o||(a.datatype.value=i)),s[t]=a}s.graph="@default"===o?{termType:"DefaultGraph",value:""}:{termType:o.startsWith("_:")?"BlankNode":"NamedNode",value:o},t.push(s)})}return t}};const a=/["\\\n\r]/g;const l=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},function(e,t,n){"use strict";e.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}}},function(e,t,n){const r=n(39),i=n(7),o=n(77),s="https://raw.githubusercontent.com/semantifyit/schemaorg/main/",a=s+"data/releases/",l=s+"versions.json";e.exports=class{constructor(e=null){this.graph=new r(this),this.retrievalMemory={versionsFile:null,latest:null},this.commitBase=e}async addVocabularies(e){if(i.isArray(e)||!i.isString(e)&&!i.isObject(e)||(e=[e]),!i.isArray(e))throw new Error("The first argument of the function must be an Array of vocabularies or a single vocabulary (JSON-LD as Object/String)");for(let t=0;t<e.length;t++)if(i.isString(e[t]))if(e[t].startsWith("www")||e[t].startsWith("http"))try{const n=await this.fetchVocabularyFromURL(e[t]);await this.graph.addVocabulary(n)}catch(n){throw new Error("The given URL "+e[t]+" did not contain a valid JSON-LD vocabulary.")}else try{await this.graph.addVocabulary(JSON.parse(e[t]))}catch(e){throw new Error("Parsing of vocabulary string produced an invalid JSON-LD.")}else{if(!i.isObject(e[t]))throw new Error("The first argument of the function must be an Array of vocabularies or a single vocabulary (JSON-LD as Object/String)");await this.graph.addVocabulary(e[t])}}async fetchVocabularyFromURL(e){return new Promise((function(t,n){o.get(e).then((function(e){t(e.data)})).catch((function(e){n("Could not find any resource at the given URL.")}))}))}getTerm(e,t=null){return this.graph.getTerm(e,t)}getClass(e,t=null){return this.graph.getClass(e,t)}getAllClasses(e=null){const t=this.getListOfClasses(e),n=[];for(let e=0;e<t.length;e++)try{n.push(this.getClass(t[e]))}catch(n){throw new Error("There is no class with the IRI "+t[e])}return n}getListOfClasses(e=null){return i.applyFilter(Object.keys(this.graph.classes),e,this.graph)}getProperty(e,t=null){return this.graph.getProperty(e,t)}getAllProperties(e=null){const t=this.getListOfProperties(e),n=[];for(let e=0;e<t.length;e++)try{n.push(this.getProperty(t[e]))}catch(n){throw new Error("There is no property with the IRI "+t[e])}return n}getListOfProperties(e=null){return i.applyFilter(Object.keys(this.graph.properties),e,this.graph)}getDataType(e,t=null){return this.graph.getDataType(e,t)}getAllDataTypes(e=null){const t=this.getListOfDataTypes(e),n=[];for(let e=0;e<t.length;e++)try{n.push(this.getDataType(t[e]))}catch(n){throw new Error("There is no data type with the IRI "+t[e])}return n}getListOfDataTypes(e=null){return i.applyFilter(Object.keys(this.graph.dataTypes),e,this.graph)}getEnumeration(e,t=null){return this.graph.getEnumeration(e,t)}getAllEnumerations(e=null){const t=this.getListOfEnumerations(e),n=[];for(let e=0;e<t.length;e++)try{n.push(this.getEnumeration(t[e]))}catch(n){throw new Error("There is no enumeration with the IRI "+t[e])}return n}getListOfEnumerations(e=null){return i.applyFilter(Object.keys(this.graph.enumerations),e,this.graph)}getEnumerationMember(e,t=null){return this.graph.getEnumerationMember(e,t)}getAllEnumerationMembers(e=null){const t=this.getListOfEnumerationMembers(e),n=[];for(let e=0;e<t.length;e++)try{n.push(this.getEnumerationMember(t[e]))}catch(n){throw new Error("There is no enumeration member with the IRI "+t[e])}return n}getListOfEnumerationMembers(e=null){return i.applyFilter(Object.keys(this.graph.enumerationMembers),e,this.graph)}getVocabularies(){const e=Object.keys(this.graph.context),t={},n=["soa","xsd","rdf","rdfa","rdfs","dc"];for(let r=0;r<e.length;r++)i.isString(this.graph.context[e[r]])&&-1===n.indexOf(e[r])&&(t[e[r]]=this.graph.context[e[r]]);return t}async constructSDOVocabularyURL(e="latest"){if("latest"===e)try{this.retrievalMemory.versionsFile||await this.getSDOVersionFile(),e=this.retrievalMemory.latest}catch(e){throw console.error("Could not determine/retrieve the latest version of schema.org"),e}const t=i.getFileNameForSchemaOrgVersion(e);return this.getReleasesURI()+e+"/"+t}async getSDOVersionFile(){let e;try{e=await o.get(this.getVersionFileURI())}catch(e){throw console.log("Unable to retrieve the schema.org versions file at "+this.getVersionFileURI()),e}if(e&&e.data){if(this.retrievalMemory.versionsFile=e.data,this.retrievalMemory.versionsFile.schemaversion){if(await this.checkURL(await this.constructSDOVocabularyURL(this.retrievalMemory.versionsFile.schemaversion)))this.retrievalMemory.latest=this.retrievalMemory.versionsFile.schemaversion;else{if(this.retrievalMemory.versionsFile.releaseLog){const e=i.sortReleaseEntriesByDate(this.retrievalMemory.versionsFile.releaseLog);for(const t of e)if(await this.checkURL(await this.constructSDOVocabularyURL(t[0]))){this.retrievalMemory.latest=t[0];break}}if(!this.retrievalMemory.latest){let e='Could not find any valid vocabulary file in the Schema.org versions file (to be declared as "latest".';throw console.log(e),new Error(e)}}return}let t="Schema.org versions file has an unexpected structure!";throw console.log(t+" -> "+this.getVersionFileURI()),new Error(t)}}async checkURL(e){try{return await o.head(e),!0}catch(e){return!1}}async getLatestSDOVersion(){return this.retrievalMemory.latest||await this.getSDOVersionFile(),this.retrievalMemory.latest}getReleasesURI(){return this.commitBase?"https://raw.githubusercontent.com/schemaorg/schemaorg/"+this.commitBase+"/data/releases/":a}getVersionFileURI(){return this.commitBase?"https://raw.githubusercontent.com/schemaorg/schemaorg/"+this.commitBase+"/versions.json":l}}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(41),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(11))},function(e,t,n){"use strict";const r=n(42),i=n(17),o=n(24),s=n(27),a=n(19),l=n(8),c={subject:"s",object:"o",graph:"g"};e.exports=class extends r{constructor(e){super(e=e||{}),this.name="URDNA2015",this.options=Object.assign({},e),this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new i("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e,t){const n=this;let r;n.schedule.start=Date.now(),n.quads=e;const o={};n.waterfall([t=>{n.forEach(e,(e,t,r)=>{n.forEachComponent(e,t=>{if("BlankNode"!==t.termType)return;const r=t.value;r in n.blankNodeInfo?n.blankNodeInfo[r].quads.push(e):(o[r]=!0,n.blankNodeInfo[r]={quads:[e]})}),r()},t)},e=>{let t=!0;n.whilst(()=>t,e=>{t=!1,n.hashToBlankNodes={},n.waterfall([e=>{n.forEach(o,(e,t,r)=>{n.hashFirstDegreeQuads(t,(e,i)=>{if(e)return r(e);i in n.hashToBlankNodes?n.hashToBlankNodes[i].push(t):n.hashToBlankNodes[i]=[t],r()})},e)},e=>{const r=Object.keys(n.hashToBlankNodes).sort();n.forEach(r,(e,r,i)=>{const s=n.hashToBlankNodes[e];if(s.length>1)return i();const a=s[0];n.canonicalIssuer.getId(a),delete o[a],delete n.hashToBlankNodes[e],t=!0,i()},e)}],e)},e)},e=>{const t=Object.keys(n.hashToBlankNodes).sort();n.forEach(t,(e,t,r)=>{const o=[],s=n.hashToBlankNodes[e];n.waterfall([e=>{n.forEach(s,(e,t,r)=>{if(n.canonicalIssuer.hasId(e))return r();const s=new i("_:b");s.getId(e),n.hashNDegreeQuads(e,s,(e,t)=>{if(e)return r(e);o.push(t),r()})},e)},e=>{o.sort((e,t)=>e.hash<t.hash?-1:e.hash>t.hash?1:0),n.forEach(o,(e,t,r)=>{for(const t in e.issuer.existing)n.canonicalIssuer.getId(t);r()},e)}],r)},e)},e=>{const t=[];n.waterfall([e=>{n.forEach(n.quads,(e,r,i)=>{n.forEachComponent(e,e=>{"BlankNode"!==e.termType||e.value.startsWith(n.canonicalIssuer.prefix)||(e.value=n.canonicalIssuer.getId(e.value))}),t.push(a.serializeQuad(e)),i()},e)},e=>(t.sort(),r=t.join(""),e())],e)}],e=>t(e,r))}hashFirstDegreeQuads(e,t){const n=this,r=n.blankNodeInfo[e];if("hash"in r)return t(null,r.hash);const i=[],s=r.quads;n.forEach(s,(t,r,o)=>{const s={predicate:t.predicate};n.forEachComponent(t,(t,r)=>{s[r]=n.modifyFirstDegreeComponent(e,t,r)}),i.push(a.serializeQuad(s)),o()},e=>{if(e)return t(e);i.sort();const s=new o(n.hashAlgorithm);for(let e=0;e<i.length;++e)s.update(i[e]);r.hash=s.digest(),t(null,r.hash)})}hashRelatedBlankNode(e,t,n,r,i){const s=this;let a;s.waterfall([t=>s.canonicalIssuer.hasId(e)?(a=s.canonicalIssuer.getId(e),t()):n.hasId(e)?(a=n.getId(e),t()):void s.hashFirstDegreeQuads(e,(e,n)=>{if(e)return t(e);a=n,t()})],e=>{if(e)return i(e);const n=new o(s.hashAlgorithm);return n.update(r),"g"!==r&&n.update(s.getRelatedPredicate(t)),n.update(a),i(null,n.digest())})}hashNDegreeQuads(e,t,n){const r=this;let i;const a=new o(r.hashAlgorithm);r.waterfall([n=>r.createHashToRelated(e,t,(e,t)=>{if(e)return n(e);i=t,n()}),e=>{const n=Object.keys(i).sort();r.forEach(n,(e,n,o)=>{a.update(e);let l,c="";const u=new s(i[e]);r.whilst(()=>u.hasNext(),e=>{const n=u.next();let i=t.clone(),o="";const s=[];r.waterfall([t=>{r.forEach(n,(t,n,a)=>{if(r.canonicalIssuer.hasId(t)?o+=r.canonicalIssuer.getId(t):(i.hasId(t)||s.push(t),o+=i.getId(t)),0!==c.length&&o>c)return e();a()},t)},t=>{r.forEach(s,(t,n,s)=>{r.hashNDegreeQuads(t,i,(n,r)=>n?s(n):(o+=i.getId(t),o+="<"+r.hash+">",i=r.issuer,0!==c.length&&o>c?e():void s()))},t)},e=>{(0===c.length||o<c)&&(c=o,l=i),e()}],e)},e=>{if(e)return o(e);a.update(c),t=l,o()})},e)}],e=>{n(e,{hash:a.digest(),issuer:t})})}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:((t=l.clone(t)).value=t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,t,n){const r=this,i={},o=r.blankNodeInfo[e].quads;r.forEach(o,(n,o,s)=>{r.forEach(n,(o,s,a)=>{if("predicate"===s||"BlankNode"!==o.termType||o.value===e)return a();const l=o.value,u=c[s];r.hashRelatedBlankNode(l,n,t,u,(e,t)=>{if(e)return a(e);t in i?i[t].push(l):i[t]=[l],a()})},s)},e=>n(e,i))}forEachComponent(e,t){for(const n in e)"predicate"!==n&&t(e[n],n,e)}}},function(e,t,n){"use strict";const r=n(12);n(18),n(43),n(48),e.exports=class{constructor(e){this.md=r.md[e].create()}update(e){this.md.update(e,"utf8")}digest(){return this.md.digest().toHex()}}},function(e,t,n){(function(t,r,i,o,s){var a=n(12),l=n(47),c=e.exports=a.util=a.util||{};function u(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function d(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(c.isArrayBuffer(e)||c.isArrayBufferView(e))if(void 0!==o&&e instanceof o)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof d||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if(void 0!==t&&t.nextTick&&!t.browser)return c.nextTick=t.nextTick,void(c.setImmediate="function"==typeof r?r:c.nextTick);if("function"==typeof r)return c.setImmediate=function(){return r.apply(void 0,arguments)},void(c.nextTick=function(e){return r(e)});if(c.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",n=[];c.setImmediate=function(t){n.push(t),1===n.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(t){if(t.source===window&&t.data===e){t.stopPropagation();var r=n.slice();n.length=0,r.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var i=Date.now(),o=!0,s=document.createElement("div");n=[];new MutationObserver((function(){var e=n.slice();n.length=0,e.forEach((function(e){e()}))})).observe(s,{attributes:!0});var a=c.setImmediate;c.setImmediate=function(e){Date.now()-i>15?(i=Date.now(),a(e)):(n.push(e),1===n.length&&s.setAttribute("a",o=!o))}}c.nextTick=c.setImmediate}(),c.isNodejs=void 0!==t&&t.versions&&t.versions.node,c.globalScope=c.isNodejs?i:"undefined"==typeof self?window:self,c.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},c.isArrayBufferView=function(e){return e&&c.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},c.ByteBuffer=d,c.ByteStringBuffer=d;c.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},c.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},c.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},c.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},c.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},c.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},c.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(c.encodeUtf8(e))},c.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},c.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},c.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},c.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},c.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},c.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},c.ByteStringBuffer.prototype.putInt=function(e,t){u(t);var n="";do{t-=8,n+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(n)},c.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},c.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},c.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},c.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},c.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},c.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},c.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},c.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},c.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},c.ByteStringBuffer.prototype.getInt=function(e){u(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},c.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},c.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},c.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},c.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},c.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},c.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},c.ByteStringBuffer.prototype.copy=function(){var e=c.createBuffer(this.data);return e.read=this.read,e},c.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},c.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},c.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},c.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e},c.ByteStringBuffer.prototype.toString=function(){return c.decodeUtf8(this.bytes())},c.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=c.isArrayBuffer(e),r=c.isArrayBufferView(e);if(n||r)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},c.DataBuffer.prototype.length=function(){return this.write-this.read},c.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},c.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this},c.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},c.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},c.DataBuffer.prototype.putBytes=function(e,t){if(c.isArrayBufferView(e)){var n=(r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-r.byteOffset;return this.accommodate(n),new Uint8Array(this.data.buffer,this.write).set(r),this.write+=n,this}if(c.isArrayBuffer(e)){var r=new Uint8Array(e);return this.accommodate(r.byteLength),new Uint8Array(this.data.buffer).set(r,this.write),this.write+=r.byteLength,this}if(e instanceof c.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&c.isArrayBufferView(e.data)){r=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(r.byteLength),new Uint8Array(e.data.byteLength,this.write).set(r),this.write+=r.byteLength,this}if(e instanceof c.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.base64.decode(e,i,this.write),this;if("utf8"===t&&(e=c.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=c.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},c.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},c.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},c.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},c.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},c.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},c.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},c.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},c.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},c.DataBuffer.prototype.putInt=function(e,t){u(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},c.DataBuffer.prototype.putSignedInt=function(e,t){return u(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},c.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},c.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},c.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},c.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},c.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},c.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},c.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},c.DataBuffer.prototype.getInt=function(e){u(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},c.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},c.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},c.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},c.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},c.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},c.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},c.DataBuffer.prototype.copy=function(){return new c.DataBuffer(this)},c.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},c.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},c.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},c.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e},c.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return c.binary.raw.encode(t);if("hex"===e)return c.binary.hex.encode(t);if("base64"===e)return c.binary.base64.encode(t);if("utf8"===e)return c.text.utf8.decode(t);if("utf16"===e)return c.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},c.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=c.encodeUtf8(e)),new c.ByteBuffer(e)},c.fillString=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return n},c.xorBytes=function(e,t,n){for(var r="",i="",o="",s=0,a=0;n>0;--n,++s)i=e.charCodeAt(s)^t.charCodeAt(s),a>=10&&(r+=o,o="",a=0),o+=String.fromCharCode(i),++a;return r+=o},c.hexToBytes=function(e){var t="",n=0;for(!0&e.length&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},c.bytesToHex=function(e){return c.createBuffer(e).toHex()},c.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],p="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";c.encode64=function(e,t){for(var n,r,i,o="",s="",a=0;a<e.length;)n=e.charCodeAt(a++),r=e.charCodeAt(a++),i=e.charCodeAt(a++),o+=h.charAt(n>>2),o+=h.charAt((3&n)<<4|r>>4),isNaN(r)?o+="==":(o+=h.charAt((15&r)<<2|i>>6),o+=isNaN(i)?"=":h.charAt(63&i)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+=o},c.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,n,r,i,o="",s=0;s<e.length;)t=f[e.charCodeAt(s++)-43],n=f[e.charCodeAt(s++)-43],r=f[e.charCodeAt(s++)-43],i=f[e.charCodeAt(s++)-43],o+=String.fromCharCode(t<<2|n>>4),64!==r&&(o+=String.fromCharCode((15&n)<<4|r>>2),64!==i&&(o+=String.fromCharCode((3&r)<<6|i)));return o},c.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},c.decodeUtf8=function(e){return decodeURIComponent(escape(e))},c.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:l.encode,decode:l.decode}},c.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},c.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length));for(var i=n=n||0,o=0;o<e.length;++o)r[i++]=e.charCodeAt(o);return t?i-n:r},c.binary.hex.encode=c.bytesToHex,c.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2)));var i=0,o=n=n||0;for(1&e.length&&(i=1,r[o++]=parseInt(e[0],16));i<e.length;i+=2)r[o++]=parseInt(e.substr(i,2),16);return t?o-n:r},c.binary.base64.encode=function(e,t){for(var n,r,i,o="",s="",a=0;a<e.byteLength;)n=e[a++],r=e[a++],i=e[a++],o+=h.charAt(n>>2),o+=h.charAt((3&n)<<4|r>>4),isNaN(r)?o+="==":(o+=h.charAt((15&r)<<2|i>>6),o+=isNaN(i)?"=":h.charAt(63&i)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+=o},c.binary.base64.decode=function(e,t,n){var r,i,o,s,a=t;a||(a=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var l=0,c=n=n||0;l<e.length;)r=f[e.charCodeAt(l++)-43],i=f[e.charCodeAt(l++)-43],o=f[e.charCodeAt(l++)-43],s=f[e.charCodeAt(l++)-43],a[c++]=r<<2|i>>4,64!==o&&(a[c++]=(15&i)<<4|o>>2,64!==s&&(a[c++]=(3&o)<<6|s));return t?c-n:a.subarray(0,c)},c.binary.base58.encode=function(e,t){return c.binary.baseN.encode(e,p,t)},c.binary.base58.decode=function(e,t){return c.binary.baseN.decode(e,p,t)},c.text={utf8:{},utf16:{}},c.text.utf8.encode=function(e,t,n){e=c.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length));for(var i=n=n||0,o=0;o<e.length;++o)r[i++]=e.charCodeAt(o);return t?i-n:r},c.text.utf8.decode=function(e){return c.decodeUtf8(String.fromCharCode.apply(null,e))},c.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(2*e.length));for(var i=new Uint16Array(r.buffer),o=n=n||0,s=n,a=0;a<e.length;++a)i[s++]=e.charCodeAt(a),o+=2;return t?o-n:r},c.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},c.deflate=function(e,t,n){if(t=c.decode64(e.deflate(c.encode64(t)).rval),n){var r=2;32&t.charCodeAt(1)&&(r=6),t=t.substring(r,t.length-4)}return t},c.inflate=function(e,t,n){var r=e.inflate(c.encode64(t)).rval;return null===r?null:c.decode64(r)};var y=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;if(null===n?r=e.removeItem(t):(n=c.encode64(JSON.stringify(n)),r=e.setItem(t,n)),void 0!==r&&!0!==r.rval){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},g=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(null===n.rval){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(c.decode64(n))),n},m=function(e,t,n,r){var i=g(e,t);null===i&&(i={}),i[n]=r,y(e,t,i)},v=function(e,t,n){var r=g(e,t);return null!==r&&(r=n in r?r[n]:null),r},b=function(e,t,n){var r=g(e,t);if(null!==r&&n in r){delete r[n];var i=!0;for(var o in r){i=!1;break}i&&(r=null),y(e,t,r)}},w=function(e,t){y(e,t,null)},x=function(e,t,n){var r,i=null;void 0===n&&(n=["web","flash"]);var o=!1,s=null;for(var a in n){r=n[a];try{if("flash"===r||"both"===r){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),o="flash"===r}"web"!==r&&"both"!==r||(t[0]=localStorage,i=e.apply(this,t),o=!0)}catch(e){s=e}if(o)break}if(!o)throw s;return i};c.setItem=function(e,t,n,r,i){x(m,arguments,i)},c.getItem=function(e,t,n,r){return x(v,arguments,r)},c.removeItem=function(e,t,n,r){x(b,arguments,r)},c.clearItems=function(e,t,n){x(w,arguments,n)},c.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),r=null===n?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?80!==r.port&&"http"===r.scheme?r.fullHost+=":"+r.port:443!==r.port&&"https"===r.scheme&&(r.fullHost+=":"+r.port):"http"===r.scheme?r.port=80:"https"===r.scheme&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var I=null;c.getQueryVariables=function(e){var t,n=function(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var i,o,s=n[r].indexOf("=");s>0?(i=n[r].substring(0,s),o=n[r].substring(s+1)):(i=n[r],o=null),i in t||(t[i]=[]),i in Object.prototype||null===o||t[i].push(unescape(o))}return t};return void 0===e?(null===I&&(I="undefined"!=typeof window&&window.location&&window.location.search?n(window.location.search.substring(1)):{}),t=I):t=n(e),t},c.parseFragment=function(e){var t=e,n="",r=e.indexOf("?");r>0&&(t=e.substring(0,r),n=e.substring(r+1));var i=t.split("/");return i.length>0&&""===i[0]&&i.shift(),{pathString:t,queryString:n,path:i,query:""===n?{}:c.getQueryVariables(n)}},c.makeRequest=function(e){var t=c.parseFragment(e),n={path:t.pathString,query:t.queryString,getPath:function(e){return void 0===e?t.path:t.path[e]},getQuery:function(e,n){var r;return void 0===e?r=t.query:(r=t.query[e])&&void 0!==n&&(r=r[n]),r},getQueryLast:function(e,t){var r=n.getQuery(e);return r?r[r.length-1]:t}};return n},c.makeLink=function(e,t,n){e=s.isArray(e)?e.join("/"):e;var r=s.param(t||{});return n=n||"",e+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")},c.setPath=function(e,t,n){if("object"==typeof e&&null!==e)for(var r=0,i=t.length;r<i;){var o=t[r++];if(r==i)e[o]=n;else{var s=o in e;(!s||s&&"object"!=typeof e[o]||s&&null===e[o])&&(e[o]={}),e=e[o]}}},c.getPath=function(e,t,n){for(var r=0,i=t.length,o=!0;o&&r<i&&"object"==typeof e&&null!==e;){var s=t[r++];(o=s in e)&&(e=e[s])}return o?e:n},c.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var n=0,r=t.length;n<r;){var i=t[n++];if(n==r)delete e[i];else{if(!(i in e)||"object"!=typeof e[i]||null===e[i])break;e=e[i]}}},c.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},c.format=function(e){for(var t,n,r=/%./g,i=0,o=[],s=0;t=r.exec(e);){(n=e.substring(s,r.lastIndex-2)).length>0&&o.push(n),s=r.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(e.substring(s)),o.join("")},c.formatNumber=function(e,t,n,r){var i=e,o=isNaN(t=Math.abs(t))?2:t,s=void 0===n?",":n,a=void 0===r?".":r,l=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",u=c.length>3?c.length%3:0;return l+(u?c.substr(0,u)+a:"")+c.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-c).toFixed(o).slice(2):"")},c.formatSize=function(e){return e=e>=1073741824?c.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?c.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?c.formatNumber(e/1024,0)+" KiB":c.formatNumber(e,0)+" bytes"},c.bytesFromIP=function(e){return-1!==e.indexOf(".")?c.bytesFromIPv4(e):-1!==e.indexOf(":")?c.bytesFromIPv6(e):null},c.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=c.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()},c.bytesFromIPv6=function(e){for(var t=0,n=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),r=c.createBuffer(),i=0;i<8;++i)if(e[i]&&0!==e[i].length){var o=c.hexToBytes(e[i]);o.length<2&&r.putByte(0),r.putBytes(o)}else r.fillWithByte(0,n),n=0;return r.getBytes()},c.bytesToIP=function(e){return 4===e.length?c.bytesToIPv4(e):16===e.length?c.bytesToIPv6(e):null},c.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},c.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],n=[],r=0,i=0;i<e.length;i+=2){for(var o=c.bytesToHex(e[i]+e[i+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=n[n.length-1],a=t.length;s&&a===s.end+1?(s.end=a,s.end-s.start>n[r].end-n[r].start&&(r=n.length-1)):n.push({start:a,end:a})}t.push(o)}if(n.length>0){var l=n[r];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),0===l.start&&t.unshift(""),7===l.end&&t.push(""))}return t.join(":")},c.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in c&&!e.update)return t(null,c.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return c.cores=navigator.hardwareConcurrency,t(null,c.cores);if("undefined"==typeof Worker)return c.cores=1,t(null,c.cores);if("undefined"==typeof Blob)return c.cores=2,t(null,c.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),n=t+4;Date.now()<n;);self.postMessage({st:t,et:n})}))}.toString(),")()"],{type:"application/javascript"}));!function e(r,i,o){if(0===i){var s=Math.floor(r.reduce((function(e,t){return e+t}),0)/r.length);return c.cores=Math.max(1,s),URL.revokeObjectURL(n),t(null,c.cores)}!function(e,t){for(var r=[],i=[],o=0;o<e;++o){var s=new Worker(n);s.addEventListener("message",(function(n){if(i.push(n.data),i.length===e){for(var o=0;o<e;++o)r[o].terminate();t(null,i)}})),r.push(s)}for(o=0;o<e;++o)r[o].postMessage(o)}(o,(function(t,n){r.push(function(e,t){for(var n=[],r=0;r<e;++r)for(var i=t[r],o=n[r]=[],s=0;s<e;++s)if(r!==s){var a=t[s];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s)}return n.reduce((function(e,t){return Math.max(e,t.length)}),0)}(o,n)),e(r,i-1,o)}))}([],5,16)}}).call(this,n(10),n(22).setImmediate,n(11),n(26).Buffer,n(0))},function(e,t,n){"use strict";(function(e){var r=n(44),i=n(45),o=n(46);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=a(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return N(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o,s=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var d=!0,h=0;h<l;h++)if(c(e,o+h)!==c(t,h)){d=!1;break}if(d)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return q(F(t,e.length-n),e,n,r)}function x(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function I(e,t,n,r){return x(e,t,n,r)}function S(e,t,n,r){return q(V(t),e,n,r)}function O(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,l,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=j)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=j));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n),d=0;d<a;++d)if(c[d]!==u[d]){o=c[d],s=u[d];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return I(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=J(e[o]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,o){return o||B(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function M(e,t,n,r,o){return o||B(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);_(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);_(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=l.isBuffer(e)?e:F(new l(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function J(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(11))},function(e,t,n){"use strict";e.exports=class{constructor(e){this.list=e.sort(),this.done=!1,this.left={};for(let t=0;t<e.length;++t)this.left[e[t]]=!0}hasNext(){return!this.done}next(){const e=this.list.slice();let t=null,n=0;const r=this.list.length;for(let e=0;e<r;++e){const i=this.list[e],o=this.left[i];(null===t||i>t)&&(o&&e>0&&i>this.list[e-1]||!o&&e<r-1&&i>this.list[e+1])&&(t=i,n=e)}if(null===t)this.done=!0;else{const e=this.left[t]?n-1:n+1;this.list[n]=this.list[e],this.list[e]=t;for(let e=0;e<r;++e)this.list[e]>t&&(this.left[this.list[e]]=!this.left[this.list[e]])}return e}}},function(e,t,n){"use strict";const r=n(17),i=n(24),o=n(27),s=n(19),a=n(8),l={subject:"s",object:"o",graph:"g"};e.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new r("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e){const t=this;t.quads=e;const n={};for(const r of e)t.forEachComponent(r,e=>{if("BlankNode"!==e.termType)return;const i=e.value;i in t.blankNodeInfo?t.blankNodeInfo[i].quads.push(r):(n[i]=!0,t.blankNodeInfo[i]={quads:[r]})});let i=!0;for(;i;){i=!1,t.hashToBlankNodes={};for(const e in n){const n=t.hashFirstDegreeQuads(e);n in t.hashToBlankNodes?t.hashToBlankNodes[n].push(e):t.hashToBlankNodes[n]=[e]}const e=Object.keys(t.hashToBlankNodes).sort();for(let r=0;r<e.length;++r){const o=e[r],s=t.hashToBlankNodes[o];if(s.length>1)continue;const a=s[0];t.canonicalIssuer.getId(a),delete n[a],delete t.hashToBlankNodes[o],i=!0}}const o=Object.keys(t.hashToBlankNodes).sort();for(let e=0;e<o.length;++e){const n=[],i=o[e],s=t.hashToBlankNodes[i];for(let e=0;e<s.length;++e){const i=s[e];if(t.canonicalIssuer.hasId(i))continue;const o=new r("_:b");o.getId(i);const a=t.hashNDegreeQuads(i,o);n.push(a)}n.sort((e,t)=>e.hash<t.hash?-1:e.hash>t.hash?1:0);for(let e=0;e<n.length;++e){const r=n[e];for(const e in r.issuer.existing)t.canonicalIssuer.getId(e)}}const a=[];for(let e=0;e<t.quads.length;++e){const n=t.quads[e];t.forEachComponent(n,e=>{"BlankNode"!==e.termType||e.value.startsWith(t.canonicalIssuer.prefix)||(e.value=t.canonicalIssuer.getId(e.value))}),a.push(s.serializeQuad(n))}return a.sort(),a.join("")}hashFirstDegreeQuads(e){const t=this,n=t.blankNodeInfo[e];if("hash"in n)return n.hash;const r=[],o=n.quads;for(let n=0;n<o.length;++n){const i=o[n],a={predicate:i.predicate};t.forEachComponent(i,(n,r)=>{a[r]=t.modifyFirstDegreeComponent(e,n,r)}),r.push(s.serializeQuad(a))}r.sort();const a=new i(t.hashAlgorithm);for(let e=0;e<r.length;++e)a.update(r[e]);return n.hash=a.digest(),n.hash}hashRelatedBlankNode(e,t,n,r){const o=this;let s;s=o.canonicalIssuer.hasId(e)?o.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):o.hashFirstDegreeQuads(e);const a=new i(o.hashAlgorithm);return a.update(r),"g"!==r&&a.update(o.getRelatedPredicate(t)),a.update(s),a.digest()}hashNDegreeQuads(e,t){const n=this,r=new i(n.hashAlgorithm),s=n.createHashToRelated(e,t),a=Object.keys(s).sort();for(let e=0;e<a.length;++e){const i=a[e];r.update(i);let l,c="";const u=new o(s[i]);for(;u.hasNext();){const e=u.next();let r=t.clone(),i="";const o=[];let s=!1;for(let t=0;t<e.length;++t){const a=e[t];if(n.canonicalIssuer.hasId(a)?i+=n.canonicalIssuer.getId(a):(r.hasId(a)||o.push(a),i+=r.getId(a)),0!==c.length&&i>c){s=!0;break}}if(!s){for(let e=0;e<o.length;++e){const t=o[e],a=n.hashNDegreeQuads(t,r);if(i+=r.getId(t),i+="<"+a.hash+">",r=a.issuer,0!==c.length&&i>c){s=!0;break}}s||(0===c.length||i<c)&&(c=i,l=r)}}r.update(c),t=l}return{hash:r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:((t=a.clone(t)).value=t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,t){const n=this,r={},i=n.blankNodeInfo[e].quads;for(let o=0;o<i.length;++o){const s=i[o];for(const i in s){const o=s[i];if("predicate"===i||"BlankNode"!==o.termType||o.value===e)continue;const a=o.value,c=l[i],u=n.hashRelatedBlankNode(a,s,t,c);u in r?r[u].push(a):r[u]=[a]}}return r}forEachComponent(e,t){for(const n in e)"predicate"!==n&&t(e[n],n,e)}}},function(e,t,n){"use strict";const r=n(54),i=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),u=Symbol("noDisposeOnSet"),d=Symbol("lruList"),h=Symbol("cache"),f=Symbol("updateAgeOnGet"),p=()=>1;const y=(e,t,n)=>{const r=e[h].get(t);if(r){const t=r.value;if(g(e,t)){if(v(e,r),!e[a])return}else n&&(e[f]&&(r.value.now=Date.now()),e[d].unshiftNode(r));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},m=e=>{if(e[o]>e[i])for(let t=e[d].tail;e[o]>e[i]&&null!==t;){const n=t.prev;v(e,t),t=n}},v=(e,t)=>{if(t){const n=t.value;e[c]&&e[c](n.key,n.value),e[o]-=n.length,e[h].delete(n.key),e[d].removeNode(t)}};class b{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const w=(e,t,n,r)=>{let i=n.value;g(e,i)&&(v(e,n),e[a]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||p;if(this[s]="function"!=typeof t?p:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[c]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,m(this)}get max(){return this[i]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,m(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[s]&&(this[s]=e,this[o]=0,this[d].forEach(e=>{e.length=this[s](e.value,e.key),this[o]+=e.length})),m(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let n=this[d].tail;null!==n;){const r=n.prev;w(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[d].head;null!==n;){const r=n.next;w(this,e,n,t),n=r}}keys(){return this[d].toArray().map(e=>e.key)}values(){return this[d].toArray().map(e=>e.value)}reset(){this[c]&&this[d]&&this[d].length&&this[d].forEach(e=>this[c](e.key,e.value)),this[h]=new Map,this[d]=new r,this[o]=0}dump(){return this[d].map(e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[d]}set(e,t,n){if((n=n||this[l])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,a=this[s](t,e);if(this[h].has(e)){if(a>this[i])return v(this,this[h].get(e)),!1;const s=this[h].get(e).value;return this[c]&&(this[u]||this[c](e,s.value)),s.now=r,s.maxAge=n,s.value=t,this[o]+=a-s.length,s.length=a,this.get(e),m(this),!0}const f=new b(e,t,a,r,n);return f.length>this[i]?(this[c]&&this[c](e,t),!1):(this[o]+=f.length,this[d].unshift(f),this[h].set(e,this[d].head),m(this),!0)}has(e){if(!this[h].has(e))return!1;const t=this[h].get(e).value;return!g(this,t)}get(e){return y(this,e,!0)}peek(e){return y(this,e,!1)}pop(){const e=this[d].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[h].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[h].forEach((e,t)=>y(this,t,!1))}}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(1);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(1),i=n(83),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,l={adapter:("undefined"!=typeof XMLHttpRequest?a=n(34):void 0!==t&&"[object process]"===Object.prototype.toString.call(t)&&(a=n(34)),a),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(o)})),e.exports=l}).call(this,n(10))},function(e,t,n){"use strict";var r=n(1),i=n(84),o=n(31),s=n(86),a=n(89),l=n(90),c=n(35);e.exports=function(e){return new Promise((function(t,u){var d=e.data,h=e.headers;r.isFormData(d)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",y=e.auth.password||"";h.Authorization="Basic "+btoa(p+":"+y)}var g=s(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};i(t,u,r),f=null}},f.onabort=function(){f&&(u(c("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){u(c("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(c(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var m=n(91),v=(e.withCredentials||l(g))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}if("setRequestHeader"in f&&r.forEach(h,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),u(e),f=null)})),void 0===d&&(d=null),f.send(d)}))}},function(e,t,n){"use strict";var r=n(85);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var a=i.concat(o).concat(s),l=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return r.forEach(l,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t){e.exports=moment},function(e,t,n){const r=n(7),i=n(71),o=n(72),s=n(73),a=n(74),l=n(75),c=n(76);e.exports=class{constructor(e){this.sdoAdapter=e,this.reasoner=new c(this),this.context={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",dc:"http://purl.org/dc/terms/",schema:"http://schema.org/",soa:"http://schema-org-adapter.at/vocabTerms/","soa:superClassOf":{"@id":"soa:superClassOf","@type":"@id"},"soa:superPropertyOf":{"@id":"soa:superPropertyOf","@type":"@id"},"soa:hasProperty":{"@id":"soa:hasProperty","@type":"@id"},"soa:isRangeOf":{"@id":"soa:isRangeOf","@type":"@id"},"soa:hasEnumerationMember":{"@id":"soa:hasEnumerationMember","@type":"@id"},"soa:enumerationDomainIncludes":{"@id":"soa:enumerationDomainIncludes","@type":"@id"},"rdfs:subClassOf":{"@id":"rdfs:subClassOf","@type":"@id"},"rdfs:subPropertyOf":{"@id":"rdfs:subPropertyOf","@type":"@id"},"schema:isPartOf":{"@id":"schema:isPartOf","@type":"@id"},"schema:domainIncludes":{"@id":"schema:domainIncludes","@type":"@id"},"schema:rangeIncludes":{"@id":"schema:rangeIncludes","@type":"@id"},"schema:supersededBy":{"@id":"schema:supersededBy","@type":"@id"},"schema:inverseOf":{"@id":"schema:inverseOf","@type":"@id"},"dc:source":{"@id":"dc:source","@type":"@id"},"schema:source":{"@id":"schema:source","@type":"@id"}},this.classes={},this.properties={},this.dataTypes={},this.enumerations={},this.enumerationMembers={}}async addVocabulary(e){try{this.context=r.generateContext(this.context,e["@context"]),e=await r.preProcessVocab(e,this.context);const t=this.sdoAdapter.getVocabularies();for(let n of e["@graph"])n=r.curateVocabNode(n,t);for(let t=0;t<e["@graph"].length;t++){const n=JSON.parse(JSON.stringify(e["@graph"][t]));if(r.isString(n["@type"]))switch(n["@type"]){case"rdfs:Class":this.addGraphNode(this.classes,n);break;case"rdf:Property":this.addGraphNode(this.properties,n);break;default:this.addGraphNode(this.enumerationMembers,n)}else r.isArray(n["@type"])?n["@type"].includes("rdfs:Class")&&n["@type"].includes("schema:DataType")?this.addGraphNode(this.dataTypes,n):this.addGraphNode(this.enumerationMembers,n):(console.log("unexpected @type format for the following node:"),console.log(JSON.stringify(n,null,2)))}let n,i;do{n=!1;const e=Object.keys(this.classes),t=Object.keys(this.enumerations);for(const r of e)if(void 0!==this.classes[r]["rdfs:subClassOf"]){const e=this.classes[r]["rdfs:subClassOf"];for(const i of e)("schema:Enumeration"===i||t.includes(i))&&this.classes[r]&&!this.enumerations[r]&&(n=!0,this.enumerations[r]=JSON.parse(JSON.stringify(this.classes[r])),delete this.classes[r])}}while(n);do{i=!1;const e=Object.keys(this.classes),t=Object.keys(this.dataTypes);for(const n of e)if(void 0!==this.classes[n]["rdfs:subClassOf"]){const e=this.classes[n]["rdfs:subClassOf"];for(const r of e)("schema:DataType"===r||t.includes(r))&&this.classes[n]&&!this.dataTypes[n]&&(i=!0,this.dataTypes[n]=JSON.parse(JSON.stringify(this.classes[n])),delete this.classes[n])}}while(i);const o=Object.keys(this.dataTypes);for(const e of o)this.dataTypes[e]["@type"]="schema:DataType";let s=Object.keys(this.classes);for(const e of s){const t=this.classes[e]["rdfs:subClassOf"];this.classes[e]["soa:superClassOf"]||(this.classes[e]["soa:superClassOf"]=[]);for(const n of t){let t=this.classes[n];t||(t=this.enumerations[n]),t&&(t["soa:superClassOf"]?t["soa:superClassOf"].includes(e)||t["soa:superClassOf"].push(e):t["soa:superClassOf"]=[e])}}let a=Object.keys(this.enumerations);for(const e of a){const t=this.enumerations[e]["rdfs:subClassOf"];this.enumerations[e]["soa:superClassOf"]||(this.enumerations[e]["soa:superClassOf"]=[]);for(const n of t){let t=this.classes[n];t||(t=this.enumerations[n]),t&&(t["soa:superClassOf"]?t["soa:superClassOf"].includes(e)||t["soa:superClassOf"].push(e):t["soa:superClassOf"]=[e])}}const l=Object.keys(this.dataTypes);for(const e of l){const t=this.dataTypes[e]["rdfs:subClassOf"];if(this.dataTypes[e]["soa:superClassOf"]||(this.dataTypes[e]["soa:superClassOf"]=[]),t)for(const n of t){const t=this.dataTypes[n];t&&(t["soa:superClassOf"]?t["soa:superClassOf"].includes(e)||t["soa:superClassOf"].push(e):t["soa:superClassOf"]=[e])}else this.dataTypes[e]["rdfs:subClassOf"]=[]}let c=Object.keys(this.properties);for(const e of c){const t=this.properties[e]["rdfs:subPropertyOf"];if(this.properties[e]["soa:superPropertyOf"]||(this.properties[e]["soa:superPropertyOf"]=[]),t)for(const n of t){const t=this.properties[n];t&&(t["soa:superPropertyOf"]?t["soa:superPropertyOf"].includes(e)||t["soa:superPropertyOf"].push(e):t["soa:superPropertyOf"]=[e])}else this.properties[e]["rdfs:subPropertyOf"]=[]}s=Object.keys(this.classes);for(const e of s)this.classes[e]["soa:hasProperty"]||(this.classes[e]["soa:hasProperty"]=[]),this.classes[e]["soa:isRangeOf"]||(this.classes[e]["soa:isRangeOf"]=[]);a=Object.keys(this.enumerations);for(const e of a)this.enumerations[e]["soa:hasEnumerationMember"]||(this.enumerations[e]["soa:hasEnumerationMember"]=[]),this.enumerations[e]["soa:isRangeOf"]||(this.enumerations[e]["soa:isRangeOf"]=[]),this.enumerations[e]["soa:hasProperty"]||(this.enumerations[e]["soa:hasProperty"]=[]);let u=Object.keys(this.enumerationMembers);for(const e of u)this.enumerationMembers[e]["soa:enumerationDomainIncludes"]||(this.enumerationMembers[e]["soa:enumerationDomainIncludes"]=[]);c=Object.keys(this.properties);for(const e of c){const t=this.properties[e]["schema:domainIncludes"];if(r.isArray(t))for(const n of t){let t=this.classes[n];t||(t=this.enumerations[n]),t&&r.isArray(t["soa:hasProperty"])&&!t["soa:hasProperty"].includes(e)&&t["soa:hasProperty"].push(e)}const n=this.properties[e]["schema:rangeIncludes"];if(r.isArray(n))for(const t of n){let n=this.classes[t];n||(n=this.enumerations[t]),n&&r.isArray(n["soa:isRangeOf"])&&!n["soa:isRangeOf"].includes(e)&&n["soa:isRangeOf"].push(e)}}u=Object.keys(this.enumerationMembers);for(const e of u){const t=this.enumerationMembers[e];let n=t["@type"];r.isArray(n)||(n=[n]);for(const i of n){const n=this.enumerations[i];n&&r.isArray(n["soa:hasEnumerationMember"])&&!n["soa:hasEnumerationMember"].includes(e)&&(n["soa:hasEnumerationMember"].push(e),r.isArray(t["soa:enumerationDomainIncludes"])?t["soa:enumerationDomainIncludes"].push(i):t["soa:enumerationDomainIncludes"]=[i])}}return!0}catch(e){return console.log(e),!1}}addGraphNode(e,t){try{if(e[t["@id"]]){const n=e[t["@id"]];if(r.isNil(t["schema:isPartOf"])||(n["schema:isPartOf"]=t["schema:isPartOf"]),r.isNil(t["dc:source"])||(n["dc:source"]=t["dc:source"]),r.isNil(t["schema:source"])||(n["schema:source"]=t["schema:source"]),r.isNil(t["schema:category"])||(n["schema:category"]=t["schema:category"]),r.isNil(t["schema:supersededBy"])||(n["schema:supersededBy"]=t["schema:supersededBy"]),!r.isNil(t["rdfs:label"])){const e=Object.keys(t["rdfs:label"]);for(const r of e)n["rdfs:label"][r]=t["rdfs:label"][r]}if(!r.isNil(t["rdfs:comment"])){const e=Object.keys(t["rdfs:comment"]);for(const r of e)n["rdfs:comment"][r]=t["rdfs:comment"][r]}if(!r.isNil(t["rdfs:subClassOf"]))for(const e of t["rdfs:subClassOf"])n["rdfs:subClassOf"].includes(e)||n["rdfs:subClassOf"].push(e);if(!r.isNil(t["soa:superClassOf"]))for(const e of t["soa:superClassOf"])n["soa:superClassOf"].includes(e)||n["soa:superClassOf"].push(e);if(!r.isNil(t["soa:hasProperty"]))for(const e of t["soa:hasProperty"])n["soa:hasProperty"].includes(e)||n["soa:hasProperty"].push(e);if(!r.isNil(t["soa:isRangeOf"]))for(const e of t["soa:isRangeOf"])n["soa:isRangeOf"].includes(e)||n["soa:isRangeOf"].push(e);if(!r.isNil(t["soa:enumerationDomainIncludes"]))for(const e of t["soa:enumerationDomainIncludes"])n["soa:enumerationDomainIncludes"].includes(e)||n["soa:enumerationDomainIncludes"].push(e);if(!r.isNil(t["soa:hasEnumerationMember"]))for(const e of t["soa:hasEnumerationMember"])n["soa:hasEnumerationMember"].includes(e)||n["soa:hasEnumerationMember"].push(e);if(!r.isNil(t["rdfs:subPropertyOf"]))for(const e of t["rdfs:subPropertyOf"])n["rdfs:subPropertyOf"].includes(e)||n["rdfs:subPropertyOf"].push(e);if(!r.isNil(t["schema:domainIncludes"]))for(const e of t["schema:domainIncludes"])n["schema:domainIncludes"].includes(e)||n["schema:domainIncludes"].push(e);if(!r.isNil(t["schema:rangeIncludes"]))for(const e of t["schema:rangeIncludes"])n["schema:rangeIncludes"].includes(e)||n["schema:rangeIncludes"].push(e);if(!r.isNil(t["schema:superPropertyOf"]))for(const e of t["schema:superPropertyOf"])n["schema:superPropertyOf"].includes(e)||n["schema:superPropertyOf"].push(e)}else e[t["@id"]]=t;return!0}catch(e){return console.log(e),!1}}getTerm(e,t=null){const n=this.discoverCompactIRI(e);let c,u,d=0;do{switch(d){case 0:c=this.classes[n],u="Class";break;case 1:c=this.properties[n],u="Property";break;case 2:c=this.dataTypes[n],u="DataType";break;case 3:c=this.enumerations[n],u="Enumeration";break;case 4:c=this.enumerationMembers[n],u="EnumerationMember"}d++}while(!c&&d<6);if(!c)throw new Error("There is no term with the IRI "+e);if(c=r.applyFilter([c["@id"]],t,this),0===c.length)throw new Error("There is no term with that IRI and filter settings.");switch(u){case"Class":return new i(n,this);case"Property":return new o(n,this);case"Enumeration":return new s(n,this);case"EnumerationMember":return new a(n,this);case"DataType":return new l(n,this)}}getClass(e,t=null){const n=this.discoverCompactIRI(e);if(n){let e=this.classes[n];if(e){if(e=r.applyFilter([n],t,this),0===e.length)throw new Error("There is no class with that IRI and filter settings.");return new i(n,this)}if(e=this.enumerations[n],e)try{return this.getEnumeration(n,t)}catch(e){throw new Error("There is no class with that IRI and filter settings.")}}throw new Error("There is no class with the IRI "+e)}getProperty(e,t=null){const n=this.discoverCompactIRI(e);if(n){let e=this.properties[n];if(e){if(e=r.applyFilter([n],t,this),0===e.length)throw new Error("There is no property with that URI and filter settings.");return new o(n,this)}}throw new Error("There is no property with that URI.")}getDataType(e,t=null){const n=this.discoverCompactIRI(e);if(n){let e=this.dataTypes[n];if(e){if(e=r.applyFilter([n],t,this),0===e.length)throw new Error("There is no data-type with that IRI and filter settings.");return new l(n,this)}}throw new Error("There is no data-type with the IRI "+e)}getEnumeration(e,t=null){const n=this.discoverCompactIRI(e);if(n){let e=this.enumerations[n];if(e){if(e=r.applyFilter([n],t,this),0===e.length)throw new Error("There is no enumeration with that IRI and filter settings.");return new s(n,this)}}throw new Error("There is no enumeration with the IRI "+e)}getEnumerationMember(e,t=null){const n=this.discoverCompactIRI(e);if(n){let e=this.enumerationMembers[n];if(e){if(e=r.applyFilter([n],t,this),0===e.length)throw new Error("There is no EnumerationMember with that IRI and filter settings.");return new a(n,this)}}throw new Error("There is no EnumerationMember with the IRI "+e)}discoverCompactIRI(e){if(-1!==e.indexOf(":")){const t=Object.keys(this.context);for(const n of t){const t=this.context[n];if(r.isString(t)){if(e.startsWith(n))return e;if(e.startsWith(t))return r.toCompactIRI(e,this.context)}}}else{const t=Object.keys(this.classes);for(const n of t)if(!0===this.containsLabel(this.classes[n],e))return n;const n=Object.keys(this.properties);for(const t of n)if(!0===this.containsLabel(this.properties[t],e))return t;const r=Object.keys(this.dataTypes);for(const t of r)if(!0===this.containsLabel(this.dataTypes[t],e))return t;const i=Object.keys(this.enumerations);for(const t of i)if(!0===this.containsLabel(this.enumerations[t],e))return t;const o=Object.keys(this.enumerationMembers);for(const t of o)if(!0===this.containsLabel(this.enumerationMembers[t],e))return t}return null}containsLabel(e,t){if(e&&r.isObject(e["rdfs:label"])){const n=Object.keys(e["rdfs:label"]);for(const r of n)if(e["rdfs:label"][r]===t)return!0}return!1}}},function(e,t,n){(function(t,r){const i=n(16),o=n(2),s=n(52),a=o.IdentifierIssuer,l=n(4),c=n(29),u=n(56),d=n(57),{expand:h}=n(59),{flatten:f}=n(60),{fromRDF:p}=n(61),{toRDF:y}=n(62),{frameMergedOrDefault:g,cleanupNull:m}=n(64),{isArray:v,isObject:b,isString:w}=n(3),{isSubjectReference:x}=n(5),{expandIri:I,getInitialContext:S,process:O,processingMode:A}=n(9),{compact:C,compactIri:j}=n(65),{createNodeMap:N,createMergedNodeMap:E,mergeNodeMaps:T}=n(14),R=void 0!==t&&t.versions&&t.versions.node,k=!R&&("undefined"!=typeof window||"undefined"!=typeof self),_=function(e){const t={},_=new c({max:100});function D(t,{documentLoader:n=e.documentLoader,...r}){return Object.assign({},{documentLoader:n},r,t)}return(e.compact=async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===n)throw new l("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let i;(r=D(r,{base:w(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new a("_:b"),contextResolver:new s({sharedCache:_})})).link&&(r.skipExpansion=!0),r.compactToRelative||delete r.base,i=r.skipExpansion?t:await e.expand(t,r);const c=await e.processContext(S(r),n,r);let u=await C({activeCtx:c,element:i,options:r,compactionMap:r.compactionMap});r.compactArrays&&!r.graph&&v(u)?1===u.length?u=u[0]:0===u.length&&(u={}):r.graph&&b(u)&&(u=[u]),b(n)&&"@context"in n&&(n=n["@context"]),n=o.clone(n),v(n)||(n=[n]);const d=n;n=[];for(let e=0;e<d.length;++e)(!b(d[e])||Object.keys(d[e]).length>0)&&n.push(d[e]);const h=n.length>0;if(1===n.length&&(n=n[0]),v(u)){const e=j({activeCtx:c,iri:"@graph",relativeTo:{vocab:!0}}),t=u;u={},h&&(u["@context"]=n),u[e]=t}else if(b(u)&&h){const e=u;u={"@context":n};for(const t in e)u[t]=e[t]}return u},e.expand=async function(t,n){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(n=D(n,{keepFreeFloatingNodes:!1,contextResolver:new s({sharedCache:_})})).expansionMap&&(n.expansionMap=void 0);const r={},i=[];if("expandContext"in n){const e=o.clone(n.expandContext);b(e)&&"@context"in e?r.expandContext=e:r.expandContext={"@context":e},i.push(r.expandContext)}let a;if(w(t)){const o=await e.get(t,n);a=o.documentUrl,r.input=o.document,o.contextUrl&&(r.remoteContext={"@context":o.contextUrl},i.push(r.remoteContext))}else r.input=o.clone(t);"base"in n||(n.base=a||"");let l=S(n);for(const e of i)l=await O({activeCtx:l,localCtx:e,options:n});let c=await h({activeCtx:l,element:r.input,options:n,expansionMap:n.expansionMap});return b(c)&&"@graph"in c&&1===Object.keys(c).length?c=c["@graph"]:null===c&&(c=[]),v(c)||(c=[c]),c},e.flatten=async function(t,n,r){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");n="function"==typeof n?null:n||null,r=D(r,{base:w(t)?t:"",contextResolver:new s({sharedCache:_})});const i=await e.expand(t,r),o=f(i);if(null===n)return o;r.graph=!0,r.skipExpansion=!0;const a=await e.compact(o,n,r);return a},e.frame=async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(r=D(r,{base:w(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new s({sharedCache:_})}),w(n)){const t=await e.get(n,r);if(n=t.document,t.contextUrl){let e=n["@context"];e?v(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,n["@context"]=e}}const i=n&&n["@context"]||{},o=await e.processContext(S(r),i,r);r.hasOwnProperty("omitGraph")||(r.omitGraph=A(o,1.1)),r.hasOwnProperty("pruneBlankNodeIdentifiers")||(r.pruneBlankNodeIdentifiers=A(o,1.1));const a=await e.expand(t,r),l={...r};l.isFrame=!0,l.keepFreeFloatingNodes=!0;const c=await e.expand(n,l),u=Object.keys(n).map(e=>I(o,e,{vocab:!0}));l.merged=!u.includes("@graph"),l.is11=A(o,1.1);const d=g(a,c,l);l.graph=!r.omitGraph,l.skipExpansion=!0,l.link={},l.framing=!0;let h=await e.compact(d,i,l);return l.link={},h=m(h,l),h},e.link=async function(t,n,r){const i={};return n&&(i["@context"]=n),i["@embed"]="@link",e.frame(t,i,r)},e.normalize=e.canonize=async function(t,n){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(n=D(n,{base:w(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new s({sharedCache:_})}))){if("application/n-quads"!==n.inputFormat&&"application/nquads"!==n.inputFormat)throw new l("Unknown canonicalization input format.","jsonld.CanonizeError");const e=u.parse(t);return i.canonize(e,n)}const r={...n};delete r.format,r.produceGeneralizedRdf=!1;const o=await e.toRDF(t,r);return i.canonize(o,n)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=D(n,{format:w(e)?"application/n-quads":void 0});const{format:r}=n;let{rdfParser:i}=n;if(r){if(i=i||t[r],!i)throw new l("Unknown input format.","jsonld.UnknownFormat",{format:r})}else i=()=>e;const o=await i(e);return p(o,n)},e.toRDF=async function(t,n){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let r;r=(n=D(n,{base:w(t)?t:"",skipExpansion:!1,contextResolver:new s({sharedCache:_})})).skipExpansion?t:await e.expand(t,n);const i=y(r,n);if(n.format){if("application/n-quads"===n.format||"application/nquads"===n.format)return await u.serialize(i);throw new l("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}return i},e.createNodeMap=async function(t,n){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");n=D(n,{base:w(t)?t:"",contextResolver:new s({sharedCache:_})});const r=await e.expand(t,n);return E(r,n)},e.merge=async function(t,n,r){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!v(t))throw new TypeError('Could not merge, "docs" must be an array.');n="function"==typeof n?null:n||null,r=D(r,{contextResolver:new s({sharedCache:_})});const i=await Promise.all(t.map(t=>{const n={...r};return e.expand(t,n)}));let l=!0;"mergeNodes"in r&&(l=r.mergeNodes);const c=r.issuer||new a("_:b"),u={"@default":{}};for(let e=0;e<i.length;++e){const t=o.relabelBlankNodes(i[e],{issuer:new a("_:b"+e+"-")}),n=l||0===e?u:{"@default":{}};if(N(t,n,"@default",c),n!==u)for(const e in n){const t=n[e];if(!(e in u)){u[e]=t;continue}const r=u[e];for(const e in t)e in r||(r[e]=t[e])}}const d=T(u),h=[],f=Object.keys(d).sort();for(let e=0;e<f.length;++e){const t=d[f[e]];x(t)||h.push(t)}if(null===n)return h;r.graph=!0,r.skipExpansion=!0;const p=await e.compact(h,n,r);return p},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=async e=>{throw new l("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})},e.get=async function(t,n){let r;r="function"==typeof n.documentLoader?n.documentLoader:e.documentLoader;const i=await r(t);try{if(!i.document)throw new l("No remote document found at the given URL.","jsonld.NullRemoteDocument");w(i.document)&&(i.document=JSON.parse(i.document))}catch(e){throw new l("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:i})}return i},e.processContext=async function(e,t,n){return n=D(n,{base:"",contextResolver:new s({sharedCache:_})}),null===t?S(n):(t=o.clone(t),b(t)&&"@context"in t||(t={"@context":t}),O({activeCtx:e,localCtx:t,options:n}))},e.getContextValue=n(9).getContextValue,e.documentLoaders={},e.documentLoaders.node=n(66),e.documentLoaders.xhr=n(69),e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new l('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",u.parse),e.registerRDFParser("application/nquads",u.parse),e.registerRDFParser("rdfa-api",d.parse),e.url=n(6),e.util=o,Object.assign(e,o),e.promises=e,e.RequestQueue=n(20),e.JsonLdProcessor=n(70)(e),k&&void 0===r.JsonLdProcessor&&Object.defineProperty(r,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),R?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e)},D=function(){return _((function(){return D()}))};_(D),e.exports=D}).call(this,n(10),n(11))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,s,a,l=1,c={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[l]=i,r(l),l++},h.clearImmediate=f}function f(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(11),n(10))},function(e,t,n){"use strict";const r=n(8);e.exports=class{constructor({maxCallStackDepth:e=500,maxTotalCallStackDepth:t=4294967295,timeSlice:n=10}={}){this.schedule={},this.schedule.MAX_DEPTH=e,this.schedule.MAX_TOTAL_DEPTH=t,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice=n}doWork(e,t){const n=this.schedule;if(n.totalDepth>=n.MAX_TOTAL_DEPTH)return t(new Error("Maximum total call stack depth exceeded; canonicalization aborting."));!function i(){if(n.depth===n.MAX_DEPTH)return n.depth=0,n.running=!1,r.nextTick(i);const o=Date.now();if(n.running||(n.start=Date.now(),n.deadline=n.start+n.timeSlice),o<n.deadline)return n.running=!0,n.depth++,n.totalDepth++,e((e,r)=>{n.depth--,n.totalDepth--,t(e,r)});n.depth=0,n.running=!1,r.setImmediate(i)}()}forEach(e,t,n){const r=this;let i,o,s=0;if(Array.isArray(e))o=e.length,i=()=>s!==o&&(i.value=e[s++],i.key=s,!0);else{const t=Object.keys(e);o=t.length,i=()=>s!==o&&(i.key=t[s++],i.value=e[i.key],!0)}!function e(o){return o?n(o):i()?r.doWork(()=>t(i.value,i.key,e)):void n()}()}waterfall(e,t){const n=this;n.forEach(e,(e,t,r)=>n.doWork(e,r),t)}whilst(e,t,n){const r=this;!function i(o){return o?n(o):e()?void r.doWork(t,i):n()}()}}},function(e,t,n){var r=n(12);n(18),n(25);var i=e.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=i,i.create=function(){s||(o=String.fromCharCode(128),o+=r.util.fillString(String.fromCharCode(0),64),s=!0);var e=null,t=r.util.createBuffer(),n=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,o=0;o<n;++o)i.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=r.util.encodeUtf8(o));var l=o.length;i.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=l[1],l[1]=l[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,l[0]=l[1]/4294967296>>>0;return t.putBytes(o),a(e,n,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var s=r.util.createBuffer();s.putBytes(t.bytes());var l,c=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-c));for(var u=8*i.fullMessageLength[0],d=0;d<i.fullMessageLength.length-1;++d)u+=(l=8*i.fullMessageLength[d+1])/4294967296>>>0,s.putInt32(u>>>0),u=l>>>0;s.putInt32(u);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(h,n,s);var f=r.util.createBuffer();return f.putInt32(h.h0),f.putInt32(h.h1),f.putInt32(h.h2),f.putInt32(h.h3),f.putInt32(h.h4),f},i};var o=null,s=!1;function a(e,t,n){for(var r,i,o,s,a,l,c,u=n.length();u>=64;){for(i=e.h0,o=e.h1,s=e.h2,a=e.h3,l=e.h4,c=0;c<16;++c)r=n.getInt32(),t[c]=r,r=(i<<5|i>>>27)+(a^o&(s^a))+l+1518500249+r,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;c<20;++c)r=(r=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|r>>>31,t[c]=r,r=(i<<5|i>>>27)+(a^o&(s^a))+l+1518500249+r,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;c<32;++c)r=(r=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|r>>>31,t[c]=r,r=(i<<5|i>>>27)+(o^s^a)+l+1859775393+r,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;c<40;++c)r=(r=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|r>>>30,t[c]=r,r=(i<<5|i>>>27)+(o^s^a)+l+1859775393+r,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;c<60;++c)r=(r=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|r>>>30,t[c]=r,r=(i<<5|i>>>27)+(o&s|a&(o^s))+l+2400959708+r,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;for(;c<80;++c)r=(r=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|r>>>30,t[c]=r,r=(i<<5|i>>>27)+(o^s^a)+l+3395469782+r,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=r;e.h0=e.h0+i|0,e.h1=e.h1+o|0,e.h2=e.h2+s|0,e.h3=e.h3+a|0,e.h4=e.h4+l|0,u-=64}}},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],a=r[1],l=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),u=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[u++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(u(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*y}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){var n={};e.exports=n;var r={};n.encode=function(e,t,n){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==n&&"number"!=typeof n)throw new TypeError('"maxline" must be a number.');var r="";if(e instanceof Uint8Array){var i=0,o=t.length,s=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var l=0,c=e[i];l<a.length;++l)c+=a[l]<<8,a[l]=c%o,c=c/o|0;for(;c>0;)a.push(c%o),c=c/o|0}for(i=0;0===e[i]&&i<e.length-1;++i)r+=s;for(i=a.length-1;i>=0;--i)r+=t[a[i]]}else r=function(e,t){var n=0,r=t.length,i=t.charAt(0),o=[0];for(n=0;n<e.length();++n){for(var s=0,a=e.at(n);s<o.length;++s)a+=o[s]<<8,o[s]=a%r,a=a/r|0;for(;a>0;)o.push(a%r),a=a/r|0}var l="";for(n=0;0===e.at(n)&&n<e.length()-1;++n)l+=i;for(n=o.length-1;n>=0;--n)l+=t[o[n]];return l}(e,t);if(n){var u=new RegExp(".{1,"+n+"}","g");r=r.match(u).join("\r\n")}return r},n.decode=function(e,n){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof n)throw new TypeError('"alphabet" must be a string.');var i=r[n];if(!i){i=r[n]=[];for(var o=0;o<n.length;++o)i[n.charCodeAt(o)]=o}e=e.replace(/\s/g,"");var s=n.length,a=n.charAt(0),l=[0];for(o=0;o<e.length;o++){var c=i[e.charCodeAt(o)];if(void 0===c)return;for(var u=0,d=c;u<l.length;++u)d+=l[u]*s,l[u]=255&d,d>>=8;for(;d>0;)l.push(255&d),d>>=8}for(var h=0;e[h]===a&&h<e.length-1;++h)l.push(0);return void 0!==t?t.from(l.reverse()):new Uint8Array(l.reverse())}}).call(this,n(26).Buffer)},function(e,t,n){var r=n(12);n(18),n(25);var i=e.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=i,i.create=function(){s||(o=String.fromCharCode(128),o+=r.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=!0);var e=null,t=r.util.createBuffer(),n=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,o=0;o<n;++o)i.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=r.util.encodeUtf8(o));var a=o.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=a[1],a[1]=a[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(o),l(e,n,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var s=r.util.createBuffer();s.putBytes(t.bytes());var a,c=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-c));for(var u=8*i.fullMessageLength[0],d=0;d<i.fullMessageLength.length-1;++d)u+=(a=8*i.fullMessageLength[d+1])/4294967296>>>0,s.putInt32(u>>>0),u=a>>>0;s.putInt32(u);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};l(h,n,s);var f=r.util.createBuffer();return f.putInt32(h.h0),f.putInt32(h.h1),f.putInt32(h.h2),f.putInt32(h.h3),f.putInt32(h.h4),f.putInt32(h.h5),f.putInt32(h.h6),f.putInt32(h.h7),f},i};var o=null,s=!1,a=null;function l(e,t,n){for(var r,i,o,s,l,c,u,d,h,f,p,y,g,m=n.length();m>=64;){for(l=0;l<16;++l)t[l]=n.getInt32();for(;l<64;++l)r=((r=t[l-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=((i=t[l-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[l]=r+t[l-7]+i+t[l-16]|0;for(c=e.h0,u=e.h1,d=e.h2,h=e.h3,f=e.h4,p=e.h5,y=e.h6,g=e.h7,l=0;l<64;++l)o=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),s=c&u|d&(c^u),r=g+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(y^f&(p^y))+a[l]+t[l],g=y,y=p,p=f,f=h+r>>>0,h=d,d=u,u=c,c=r+(i=o+s)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+u|0,e.h2=e.h2+d|0,e.h3=e.h3+h|0,e.h4=e.h4+f|0,e.h5=e.h5+p|0,e.h6=e.h6+y|0,e.h7=e.h7+g|0,m-=64}}},function(e,t,n){"use strict";const r=n(23),i=n(8);e.exports=class extends r{constructor(e){super(e),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:((t=i.clone(t)).value="name"===n?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t,n){const r=this,i={},o=r.blankNodeInfo[e].quads;r.forEach(o,(n,o,s)=>{let a,l;if("BlankNode"===n.subject.termType&&n.subject.value!==e)l=n.subject.value,a="p";else{if("BlankNode"!==n.object.termType||n.object.value===e)return s();l=n.object.value,a="r"}r.hashRelatedBlankNode(l,n,t,a,(e,t)=>{if(e)return s(e);t in i?i[t].push(l):i[t]=[l],s()})},e=>n(e,i))}}},function(e,t,n){"use strict";const r=n(28),i=n(8);e.exports=class extends r{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:((t=i.clone(t)).value="name"===n?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const n=this,r={},i=n.blankNodeInfo[e].quads;for(let o=0;o<i.length;++o){const s=i[o];let a,l;if("BlankNode"===s.subject.termType&&s.subject.value!==e)l=s.subject.value,a="p";else{if("BlankNode"!==s.object.termType||s.object.value===e)continue;l=s.object.value,a="r"}const c=n.hashRelatedBlankNode(l,s,t,a);c in r?r[c].push(l):r[c]=[l]}return r}}},function(e,t){},function(e,t,n){"use strict";const{isArray:r,isObject:i,isString:o}=n(3),{asArray:s}=n(2),{prependBase:a}=n(6),l=n(4),c=n(53);function u(e){throw new l("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}e.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:n,base:a,cycles:l=new Set}){t&&i(t)&&t["@context"]&&(t=t["@context"]),t=s(t);const d=[];for(const s of t){if(o(s)){let t=this._get(s);t||(t=await this._resolveRemoteContext({activeCtx:e,url:s,documentLoader:n,base:a,cycles:l})),r(t)?d.push(...t):d.push(t);continue}if(null===s){d.push(new c({document:null}));continue}i(s)||u(t);const h=JSON.stringify(s);let f=this._get(h);f||(f=new c({document:s}),this._cacheResolvedContext({key:h,resolved:f,tag:"static"})),d.push(f)}return d}_get(e){let t=this.perOpCache.get(e);if(!t){const n=this.sharedCache.get(e);n&&(t=n.get("static"),t&&this.perOpCache.set(e,t))}return t}_cacheResolvedContext({key:e,resolved:t,tag:n}){if(this.perOpCache.set(e,t),void 0!==n){let r=this.sharedCache.get(e);r||(r=new Map,this.sharedCache.set(e,r)),r.set(n,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:n,base:s,cycles:l}){t=a(s,t);const{context:c,remoteDoc:u}=await this._fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:l});(function e({context:t,base:n}){if(!t)return;const s=t["@context"];if(o(s))return void(t["@context"]=a(n,s));if(r(s)){for(let t=0;t<s.length;++t){const r=s[t];o(r)?s[t]=a(n,r):i(r)&&e({context:{"@context":r},base:n})}return}if(!i(s))return;for(const t in s)e({context:s[t],base:n})})({context:c,base:s=u.documentUrl||t});const d=await this.resolve({activeCtx:e,context:c,documentLoader:n,base:s,cycles:l});return this._cacheResolvedContext({key:t,resolved:d,tag:u.tag}),d}async _fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:s}){if(s.size>10)throw new l("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:10});if(s.has(t))throw new l("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let a,c;s.add(t);try{c=await n(t),a=c.document||null,o(a)&&(a=JSON.parse(a))}catch(e){throw new l("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:e})}if(!i(a))throw new l("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return a="@context"in a?{"@context":a["@context"]}:{"@context":{}},c.contextUrl&&(r(a["@context"])||(a["@context"]=[a["@context"]]),a["@context"].push(c.contextUrl)),{context:a,remoteDoc:c}}}},function(e,t,n){"use strict";const r=n(29);e.exports=class{constructor({document:e}){this.document=e,this.cache=new r({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,t){this.cache.set(e,t)}}},function(e,t,n){"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function i(e,t,n){var r=t===e.head?new a(n,null,t,e):new a(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function o(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,n,r){if(!(this instanceof a))return new a(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=a,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)n.push(o.value);return n},r.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;null!==r&&n<e;n++)r=r.next;var o=[];for(n=0;r&&n<t;n++)o.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(n=2;n<arguments.length;n++)r=i(this,r,arguments[n]);return o},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(55)(r)}catch(e){}},function(e,t,n){"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},function(e,t,n){"use strict";e.exports=n(16).NQuads},function(e,t,n){"use strict";const{RDF_LANGSTRING:r,RDF_PLAIN_LITERAL:i,RDF_OBJECT:o,RDF_XML_LITERAL:s,XSD_STRING:a}=n(13);let l;function c(){return"undefined"==typeof XMLSerializer?n(58).XMLSerializer:XMLSerializer}l="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},e.exports=class{parse(e){const t={"@default":[]},n=e.getSubjects();for(let u=0;u<n.length;++u){const d=n[u];if(null===d)continue;const h=e.getSubjectTriples(d);if(null===h)continue;const f=h.predicates;for(const e in f){const n=f[e].objects;for(let u=0;u<n.length;++u){const h=n[u],f={};0===d.indexOf("_:")?f.subject={type:"blank node",value:d}:f.subject={type:"IRI",value:d},0===e.indexOf("_:")?f.predicate={type:"blank node",value:e}:f.predicate={type:"IRI",value:e};let p=h.value;if(h.type===s){const e=new(c());p="";for(let t=0;t<h.value.length;t++)h.value[t].nodeType===l.ELEMENT_NODE?p+=e.serializeToString(h.value[t]):h.value[t].nodeType===l.TEXT_NODE&&(p+=h.value[t].nodeValue)}f.object={},h.type===o?0===h.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",h.type===i?h.language?(f.object.datatype=r,f.object.language=h.language):f.object.datatype=a:f.object.datatype=h.type),f.object.value=p,t["@default"].push(f)}}}return t}}},function(e,t){},function(e,t,n){"use strict";const r=n(4),{isArray:i,isObject:o,isEmptyObject:s,isString:a,isUndefined:l}=n(3),{isList:c,isValue:u,isGraph:d,isSubject:h}=n(5),{expandIri:f,getContextValue:p,isKeyword:y,process:g,processingMode:m}=n(9),{isAbsolute:v}=n(6),{addValue:b,asArray:w,getValues:x,validateTypeValue:I}=n(2),S={};e.exports=S;const O=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function A({activeCtx:e,activeProperty:t,value:n,options:r}){if(null==n)return null;const i=f(e,t,{vocab:!0},r);if("@id"===i)return f(e,n,{base:!0},r);if("@type"===i)return f(e,n,{vocab:!0,base:!0},r);const o=p(e,t,"@type");if(("@id"===o||"@graph"===i)&&a(n))return{"@id":f(e,n,{base:!0},r)};if("@vocab"===o&&a(n))return{"@id":f(e,n,{vocab:!0,base:!0},r)};if(y(i))return n;const s={};if(o&&!["@id","@vocab","@none"].includes(o))s["@type"]=o;else if(a(n)){const n=p(e,t,"@language");null!==n&&(s["@language"]=n);const r=p(e,t,"@direction");null!==r&&(s["@direction"]=r)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),s["@value"]=n,s}function C(e,t,n,o){const s=[],l=Object.keys(t).sort();for(const c of l){const l=f(e,c,{vocab:!0},o);let u=t[c];i(u)||(u=[u]);for(const e of u){if(null===e)continue;if(!a(e))throw new r("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const i={"@value":e};"@none"!==l&&(i["@language"]=c.toLowerCase()),n&&(i["@direction"]=n),s.push(i)}}return s}async function j({activeCtx:e,options:t,activeProperty:n,value:o,expansionMap:s,asGraph:a,indexKey:c,propertyIndex:h}){const y=[],m=Object.keys(o).sort(),v="@type"===c;for(let w of m){if(v){const n=p(e,w,"@context");l(n)||(e=await g({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let m,x=o[w];i(x)||(x=[x]),x=await S.expand({activeCtx:e,activeProperty:n,element:x,options:t,insideList:!1,insideIndex:!0,expansionMap:s}),m=h?"@none"===w?"@none":A({activeCtx:e,activeProperty:c,value:w,options:t}):f(e,w,{vocab:!0},t),"@id"===c?w=f(e,w,{base:!0},t):v&&(w=m);for(let e of x){if(a&&!d(e)&&(e={"@graph":[e]}),"@type"===c)"@none"===m||(e["@type"]?e["@type"]=[w].concat(e["@type"]):e["@type"]=[w]);else{if(u(e)&&!["@language","@type","@index"].includes(c))throw new r("Invalid JSON-LD syntax; Attempt to add illegal key to value "+`object: "${c}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});h?"@none"!==m&&b(e,h,m,{propertyIsArray:!0,prependValue:!0}):"@none"===m||c in e||(e[c]=w)}y.push(e)}}return y}S.expand=async({activeCtx:e,activeProperty:t=null,element:n,options:d={},insideList:N=!1,insideIndex:E=!1,typeScopedContext:T=null,expansionMap:R=(()=>void 0)})=>{if(null==n)return null;if("@default"===t&&(d=Object.assign({},d,{isFrame:!1})),!i(n)&&!o(n)){if(!N&&(null===t||"@graph"===f(e,t,{vocab:!0},d))){const r=await R({unmappedValue:n,activeCtx:e,activeProperty:t,options:d,insideList:N});return void 0===r?null:r}return A({activeCtx:e,activeProperty:t,value:n,options:d})}if(i(n)){let r=[];const o=p(e,t,"@container")||[];N=N||o.includes("@list");for(let o=0;o<n.length;++o){let s=await S.expand({activeCtx:e,activeProperty:t,element:n[o],options:d,expansionMap:R,insideIndex:E,typeScopedContext:T});N&&i(s)&&(s={"@list":s}),null===s&&(s=await R({unmappedValue:n[o],activeCtx:e,activeProperty:t,parent:n,index:o,options:d,expandedParent:r,insideList:N}),void 0===s)||(i(s)?r=r.concat(s):r.push(s))}return r}const k=f(e,t,{vocab:!0},d),_=p(e,t,"@context");T=T||(e.previousContext?e:null);let D=Object.keys(n).sort(),L=!E;if(L&&T&&D.length<=2&&!D.includes("@context"))for(const t of D){const n=f(T,t,{vocab:!0},d);if("@value"===n){L=!1,e=T;break}if("@id"===n&&1===D.length){L=!1;break}}L&&(e=e.revertToPreviousContext()),l(_)||(e=await g({activeCtx:e,localCtx:_,propagate:!0,overrideProtected:!0,options:d})),"@context"in n&&(e=await g({activeCtx:e,localCtx:n["@context"],options:d})),T=e;let B=null;for(const t of D){if("@type"===f(e,t,{vocab:!0},d)){B=B||t;const r=n[t],i=Array.isArray(r)?r.length>1?r.slice().sort():r:[r];for(const t of i){const n=p(T,t,"@context");l(n)||(e=await g({activeCtx:e,localCtx:n,options:d,propagate:!1}))}}}let P={};await async function e({activeCtx:t,activeProperty:n,expandedActiveProperty:d,element:x,expandedParent:A,options:N={},insideList:E,typeKey:T,typeScopedContext:R,expansionMap:k}){const _=Object.keys(x).sort(),D=[];let L;const B=x[T]&&"@json"===f(t,i(x[T])?x[T][0]:x[T],{vocab:!0},N);for(const e of _){let T,_=x[e];if("@context"===e)continue;let P=f(t,e,{vocab:!0},N);if((null===P||!v(P)&&!y(P))&&(P=k({unmappedProperty:e,activeCtx:t,activeProperty:n,parent:x,options:N,insideList:E,value:_,expandedParent:A}),void 0===P))continue;if(y(P)){if("@reverse"===d)throw new r("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:_});if(P in A&&"@included"!==P&&"@type"!==P)throw new r("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:P})}if("@id"===P){if(!a(_)){if(!N.isFrame)throw new r('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:_});if(o(_)){if(!s(_))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:_})}else{if(!i(_))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:_});if(!_.every(e=>a(e)))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:_})}}b(A,"@id",w(_).map(e=>a(e)?f(t,e,{base:!0},N):e),{propertyIsArray:N.isFrame});continue}if("@type"===P){o(_)&&(_=Object.fromEntries(Object.entries(_).map(([e,t])=>[f(R,e,{vocab:!0}),w(t).map(e=>f(R,e,{base:!0,vocab:!0}))]))),I(_,N.isFrame),b(A,"@type",w(_).map(e=>a(e)?f(R,e,{base:!0,vocab:!0},N):e),{propertyIsArray:N.isFrame});continue}if("@included"===P&&m(t,1.1)){const e=w(await S.expand({activeCtx:t,activeProperty:n,element:_,options:N,expansionMap:k}));if(!e.every(e=>h(e)))throw new r("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:_});b(A,"@included",e,{propertyIsArray:!0});continue}if("@graph"===P&&!o(_)&&!i(_))throw new r('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:_});if("@value"===P){L=_,B&&m(t,1.1)?A["@value"]=_:b(A,"@value",_,{propertyIsArray:N.isFrame});continue}if("@language"===P){if(null===_)continue;if(!a(_)&&!N.isFrame)throw new r('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:_});_=w(_).map(e=>a(e)?e.toLowerCase():e);for(const e of _)a(e)&&!e.match(O)&&console.warn(`@language must be valid BCP47: ${e}`);b(A,"@language",_,{propertyIsArray:N.isFrame});continue}if("@direction"===P){if(!a(_)&&!N.isFrame)throw new r('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:_});_=w(_);for(const e of _)if(a(e)&&"ltr"!==e&&"rtl"!==e)throw new r('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:_});b(A,"@direction",_,{propertyIsArray:N.isFrame});continue}if("@index"===P){if(!a(_))throw new r('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:_});b(A,"@index",_);continue}if("@reverse"===P){if(!o(_))throw new r('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:_});if(T=await S.expand({activeCtx:t,activeProperty:"@reverse",element:_,options:N,expansionMap:k}),"@reverse"in T)for(const e in T["@reverse"])b(A,e,T["@reverse"][e],{propertyIsArray:!0});let e=A["@reverse"]||null;for(const t in T){if("@reverse"===t)continue;null===e&&(e=A["@reverse"]={}),b(e,t,[],{propertyIsArray:!0});const n=T[t];for(let i=0;i<n.length;++i){const o=n[i];if(u(o)||c(o))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:T});b(e,t,o,{propertyIsArray:!0})}}continue}if("@nest"===P){D.push(e);continue}let M=t;const U=p(t,e,"@context");l(U)||(M=await g({activeCtx:t,localCtx:U,propagate:!0,overrideProtected:!0,options:N}));const J=p(M,e,"@container")||[];if(J.includes("@language")&&o(_)){const t=p(M,e,"@direction");T=C(M,_,t,N)}else if(J.includes("@index")&&o(_)){const n=J.includes("@graph"),r=p(M,e,"@index")||"@index",i="@index"!==r&&f(t,r,{vocab:!0},N);T=await j({activeCtx:M,options:N,activeProperty:e,value:_,expansionMap:k,asGraph:n,indexKey:r,propertyIndex:i})}else if(J.includes("@id")&&o(_)){const t=J.includes("@graph");T=await j({activeCtx:M,options:N,activeProperty:e,value:_,expansionMap:k,asGraph:t,indexKey:"@id"})}else if(J.includes("@type")&&o(_))T=await j({activeCtx:M.revertToPreviousContext(),options:N,activeProperty:e,value:_,expansionMap:k,asGraph:!1,indexKey:"@type"});else{const r="@list"===P;if(r||"@set"===P){let e=n;r&&"@graph"===d&&(e=null),T=await S.expand({activeCtx:M,activeProperty:e,element:_,options:N,insideList:r,expansionMap:k})}else T="@json"===p(t,e,"@type")?{"@type":"@json","@value":_}:await S.expand({activeCtx:M,activeProperty:e,element:_,options:N,insideList:!1,expansionMap:k})}if(null!==T||"@value"===P||(T=k({unmappedValue:_,expandedProperty:P,activeCtx:M,activeProperty:n,parent:x,options:N,insideList:E,key:e,expandedParent:A}),void 0!==T))if("@list"!==P&&!c(T)&&J.includes("@list")&&(T={"@list":w(T)}),J.includes("@graph")&&!J.some(e=>"@id"===e||"@index"===e)&&(T=w(T).map(e=>({"@graph":w(e)}))),M.mappings.has(e)&&M.mappings.get(e).reverse){const e=A["@reverse"]=A["@reverse"]||{};T=w(T);for(let t=0;t<T.length;++t){const n=T[t];if(u(n)||c(n))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:T});b(e,P,n,{propertyIsArray:!0})}}else b(A,P,T,{propertyIsArray:!0})}if("@value"in A)if("@json"===A["@type"]&&m(t,1.1));else if((o(L)||i(L))&&!N.isFrame)throw new r('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:L});for(const s of D){const a=i(x[s])?x[s]:[x[s]];for(const i of a){if(!o(i)||Object.keys(i).some(e=>"@value"===f(t,e,{vocab:!0},N)))throw new r("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:i});await e({activeCtx:t,activeProperty:n,expandedActiveProperty:d,element:i,expandedParent:A,options:N,insideList:E,typeScopedContext:R,typeKey:T,expansionMap:k})}}}({activeCtx:e,activeProperty:t,expandedActiveProperty:k,element:n,expandedParent:P,options:d,insideList:N,typeKey:B,typeScopedContext:T,expansionMap:R}),D=Object.keys(P);let M=D.length;if("@value"in P){if("@type"in P&&("@language"in P||"@direction"in P))throw new r('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:P});let i=M-1;if("@type"in P&&(i-=1),"@index"in P&&(i-=1),"@language"in P&&(i-=1),"@direction"in P&&(i-=1),0!==i)throw new r('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:P});const o=null===P["@value"]?[]:w(P["@value"]),l=x(P,"@type");if(m(e,1.1)&&l.includes("@json")&&1===l.length);else if(0===o.length){const r=await R({unmappedValue:P,activeCtx:e,activeProperty:t,element:n,options:d,insideList:N});P=void 0!==r?r:null}else{if(!o.every(e=>a(e)||s(e))&&"@language"in P)throw new r("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:P});if(!l.every(e=>v(e)&&!(a(e)&&0===e.indexOf("_:"))||s(e)))throw new r('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:P})}}else if("@type"in P&&!i(P["@type"]))P["@type"]=[P["@type"]];else if("@set"in P||"@list"in P){if(M>1&&!(2===M&&"@index"in P))throw new r('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:P});"@set"in P&&(P=P["@set"],D=Object.keys(P),M=D.length)}else if(1===M&&"@language"in P){const r=await R(P,{unmappedValue:P,activeCtx:e,activeProperty:t,element:n,options:d,insideList:N});P=void 0!==r?r:null}if(o(P)&&!d.keepFreeFloatingNodes&&!N&&(null===t||"@graph"===k)&&(0===M||"@value"in P||"@list"in P||1===M&&"@id"in P)){const r=await R({unmappedValue:P,activeCtx:e,activeProperty:t,element:n,options:d,insideList:N});P=void 0!==r?r:null}return P}},function(e,t,n){"use strict";const{isSubjectReference:r}=n(5),{createMergedNodeMap:i}=n(14),o={};e.exports=o,o.flatten=e=>{const t=i(e),n=[],o=Object.keys(t).sort();for(let e=0;e<o.length;++e){const i=t[o[e]];r(i)||n.push(i)}return n}},function(e,t,n){"use strict";const r=n(4),i=n(5),o=n(3),s=n(2),{RDF_LIST:a,RDF_FIRST:l,RDF_REST:c,RDF_NIL:u,RDF_TYPE:d,RDF_JSON_LITERAL:h,XSD_BOOLEAN:f,XSD_DOUBLE:p,XSD_INTEGER:y,XSD_STRING:g}=n(13),m=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,v={};function b(e,t,n){if(e.termType.endsWith("Node"))return{"@id":e.value};const i={"@value":e.value};if(e.language)i["@language"]=e.language;else{let s=e.datatype.value;if(s||(s=g),s===h){s="@json";try{i["@value"]=JSON.parse(i["@value"])}catch(e){throw new r("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:i["@value"],cause:e})}}if(t){if(s===f)"true"===i["@value"]?i["@value"]=!0:"false"===i["@value"]&&(i["@value"]=!1);else if(o.isNumeric(i["@value"]))if(s===y){const e=parseInt(i["@value"],10);e.toFixed(0)===i["@value"]&&(i["@value"]=e)}else s===p&&(i["@value"]=parseFloat(i["@value"]));[f,y,p,g].includes(s)||(i["@type"]=s)}else if("i18n-datatype"===n&&s.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=s.split(/[#_]/);e.length>0&&(i["@language"]=e,e.match(m)||console.warn(`@language must be valid BCP47: ${e}`)),i["@direction"]=t}else s!==g&&(i["@type"]=s)}return i}e.exports=v,v.fromRDF=async(e,{useRdfType:t=!1,useNativeTypes:n=!1,rdfDirection:r=null})=>{const h={},f={"@default":h},p={};for(const i of e){const e="DefaultGraph"===i.graph.termType?"@default":i.graph.value;e in f||(f[e]={}),"@default"===e||e in h||(h[e]={"@id":e});const o=f[e],a=i.subject.value,l=i.predicate.value,c=i.object;a in o||(o[a]={"@id":a});const y=o[a],g=c.termType.endsWith("Node");if(!g||c.value in o||(o[c.value]={"@id":c.value}),l===d&&!t&&g){s.addValue(y,"@type",c.value,{propertyIsArray:!0});continue}const m=b(c,n,r);if(s.addValue(y,l,m,{propertyIsArray:!0}),g)if(c.value===u){const e=o[c.value];"usages"in e||(e.usages=[]),e.usages.push({node:y,property:l,value:m})}else c.value in p?p[c.value]=!1:p[c.value]={node:y,property:l,value:m}}for(const e in f){const t=f[e];if(!(u in t))continue;const n=t[u];if(n.usages){for(let e of n.usages){let n=e.node,r=e.property,s=e.value;const u=[],d=[];let h=Object.keys(n).length;for(;r===c&&o.isObject(p[n["@id"]])&&o.isArray(n[l])&&1===n[l].length&&o.isArray(n[c])&&1===n[c].length&&(3===h||4===h&&o.isArray(n["@type"])&&1===n["@type"].length&&n["@type"][0]===a)&&(u.push(n[l][0]),d.push(n["@id"]),e=p[n["@id"]],n=e.node,r=e.property,s=e.value,h=Object.keys(n).length,i.isBlankNode(n)););delete s["@id"],s["@list"]=u.reverse();for(const e of d)delete t[e]}delete n.usages}}const y=[],g=Object.keys(h).sort();for(const e of g){const t=h[e];if(e in f){const n=t["@graph"]=[],r=f[e],o=Object.keys(r).sort();for(const e of o){const t=r[e];i.isSubjectReference(t)||n.push(t)}}i.isSubjectReference(t)||y.push(t)}return y}},function(e,t,n){"use strict";const{createNodeMap:r}=n(14),{isKeyword:i}=n(9),o=n(5),s=n(63),a=n(3),l=n(2),{RDF_FIRST:c,RDF_REST:u,RDF_NIL:d,RDF_TYPE:h,RDF_JSON_LITERAL:f,RDF_LANGSTRING:p,XSD_BOOLEAN:y,XSD_DOUBLE:g,XSD_INTEGER:m,XSD_STRING:v}=n(13),{isAbsolute:b}=n(6),w={};function x(e,t,n,r,o){const s=Object.keys(t).sort();for(const a of s){const s=t[a],l=Object.keys(s).sort();for(let t of l){const l=s[t];if("@type"===t)t=h;else if(i(t))continue;for(const i of l){const s={termType:a.startsWith("_:")?"BlankNode":"NamedNode",value:a};if(!b(a))continue;const l={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!b(t))continue;if("BlankNode"===l.termType&&!o.produceGeneralizedRdf)continue;const c=I(i,r,e,n,o.rdfDirection);c&&e.push({subject:s,predicate:l,object:c,graph:n})}}}}function I(e,t,n,r,i){const l={};if(o.isValue(e)){l.termType="Literal",l.value=void 0,l.datatype={termType:"NamedNode"};let t=e["@value"];const n=e["@type"]||null;if("@json"===n)l.value=s(t),l.datatype.value=f;else if(a.isBoolean(t))l.value=t.toString(),l.datatype.value=n||y;else if(a.isDouble(t)||n===g)a.isDouble(t)||(t=parseFloat(t)),l.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),l.datatype.value=n||g;else if(a.isNumber(t))l.value=t.toFixed(0),l.datatype.value=n||m;else if("i18n-datatype"===i&&"@direction"in e){const n="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+`_${e["@direction"]}`;l.datatype.value=n,l.value=t}else"@language"in e?(l.value=t,l.datatype.value=n||p,l.language=e["@language"]):(l.value=t,l.datatype.value=n||v)}else if(o.isList(e)){const o=function(e,t,n,r,i){const o={termType:"NamedNode",value:c},s={termType:"NamedNode",value:u},a={termType:"NamedNode",value:d},l=e.pop(),h=l?{termType:"BlankNode",value:t.getId()}:a;let f=h;for(const a of e){const e=I(a,t,n,r,i),l={termType:"BlankNode",value:t.getId()};n.push({subject:f,predicate:o,object:e,graph:r}),n.push({subject:f,predicate:s,object:l,graph:r}),f=l}if(l){const e=I(l,t,n,r,i);n.push({subject:f,predicate:o,object:e,graph:r}),n.push({subject:f,predicate:s,object:a,graph:r})}return h}(e["@list"],t,n,r,i);l.termType=o.termType,l.value=o.value}else{const t=a.isObject(e)?e["@id"]:e;l.termType=t.startsWith("_:")?"BlankNode":"NamedNode",l.value=t}return"NamedNode"!==l.termType||b(l.value)?l:null}e.exports=w,w.toRDF=(e,t)=>{const n=new l.IdentifierIssuer("_:b"),i={"@default":{}};r(e,i,"@default",n);const o=[],s=Object.keys(i).sort();for(const e of s){let r;if("@default"===e)r={termType:"DefaultGraph",value:""};else{if(!b(e))continue;r=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},r.value=e}x(o,i[e],r,n,t)}return o}},function(e,t,n){"use strict";e.exports=function(e){return function e(t){if(null===t||"object"!=typeof t||null!=t.toJSON)return JSON.stringify(t);if(Array.isArray(t)&&0===t.length)return"[]";if(Array.isArray(t)&&1===t.length)return"["+e(t[0])+"]";if(Array.isArray(t))return"["+t.reduce((t,n,r)=>(t=1===r?e(t):t)+","+e(n))+"]";const n=Object.keys(t);if(0===n.length)return"{}";if(1===n.length)return"{"+e(n[0])+":"+e(t[n[0]])+"}";return"{"+n.sort().reduce((n,r,i)=>(n=1===i?e(n)+":"+e(t[n]):n)+","+e(r)+":"+e(t[r]))+"}"}(e)}},function(e,t,n){"use strict";const{isKeyword:r}=n(9),i=n(5),o=n(3),s=n(2),a=n(6),l=n(4),{createNodeMap:c,mergeNodeMapGraphs:u}=n(14),d={};function h(e){const t={};for(const n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function f(e,t,n){for(let r=n.length-1;r>=0;--r){const i=n[r];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function p(e,t,n){const r="@"+n;let i=r in e?e[r][0]:t[n];if("embed"===n)if(!0===i)i="@once";else if(!1===i)i="@never";else if("@always"!==i&&"@never"!==i&&"@link"!==i&&"@first"!==i&&"@last"!==i&&"@once"!==i)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return i}function y(e){if(!o.isArray(e)||1!==e.length||!o.isObject(e[0]))throw new l("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const t of s.asArray(e[0]["@id"]))if(!o.isObject(t)&&!a.isAbsolute(t)||o.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const t of s.asArray(e[0]["@type"]))if(!o.isObject(t)&&!a.isAbsolute(t)||o.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function g(e,t,n,a){let l=!0,c=!1;for(const u in n){let d=!1;const h=s.getValues(t,u),f=0===s.getValues(n,u).length;if("@id"===u){if(o.isEmptyObject(n["@id"][0]||{})?d=!0:n["@id"].length>=0&&(d=n["@id"].includes(h[0])),!a.requireAll)return d}else if("@type"===u){if(l=!1,f){if(h.length>0)return!1;d=!0}else if(1===n["@type"].length&&o.isEmptyObject(n["@type"][0]))d=h.length>0;else for(const e of n["@type"])d=!!(o.isObject(e)&&"@default"in e)||(d||h.some(t=>t===e));if(!a.requireAll)return d}else{if(r(u))continue;{const t=s.getValues(n,u)[0];let r=!1;if(t&&(y([t]),r="@default"in t),l=!1,0===h.length&&r)continue;if(h.length>0&&f)return!1;if(void 0===t){if(h.length>0)return!1;d=!0}else if(i.isList(t)){const n=t["@list"][0];if(i.isList(h[0])){const t=h[0]["@list"];i.isValue(n)?d=t.some(e=>w(n,e)):(i.isSubject(n)||i.isSubjectReference(n))&&(d=t.some(t=>b(e,n,t,a)))}}else d=i.isValue(t)?h.some(e=>w(t,e)):i.isSubjectReference(t)?h.some(n=>b(e,t,n,a)):!!o.isObject(t)&&h.length>0}}if(!d&&a.requireAll)return!1;c=c||d}return l||c}function m(e,t){const n=e.uniqueEmbeds[e.graph],r=n[t],i=r.parent,a=r.property,l={"@id":t};if(o.isArray(i)){for(let e=0;e<i.length;++e)if(s.compareValues(i[e],l)){i[e]=l;break}}else{const e=o.isArray(i[a]);s.removeValue(i,a,l,{propertyIsArray:e}),s.addValue(i,a,l,{propertyIsArray:e})}const c=e=>{const t=Object.keys(n);for(const r of t)r in n&&o.isObject(n[r].parent)&&n[r].parent["@id"]===e&&(delete n[r],c(r))};c(t)}function v(e,t,n){o.isObject(e)?s.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function b(e,t,n,r){if(!("@id"in n))return!1;const i=e.subjects[n["@id"]];return i&&g(e,i,t,r)}function w(e,t){const n=t["@value"],r=t["@type"],i=t["@language"],s=e["@value"]?o.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],a=e["@type"]?o.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],l=e["@language"]?o.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===s.length&&0===a.length&&0===l.length||!(!s.includes(n)&&!o.isEmptyObject(s[0]))&&(!!(!r&&0===a.length||a.includes(r)||r&&o.isEmptyObject(a[0]))&&!!(!i&&0===l.length||l.includes(i)||i&&o.isEmptyObject(l[0])))}e.exports=d,d.frameMergedOrDefault=(e,t,n)=>{const r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},a=new s.IdentifierIssuer("_:b");c(e,r.graphMap,"@default",a),n.merged&&(r.graphMap["@merged"]=u(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];const l=[];return d.frame(r,Object.keys(r.subjects).sort(),t,l),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter(e=>1===r.bnodeMap[e].length)),n.link={},function e(t,n){if(o.isArray(t))return t.map(t=>e(t,n));if(o.isObject(t)){if("@preserve"in t)return t["@preserve"][0];if(i.isValue(t))return t;if(i.isList(t))return t["@list"]=e(t["@list"],n),t;if("@id"in t){const e=t["@id"];if(n.link.hasOwnProperty(e)){const r=n.link[e].indexOf(t);if(-1!==r)return n.link[e][r];n.link[e].push(t)}else n.link[e]=[t]}for(const r in t)"@id"===r&&n.bnodesToClear.includes(t[r])?delete t["@id"]:t[r]=e(t[r],n)}return t}(l,n)},d.frame=(e,t,n,a,c=null)=>{y(n),n=n[0];const u=e.options,b={embed:p(n,u,"embed"),explicit:p(n,u,"explicit"),requireAll:p(n,u,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const x=e.link[e.graph],I=function(e,t,n,r){const i={};for(const o of t){const t=e.graphMap[e.graph][o];g(e,t,n,r)&&(i[o]=t)}return i}(e,t,n,b),S=Object.keys(I).sort();for(const y of S){const g=I[y];if(null===c?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===b.embed&&y in x){v(a,c,x[y]);continue}const S={"@id":y};if(0===y.indexOf("_:")&&s.addValue(e.bnodeMap,y,S,{propertyIsArray:!0}),x[y]=S,("@first"===b.embed||"@last"===b.embed)&&e.is11)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(y))if(!e.embedded||"@never"!==b.embed&&!f(g,e.graph,e.subjectStack))if(!e.embedded||"@first"!=b.embed&&"@once"!=b.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(y)){if("@last"===b.embed&&y in e.uniqueEmbeds[e.graph]&&m(e,y),e.uniqueEmbeds[e.graph][y]={parent:a,property:c},e.subjectStack.push({subject:g,graph:e.graph}),y in e.graphMap){let t=!1,r=null;"@graph"in n?(r=n["@graph"][0],t=!("@merged"===y||"@default"===y),o.isObject(r)||(r={})):(t="@merged"!==e.graph,r={}),t&&d.frame({...e,graph:y,embedded:!1},Object.keys(e.graphMap[y]).sort(),[r],S,"@graph")}"@included"in n&&d.frame({...e,embedded:!1},t,n["@included"],S,"@included");for(const t of Object.keys(g).sort())if(r(t)){if(S[t]=s.clone(g[t]),"@type"===t)for(const t of g["@type"])0===t.indexOf("_:")&&s.addValue(e.bnodeMap,t,S,{propertyIsArray:!0})}else if(!b.explicit||t in n)for(const r of g[t]){const o=t in n?n[t]:h(b);if(i.isList(r)){const o=n[t]&&n[t][0]&&n[t][0]["@list"]?n[t][0]["@list"]:h(b),a={"@list":[]};v(S,t,a);const l=r["@list"];for(const t of l)i.isSubjectReference(t)?d.frame({...e,embedded:!0},[t["@id"]],o,a,"@list"):v(a,"@list",s.clone(t))}else i.isSubjectReference(r)?d.frame({...e,embedded:!0},[r["@id"]],o,S,t):w(o[0],r)&&v(S,t,s.clone(r))}for(const e of Object.keys(n).sort()){if("@type"===e){if(!(o.isObject(n[e][0])&&"@default"in n[e][0]))continue}else if(r(e))continue;const t=n[e][0]||{};if(!(p(t,u,"omitDefault")||e in S)){let n="@null";"@default"in t&&(n=s.clone(t["@default"])),o.isArray(n)||(n=[n]),S[e]=[{"@preserve":n}]}}for(const t of Object.keys(n["@reverse"]||{}).sort()){const r=n["@reverse"][t];for(const n of Object.keys(e.subjects)){s.getValues(e.subjects[n],t).some(e=>e["@id"]===y)&&(S["@reverse"]=S["@reverse"]||{},s.addValue(S["@reverse"],t,[],{propertyIsArray:!0}),d.frame({...e,embedded:!0},[n],r,S["@reverse"][t],c))}}v(a,c,S),e.subjectStack.pop()}else v(a,c,S);else v(a,c,S)}},d.cleanupNull=(e,t)=>{if(o.isArray(e)){return e.map(e=>d.cleanupNull(e,t)).filter(e=>e)}if("@null"===e)return null;if(o.isObject(e)){if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)e[n]=d.cleanupNull(e[n],t)}return e}},function(e,t,n){"use strict";const r=n(4),{isArray:i,isObject:o,isString:s,isUndefined:a}=n(3),{isList:l,isValue:c,isGraph:u,isSimpleGraph:d,isSubjectReference:h}=n(5),{expandIri:f,getContextValue:p,isKeyword:y,process:g,processingMode:m}=n(9),{removeBase:v,prependBase:b}=n(6),{addValue:w,asArray:x,compareShortestLeast:I}=n(2),S={};function O(e,t,n){if("@nest"!==f(e,t,{vocab:!0},n))throw new r("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}e.exports=S,S.compact=async({activeCtx:e,activeProperty:t=null,element:n,options:f={},compactionMap:v=(()=>void 0)})=>{if(i(n)){let r=[];for(let i=0;i<n.length;++i){let o=await S.compact({activeCtx:e,activeProperty:t,element:n[i],options:f,compactionMap:v});null===o&&(o=await v({unmappedValue:n[i],activeCtx:e,activeProperty:t,parent:n,index:i,options:f}),void 0===o)||r.push(o)}if(f.compactArrays&&1===r.length){0===(p(e,t,"@container")||[]).length&&(r=r[0])}return r}const b=p(e,t,"@context");if(a(b)||(e=await g({activeCtx:e,localCtx:b,propagate:!0,overrideProtected:!0,options:f})),o(n)){if(f.link&&"@id"in n&&f.link.hasOwnProperty(n["@id"])){const e=f.link[n["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===n)return e[t].compacted}if(c(n)||h(n)){const r=S.compactValue({activeCtx:e,activeProperty:t,value:n,options:f});return f.link&&h(n)&&(f.link.hasOwnProperty(n["@id"])||(f.link[n["@id"]]=[]),f.link[n["@id"]].push({expanded:n,compacted:r})),r}if(l(n)){if((p(e,t,"@container")||[]).includes("@list"))return S.compact({activeCtx:e,activeProperty:t,element:n["@list"],options:f,compactionMap:v})}const b="@reverse"===t,I={},A=e;c(n)||h(n)||(e=e.revertToPreviousContext());const C=p(A,t,"@context");a(C)||(e=await g({activeCtx:e,localCtx:C,propagate:!0,overrideProtected:!0,options:f})),f.link&&"@id"in n&&(f.link.hasOwnProperty(n["@id"])||(f.link[n["@id"]]=[]),f.link[n["@id"]].push({expanded:n,compacted:I}));let j=n["@type"]||[];j.length>1&&(j=Array.from(j).sort());const N=e;for(const t of j){const n=S.compactIri({activeCtx:N,iri:t,relativeTo:{vocab:!0}}),r=p(A,n,"@context");a(r)||(e=await g({activeCtx:e,localCtx:r,options:f,propagate:!1}))}const E=Object.keys(n).sort();for(const a of E){const h=n[a];if("@id"!==a)if("@type"!==a)if("@reverse"!==a)if("@preserve"!==a)if("@index"!==a)if("@graph"!==a&&"@list"!==a&&"@included"!==a&&y(a)){const t=S.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});w(I,t,h)}else{if(!i(h))throw new r("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===h.length){const t=S.compactIri({activeCtx:e,iri:a,value:h,relativeTo:{vocab:!0},reverse:b}),n=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let r=I;n&&(O(e,n,f),o(I[n])||(I[n]={}),r=I[n]),w(r,t,h,{propertyIsArray:!0})}for(const t of h){const n=S.compactIri({activeCtx:e,iri:a,value:t,relativeTo:{vocab:!0},reverse:b}),r=e.mappings.has(n)?e.mappings.get(n)["@nest"]:null;let h=I;r&&(O(e,r,f),o(I[r])||(I[r]={}),h=I[r]);const y=p(e,n,"@container")||[],g=u(t),m=l(t);let A;m?A=t["@list"]:g&&(A=t["@graph"]);let C=await S.compact({activeCtx:e,activeProperty:n,element:m||g?A:t,options:f,compactionMap:v});if(m){if(i(C)||(C=[C]),y.includes("@list")){w(h,n,C,{valueIsArray:!0,allowDuplicate:!0});continue}C={[S.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:C},"@index"in t&&(C[S.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(g)if(y.includes("@graph")&&(y.includes("@id")||y.includes("@index")&&d(t))){let r;h.hasOwnProperty(n)?r=h[n]:h[n]=r={};const i=(y.includes("@id")?t["@id"]:t["@index"])||S.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});w(r,i,C,{propertyIsArray:!f.compactArrays||y.includes("@set")})}else y.includes("@graph")&&d(t)?(i(C)&&C.length>1&&(C={"@included":C}),w(h,n,C,{propertyIsArray:!f.compactArrays||y.includes("@set")})):(i(C)&&1===C.length&&f.compactArrays&&(C=C[0]),C={[S.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:C},"@id"in t&&(C[S.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(C[S.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),w(h,n,C,{propertyIsArray:!f.compactArrays||y.includes("@set")}));else if(y.includes("@language")||y.includes("@index")||y.includes("@id")||y.includes("@type")){let r,i;if(h.hasOwnProperty(n)?r=h[n]:h[n]=r={},y.includes("@language"))c(C)&&(C=C["@value"]),i=t["@language"];else if(y.includes("@index")){const r=p(e,n,"@index")||"@index",o=S.compactIri({activeCtx:e,iri:r,relativeTo:{vocab:!0}});if("@index"===r)i=t["@index"],delete C[o];else{let e;if([i,...e]=x(C[r]||[]),s(i))switch(e.length){case 0:delete C[r];break;case 1:C[r]=e[0];break;default:C[r]=e}else i=null}}else if(y.includes("@id")){const t=S.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});i=C[t],delete C[t]}else if(y.includes("@type")){const r=S.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let o;switch([i,...o]=x(C[r]||[]),o.length){case 0:delete C[r];break;case 1:C[r]=o[0];break;default:C[r]=o}1===Object.keys(C).length&&"@id"in t&&(C=await S.compact({activeCtx:e,activeProperty:n,element:{"@id":t["@id"]},options:f,compactionMap:v}))}i||(i=S.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),w(r,i,C,{propertyIsArray:y.includes("@set")})}else{const e=!f.compactArrays||y.includes("@set")||y.includes("@list")||i(C)&&0===C.length||"@list"===a||"@graph"===a;w(h,n,C,{propertyIsArray:e})}}}else{if((p(e,t,"@container")||[]).includes("@index"))continue;const n=S.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});w(I,n,h)}else{const n=await S.compact({activeCtx:e,activeProperty:t,element:h,options:f,compactionMap:v});i(n)&&0===n.length||w(I,a,n)}else{const t=await S.compact({activeCtx:e,activeProperty:"@reverse",element:h,options:f,compactionMap:v});for(const n in t)if(e.mappings.has(n)&&e.mappings.get(n).reverse){const r=t[n],i=(p(e,n,"@container")||[]).includes("@set")||!f.compactArrays;w(I,n,r,{propertyIsArray:i}),delete t[n]}if(Object.keys(t).length>0){const n=S.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});w(I,n,t)}}else{let t=x(h).map(e=>S.compactIri({activeCtx:A,iri:e,relativeTo:{vocab:!0}}));1===t.length&&(t=t[0]);const n=S.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),r=(p(e,n,"@container")||[]).includes("@set")&&m(e,1.1)||i(t)&&0===h.length;w(I,n,t,{propertyIsArray:r})}else{let t=x(h).map(t=>S.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!1},base:f.base}));1===t.length&&(t=t[0]),I[S.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t}}return I}return n},S.compactIri=({activeCtx:e,iri:t,value:n=null,relativeTo:i={vocab:!1},reverse:s=!1,base:a=null})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const d=e.getInverse();if(y(t)&&t in d&&"@none"in d[t]&&"@type"in d[t]["@none"]&&"@none"in d[t]["@none"]["@type"])return d[t]["@none"]["@type"]["@none"];if(i.vocab&&t in d){const r=e["@language"]||"@none",i=[];o(n)&&"@index"in n&&!("@graph"in n)&&i.push("@index","@index@set"),o(n)&&"@preserve"in n&&(n=n["@preserve"][0]),u(n)?("@index"in n&&i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&i.push("@graph@id","@graph@id@set"),i.push("@graph","@graph@set","@set"),"@index"in n||i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||i.push("@graph@id","@graph@id@set")):o(n)&&!c(n)&&i.push("@id","@id@set","@type","@set@type");let a="@language",d="@null";if(s)a="@type",d="@reverse",i.push("@set");else if(l(n)){"@index"in n||i.push("@list");const e=n["@list"];if(0===e.length)a="@any",d="@none";else{let t=0===e.length?r:null,n=null;for(let r=0;r<e.length;++r){const i=e[r];let o="@none",s="@none";if(c(i))if("@direction"in i){o=`${(i["@language"]||"").toLowerCase()}_${i["@direction"]}`}else"@language"in i?o=i["@language"].toLowerCase():"@type"in i?s=i["@type"]:o="@null";else s="@id";if(null===t?t=o:o!==t&&c(i)&&(t="@none"),null===n?n=s:s!==n&&(n="@none"),"@none"===t&&"@none"===n)break}t=t||"@none",n=n||"@none","@none"!==n?(a="@type",d=n):d=t}}else{if(c(n))if("@language"in n&&!("@index"in n)){i.push("@language","@language@set"),d=n["@language"];const e=n["@direction"];e&&(d=`${d}_${e}`)}else"@direction"in n&&!("@index"in n)?d=`_${n["@direction"]}`:"@type"in n&&(a="@type",d=n["@type"]);else a="@type",d="@id";i.push("@set")}i.push("@none"),!o(n)||"@index"in n||i.push("@index","@index@set"),c(n)&&1===Object.keys(n).length&&i.push("@language","@language@set");const h=function(e,t,n,r,i,s){null===s&&(s="@null");const a=[];if(("@id"===s||"@reverse"===s)&&o(n)&&"@id"in n){"@reverse"===s&&a.push("@reverse");const t=S.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===n["@id"]?a.push.apply(a,["@vocab","@id"]):a.push.apply(a,["@id","@vocab"])}else{a.push(s);const e=a.find(e=>e.includes("_"));e&&a.push(e.replace(/^[^_]+_/,"_"))}a.push("@none");const l=e.inverse[t];for(const e of r){if(!(e in l))continue;const t=l[e][i];for(const e of a)if(e in t)return t[e]}return null}(e,t,n,i,a,d);if(null!==h)return h}if(i.vocab&&"@vocab"in e){const n=e["@vocab"];if(0===t.indexOf(n)&&t!==n){const r=t.substr(n.length);if(!e.mappings.has(r))return r}}let h=null;const f=[];let p=e.fastCurieMap;const g=t.length-1;for(let e=0;e<g&&t[e]in p;++e)p=p[t[e]],""in p&&f.push(p[""][0]);for(let r=f.length-1;r>=0;--r){const i=f[r],o=i.terms;for(const r of o){const o=r+":"+t.substr(i.iri.length);e.mappings.get(r)._prefix&&(!e.mappings.has(o)||null===n&&e.mappings.get(o)["@id"]===t)&&(null===h||I(o,h)<0)&&(h=o)}}if(null!==h)return h;for(const[n,i]of e.mappings)if(i&&i._prefix&&t.startsWith(n+":"))throw new r(`Absolute IRI "${t}" confused with prefix "${n}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return i.vocab?t:"@base"in e?e["@base"]?v(b(a,e["@base"]),t):t:v(a,t)},S.compactValue=({activeCtx:e,activeProperty:t,value:n,options:r})=>{if(c(n)){const r=p(e,t,"@type"),i=p(e,t,"@language"),o=p(e,t,"@direction"),a=p(e,t,"@container")||[],l="@index"in n&&!a.includes("@index");if(!l&&"@none"!==r){if(n["@type"]===r)return n["@value"];if("@language"in n&&n["@language"]===i&&"@direction"in n&&n["@direction"]===o)return n["@value"];if("@language"in n&&n["@language"]===i)return n["@value"];if("@direction"in n&&n["@direction"]===o)return n["@value"]}const c=Object.keys(n).length,u=1===c||2===c&&"@index"in n&&!l,d="@language"in e,h=s(n["@value"]),f=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(u&&"@none"!==r&&(!d||!h||f))return n["@value"];const y={};return l&&(y[S.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?y[S.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=S.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(y[S.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(y[S.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),y[S.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],y}const i=f(e,t,{vocab:!0},r),o=p(e,t,"@type"),a=S.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:"@vocab"===o},base:r.base});return"@id"===o||"@vocab"===o||"@graph"===i?a:{[S.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:a}}},function(e,t,n){"use strict";const{parseLinkHeader:r,buildHeaders:i}=n(2),{LINK_HEADER_CONTEXT:o}=n(13),s=n(4),a=n(20),{prependBase:l}=n(6);e.exports=({secure:e,strictSSL:t=!0,maxRedirects:c=-1,request:u,headers:d={}}={strictSSL:!0,maxRedirects:-1,headers:{}})=>{d=i(d),u=u||n(67);const h=n(68);return(new a).wrapLoader((function(n){return async function n(i,a){if(0!==i.indexOf("http:")&&0!==i.indexOf("https:"))throw new s('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:i});if(e&&0!==i.indexOf("https"))throw new s('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:i});let f,p=null;if(null!==p)return p;let y=null;try{f=await function(e,t){return new Promise((n,r)=>{e(t,(e,t,i)=>{e?r(e):n({res:t,body:i})})})}(u,{url:i,headers:d,strictSSL:t,followRedirect:!1})}catch(e){throw new s("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:i,cause:e})}const{res:g,body:m}=f;p={contextUrl:null,documentUrl:i,document:m||null};const v=h.STATUS_CODES[g.statusCode];if(g.statusCode>=400)throw new s(`URL "${i}" could not be dereferenced: ${v}`,"jsonld.InvalidUrl",{code:"loading document failed",url:i,httpStatusCode:g.statusCode});if(g.headers.link&&"application/ld+json"!==g.headers["content-type"]){const e=r(g.headers.link),t=e[o];if(Array.isArray(t))throw new s("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:i});t&&(p.contextUrl=t.target),y=e.alternate,y&&"application/ld+json"==y.type&&!(g.headers["content-type"]||"").match(/^application\/(\w*\+)?json$/)&&(g.headers.location=l(i,y.target))}if((y||g.statusCode>=300&&g.statusCode<400)&&g.headers.location){if(a.length===c)throw new s("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:i,httpStatusCode:g.statusCode,redirects:a});if(-1!==a.indexOf(i))throw new s("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:i,httpStatusCode:g.statusCode,redirects:a});return a.push(i),n(g.headers.location,a)}return a.push(i),p}(n,[])}))}},function(e,t){},function(e,t){},function(e,t,n){"use strict";const{parseLinkHeader:r,buildHeaders:i}=n(2),{LINK_HEADER_CONTEXT:o}=n(13),s=n(4),a=n(20),{prependBase:l}=n(6),c=/(^|(\r\n))link:/i;e.exports=({secure:e,headers:t={},xhr:n}={headers:{}})=>{return t=i(t),(new a).wrapLoader((async function i(a){if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))throw new s('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a});if(e&&0!==a.indexOf("https"))throw new s('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a});let u;try{u=await function(e,t,n){const r=new(e=e||XMLHttpRequest);return new Promise((e,i)=>{r.onload=()=>e(r),r.onerror=e=>i(e),r.open("GET",t,!0);for(const e in n)r.setRequestHeader(e,n[e]);r.send()})}(n,a,t)}catch(e){throw new s("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:e})}if(u.status>=400)throw new s("URL could not be dereferenced: "+u.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:a,httpStatusCode:u.status});let d={contextUrl:null,documentUrl:a,document:u.response},h=null;const f=u.getResponseHeader("Content-Type");let p;c.test(u.getAllResponseHeaders())&&(p=u.getResponseHeader("Link"));if(p&&"application/ld+json"!==f){const e=r(p),t=e[o];if(Array.isArray(t))throw new s("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a});t&&(d.contextUrl=t.target),h=e.alternate,h&&"application/ld+json"==h.type&&!(f||"").match(/^application\/(\w*\+)?json$/)&&(d=await i(l(a,h.target)))}return d}))}},function(e,t,n){"use strict";e.exports=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,n){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,n)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}},function(e,t,n){const r=n(7);e.exports=class{constructor(e,t){this.IRI=e,this.graph=t}getIRI(e=!1){return e?this.IRI:r.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"rdfs:Class"}getVocabulary(){const e=this.graph.classes[this.IRI];return r.isNil(e["schema:isPartOf"])?null:e["schema:isPartOf"]}getSource(){const e=this.graph.classes[this.IRI];return r.isNil(e["dc:source"])?r.isNil(e["schema:source"])?null:e["schema:source"]:e["dc:source"]}isSupersededBy(){const e=this.graph.classes[this.IRI];return r.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(e="en"){const t=this.graph.classes[this.IRI]["rdfs:label"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getDescription(e="en"){const t=this.graph.classes[this.IRI]["rdfs:comment"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getProperties(e=!0,t=null){const n=this.graph.classes[this.IRI],i=[];return i.push(...n["soa:hasProperty"]),e&&i.push(...this.graph.reasoner.inferPropertiesFromSuperClasses(n["rdfs:subClassOf"])),r.applyFilter(r.uniquifyArray(i),t,this.graph)}getSuperClasses(e=!0,t=null){const n=this.graph.classes[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferImplicitSuperClasses(this.IRI)):i.push(...n["rdfs:subClassOf"]),r.applyFilter(r.uniquifyArray(i),t,this.graph)}getSubClasses(e=!0,t=null){const n=this.graph.classes[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferImplicitSubClasses(this.IRI)):i.push(...n["soa:superClassOf"]),r.applyFilter(r.uniquifyArray(i),t,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(e=!0,t=null){const n={};return n.id=this.getIRI(!0),n.IRI=this.getIRI(),n.type=this.getTermType(),n.vocabulary=this.getVocabulary(),n.source=this.getSource(),n.supersededBy=this.isSupersededBy(),n.name=this.getName(),n.description=this.getDescription(),n.superClasses=this.getSuperClasses(e,t),n.subClasses=this.getSubClasses(e,t),n.properties=this.getProperties(e,t),n}}},function(e,t,n){const r=n(7);e.exports=class{constructor(e,t){this.IRI=e,this.graph=t}getIRI(e=!1){return e?this.IRI:r.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"rdf:Property"}getVocabulary(){let e=this.graph.properties[this.IRI];return r.isNil(e["schema:isPartOf"])?null:e["schema:isPartOf"]}getSource(){let e=this.graph.properties[this.IRI];return r.isNil(e["dc:source"])?r.isNil(e["schema:source"])?null:e["schema:source"]:e["dc:source"]}isSupersededBy(){let e=this.graph.properties[this.IRI];return r.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(e="en"){let t=this.graph.properties[this.IRI]["rdfs:label"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getDescription(e="en"){let t=this.graph.properties[this.IRI]["rdfs:comment"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getRanges(e=!0,t=null){let n=this.graph.properties[this.IRI],i=[];if(i.push(...n["schema:rangeIncludes"]),e){let e=[];for(const t of i)e.push(...this.graph.reasoner.inferImplicitSubClasses(t));i.push(...e),i=i.filter((function(e){return null!==e}))}return r.applyFilter(r.uniquifyArray(i),t,this.graph)}getDomains(e=!0,t=null){let n=this.graph.properties[this.IRI],i=[];if(i.push(...n["schema:domainIncludes"]),e){let e=[];for(const t of i)e.push(...this.graph.reasoner.inferImplicitSubClasses(t));i.push(...e)}return r.applyFilter(r.uniquifyArray(i),t,this.graph)}getSuperProperties(e=!0,t=null){let n=this.graph.properties[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferSuperProperties(this.IRI)):i.push(...n["rdfs:subPropertyOf"]),r.applyFilter(r.uniquifyArray(i),t,this.graph)}getSubProperties(e=!0,t=null){let n=this.graph.properties[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferSubProperties(this.IRI)):i.push(...n["soa:superPropertyOf"]),r.applyFilter(r.uniquifyArray(i),t,this.graph)}getInverseOf(){return this.graph.properties[this.IRI]["schema:inverseOf"]}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(e=!0,t=null){let n={};return n.id=this.getIRI(!0),n.IRI=this.getIRI(),n.type=this.getTermType(),n.vocabulary=this.getVocabulary(),n.source=this.getSource(),n.supersededBy=this.isSupersededBy(),n.name=this.getName(),n.description=this.getDescription(),n.ranges=this.getRanges(e,t),n.domains=this.getDomains(e,t),n.superProperties=this.getSuperProperties(e,t),n.subProperties=this.getSubProperties(e,t),n.inverseOf=this.getInverseOf(),n}}},function(e,t,n){const r=n(7);e.exports=class{constructor(e,t){this.IRI=e,this.graph=t}getIRI(e=!1){return e?this.IRI:r.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"schema:Enumeration"}getVocabulary(){const e=this.graph.enumerations[this.IRI];return r.isNil(e["schema:isPartOf"])?null:e["schema:isPartOf"]}getSource(){const e=this.graph.enumerations[this.IRI];return r.isNil(e["dc:source"])?r.isNil(e["schema:source"])?null:e["schema:source"]:e["dc:source"]}isSupersededBy(){const e=this.graph.enumerations[this.IRI];return r.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(e="en"){const t=this.graph.enumerations[this.IRI]["rdfs:label"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getDescription(e="en"){const t=this.graph.enumerations[this.IRI]["rdfs:comment"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getEnumerationMembers(e=!1,t=null){const n=this.graph.enumerations[this.IRI],i=[];if(i.push(...n["soa:hasEnumerationMember"]),e){const e=this.getSubClasses(!0,null);for(const t of e){const e=this.graph.enumerations[t];r.isNil(e)||i.push(...e["soa:hasEnumerationMember"])}}return r.applyFilter(r.uniquifyArray(i),t,this.graph)}getProperties(e=!0,t=null){const n=this.graph.enumerations[this.IRI],i=[];return i.push(...n["soa:hasProperty"]),e&&i.push(...this.graph.reasoner.inferPropertiesFromSuperClasses(n["rdfs:subClassOf"])),r.applyFilter(r.uniquifyArray(i),t,this.graph)}getSuperClasses(e=!0,t=null){const n=this.graph.enumerations[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferImplicitSuperClasses(this.IRI)):i.push(...n["rdfs:subClassOf"]),r.applyFilter(r.uniquifyArray(i),t,this.graph)}getSubClasses(e=!0,t=null){const n=this.graph.enumerations[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferImplicitSubClasses(this.IRI)):i.push(...n["soa:superClassOf"]),r.applyFilter(r.uniquifyArray(i),t,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(e=!0,t=null){const n={};return n.id=this.getIRI(!0),n.IRI=this.getIRI(),n.type=this.getTermType(),n.vocabulary=this.getVocabulary(),n.source=this.getSource(),n.supersededBy=this.isSupersededBy(),n.name=this.getName(),n.description=this.getDescription(),n.enumerationMembers=this.getEnumerationMembers(e,t),n.superClasses=this.getSuperClasses(e,t),n.subClasses=this.getSubClasses(e,t),n.properties=this.getProperties(e,t),n}}},function(e,t,n){const r=n(7);e.exports=class{constructor(e,t){this.IRI=e,this.graph=t}getIRI(e=!1){return e?this.IRI:r.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"soa:EnumerationMember"}getVocabulary(){let e=this.graph.enumerationMembers[this.IRI];return r.isNil(e["schema:isPartOf"])?null:e["schema:isPartOf"]}getSource(){let e=this.graph.enumerationMembers[this.IRI];return r.isNil(e["dc:source"])?r.isNil(e["schema:source"])?null:e["schema:source"]:e["dc:source"]}isSupersededBy(){let e=this.graph.enumerationMembers[this.IRI];return r.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(e="en"){let t=this.graph.enumerationMembers[this.IRI]["rdfs:label"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getDescription(e="en"){let t=this.graph.enumerationMembers[this.IRI]["rdfs:comment"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getDomainEnumerations(e=!1,t=null){let n=this.graph.enumerationMembers[this.IRI],i=[];if(i.push(...n["soa:enumerationDomainIncludes"]),e){let e=JSON.parse(JSON.stringify(i));for(const t of e)i.push(...this.graph.reasoner.inferImplicitSuperClasses(t));i=r.applyFilter(r.uniquifyArray(i),{termType:"Enumeration"},this.graph)}return r.applyFilter(r.uniquifyArray(i),t,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(e=!1,t=null){let n={};return n.id=this.getIRI(!0),n.IRI=this.getIRI(),n.type=this.getTermType(),n.vocabulary=this.getVocabulary(),n.source=this.getSource(),n.supersededBy=this.isSupersededBy(),n.name=this.getName(),n.description=this.getDescription(),n.domainEnumerations=this.getDomainEnumerations(e,t),n}}},function(e,t,n){const r=n(7);e.exports=class{constructor(e,t){this.IRI=e,this.graph=t}getIRI(e=!1){return e?this.IRI:r.toAbsoluteIRI(this.IRI,this.graph.context)}getTermType(){return"schema:DataType"}getVocabulary(){const e=this.graph.dataTypes[this.IRI];return r.isNil(e["schema:isPartOf"])?null:e["schema:isPartOf"]}getSource(){const e=this.graph.dataTypes[this.IRI];return r.isNil(e["dc:source"])?r.isNil(e["schema:source"])?null:e["schema:source"]:e["dc:source"]}isSupersededBy(){const e=this.graph.dataTypes[this.IRI];return r.isString(e["schema:supersededBy"])?e["schema:supersededBy"]:null}getName(e="en"){const t=this.graph.dataTypes[this.IRI]["rdfs:label"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getDescription(e="en"){const t=this.graph.dataTypes[this.IRI]["rdfs:comment"];return r.isNil(t)||r.isNil(t[e])?null:t[e]}getSuperDataTypes(e=!0,t=null){const n=this.graph.dataTypes[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferImplicitSuperDataTypes(this.IRI)):i.push(...n["rdfs:subClassOf"]),r.applyFilter(r.uniquifyArray(i),t,this.graph)}getSubDataTypes(e=!0,t=null){const n=this.graph.dataTypes[this.IRI],i=[];return e?i.push(...this.graph.reasoner.inferImplicitSubDataTypes(this.IRI)):i.push(...n["soa:superClassOf"]),r.applyFilter(r.uniquifyArray(i),t,this.graph)}toString(){return JSON.stringify(this.toJSON(!1,null),null,2)}toJSON(e=!0,t=null){const n={};return n.id=this.getIRI(!0),n.IRI=this.getIRI(),n.type=this.getTermType(),n.vocabulary=this.getVocabulary(),n.source=this.getSource(),n.supersededBy=this.isSupersededBy(),n.name=this.getName(),n.description=this.getDescription(),n.superDataTypes=this.getSuperDataTypes(e,t),n.subDataTypes=this.getSubDataTypes(e,t),n}}},function(e,t,n){const r=n(7);e.exports=class{constructor(e){this.graph=e}inferPropertiesFromSuperClasses(e){const t=[];for(let n=0;n<e.length;n++){let r=this.graph.classes[e[n]];void 0===r&&(r=this.graph.enumerations[e[n]]),void 0!==r&&(t.push(...r["soa:hasProperty"]),0!==r["rdfs:subClassOf"].length&&t.push(...this.inferPropertiesFromSuperClasses(r["rdfs:subClassOf"])))}return r.uniquifyArray(t)}inferImplicitSuperClasses(e){let t=this.graph.classes[e],n=[];if(void 0===t&&(t=this.graph.enumerations[e]),void 0!==t){n.push(...t["rdfs:subClassOf"]);let e=r.copByVal(n);do{let t=[];for(let n=0;n<e.length;n++){let r=this.graph.classes[e[n]];void 0===r&&(r=this.graph.enumerations[e[n]]),void 0!==r&&t.push(...r["rdfs:subClassOf"])}t=r.uniquifyArray(t),e=r.copByVal(t),n.push(...t)}while(0!==e.length);n=r.uniquifyArray(n)}return n}inferImplicitSubClasses(e){let t=this.graph.classes[e],n=[];if(void 0===t&&(t=this.graph.enumerations[e]),void 0!==t){n.push(...t["soa:superClassOf"]);let e=r.copByVal(n);do{let t=[];for(let n=0;n<e.length;n++){let r=this.graph.classes[e[n]];void 0===r&&(r=this.graph.enumerations[e[n]]),void 0!==r&&t.push(...r["soa:superClassOf"])}t=r.uniquifyArray(t),e=r.copByVal(t),n.push(...t)}while(0!==e.length);return n=r.uniquifyArray(n),n}return n}inferImplicitSuperDataTypes(e){const t=this.graph.dataTypes[e];let n=[];if(void 0!==t){n.push(...t["rdfs:subClassOf"]);let e=r.copByVal(n);do{let t=[];for(let n=0;n<e.length;n++){const r=this.graph.dataTypes[e[n]];void 0!==r&&t.push(...r["rdfs:subClassOf"])}t=r.uniquifyArray(t),e=r.copByVal(t),n.push(...t)}while(0!==e.length);n=r.uniquifyArray(n)}return n}inferImplicitSubDataTypes(e){const t=this.graph.dataTypes[e];let n=[];if(void 0!==t){n.push(...t["soa:superClassOf"]);let e=r.copByVal(n);do{let t=[];for(let n=0;n<e.length;n++){const r=this.graph.dataTypes[e[n]];void 0!==r&&t.push(...r["soa:superClassOf"])}t=r.uniquifyArray(t),e=r.copByVal(t),n.push(...t)}while(0!==e.length);n=r.uniquifyArray(n)}return n}inferSubProperties(e){const t=this.graph.properties[e];let n=[];if(void 0!==t){n.push(...t["soa:superPropertyOf"]);let e=r.copByVal(n);do{let t=[];for(let n=0;n<e.length;n++){const r=this.graph.properties[e[n]];void 0!==r&&t.push(...r["soa:superPropertyOf"])}t=r.uniquifyArray(t),e=r.copByVal(t),n.push(...t)}while(0!==e.length);n=r.uniquifyArray(n)}return n}inferSuperProperties(e){const t=this.graph.properties[e];let n=[];if(void 0!==t){n.push(...t["rdfs:subPropertyOf"]);let e=r.copByVal(n);do{let t=[];for(let n=0;n<e.length;n++){const r=this.graph.properties[e[n]];void 0!==r&&t.push(...r["rdfs:subPropertyOf"])}t=r.uniquifyArray(t),e=r.copByVal(t),n.push(...t)}while(0!==e.length);n=r.uniquifyArray(n)}return n}}},function(e,t,n){e.exports=n(78)},function(e,t,n){"use strict";var r=n(1),i=n(30),o=n(79),s=n(36);function a(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var l=a(n(33));l.Axios=o,l.create=function(e){return a(s(l.defaults,e))},l.Cancel=n(37),l.CancelToken=n(92),l.isCancel=n(32),l.all=function(e){return Promise.all(e)},l.spread=n(93),e.exports=l,e.exports.default=l},function(e,t,n){"use strict";var r=n(1),i=n(31),o=n(80),s=n(81),a=n(36);function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=l},function(e,t,n){"use strict";var r=n(1);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(82),o=n(32),s=n(33);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(35);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(87),i=n(88);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(1),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(37);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"createIABox",(function(){return he})),n.d(t,"util",(function(){return be}));var r=n(0),i=n.n(r),o=(n(38),n(15),"https://semantify.it"),s="https://smtfy.it/";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return e.split(":")[1]}function d(e){h(e,5e3)}function h(e,t){var n={content:'<table class="snackbar-table"><td><i class="material-icons snackbar-icon">info</i><span>  '+e+"</span></td></table>",style:"toast",timeout:t||4e3,htmlAllowed:!0,onClose:function(){}};i.a.snackbar(n)}function f(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}function p(e,t){y(e,null,t)}function y(e,t,n){i.a.ajax({type:"GET",url:e,headers:t,success:function(e){n(e)},error:function(){n()}})}function g(e,t,n,r){m("POST",e,"application/json ; charset=utf-8",t,n,r)}function m(e,t,n,r,o,s){i.a.ajax({type:e,contentType:n,headers:r,url:t,data:JSON.stringify(o),success:function(e){s(e)},error:function(e){s(e)}})}function v(e){return"object"===c(e)&&(e=JSON.stringify(e,null,2)),(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"}))}function b(e){var t=document.createElement("textarea");document.body.appendChild(t),t.setAttribute("id","dummy_id"),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t),h("Annotation copied into your clipboard",3e3)}function w(e){return"function appendAnnotation() {\n\tvar element = document.createElement('script');\n\telement.type = 'application/ld+json';\n\telement.text = this.responseText;\n\tdocument.querySelector('head').appendChild(element);\n}\nvar request = new XMLHttpRequest();\nrequest.onload = appendAnnotation;\nrequest.open(\"get\", \""+s+e+'", true);\nrequest.send();'}var x=function(e){var t={};return function n(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.pop(),a=JSON.stringify(i);t[a]&&t[a].ready?s(t[a].data):t[a]&&!t[a].ready?setTimeout((function(){return n.apply(void 0,i.concat([s]))}),50):(t[a]={ready:!1,data:null},e.apply(void 0,i.concat([function(e){t[a].ready=!0,t[a].data=e,s(e)}])))}};var I=0;var S,O=function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))};function A(e,t,n){try{return"".concat(n,":\n").concat((r=e.getProperty(t).getDescription(),(i=document.createElement("DIV")).innerHTML=r,i.textContent||i.innerText||""))}catch(e){return n}var r,i}function C(e,t){try{return e.getClass(t).getSubClasses().map((function(e){return u(e)}))}catch(e){return[t]}}var j={name:"Save",icon:"save",createJsonLD:!0,onclick:function(e){var t=[],n={};if(n.content=e.jsonLd,n.dsHash=e.dsHash,t.push(n),null!=e.jsonLd){var r,s,a,l=e.options.smtfySemantifyWebsiteUID,c=e.options.smtfySemantifyWebsiteSecret,u=i()("#panel-"+e.panelId).data("smtfyAnnId"),f=(i()("#panel-"+e.panelId).data("smtfyWebId"),i()("#panel-"+e.panelId).data("smtfyWebSecret"));if(u)r=o+"/api/annotation/uid/"+u,s={"website-secret":f},a={content:e.jsonLd},m("PATCH",r,"application/json ; charset=utf-8",s,a,(function(e){e&&"Not Found"!==e.statusText&&"Forbidden"!==e.statusText?window.is_typo3?i.a.ajax({type:"post",url:window.myAjax.ajaxurl,data:{action:"iasemantify_refresh_cache"},success:function(e){h("Successfully updated Annotation")},error:function(e){d("An error occurred while saving to typo3")}}):h("Successfully updated Annotation"):d("An error occurred. Please check your semantify api-key!")}));else g(o+"/api/annotation/"+l,{"website-secret":c},t,(function(t){if(t&&!t.message){h("Successfully saved Annotation to semantify.it");var n=t[0].UID;i()("#panel-"+e.panelId).data("smtfyAnnId",n).data("smtfyWebId",l).data("smtfyWebSecret",c);var r=i()("#ia-data").attr("data-post_id"),o=i()("#ia-data").attr("data-nonce");i.a.ajax({type:"post",url:window.myAjax.ajaxurl,data:{action:"iasemantify_push_ann",post_id:r,nonce:o,ann_id:n,ds_hash:e.dsHash,web_id:l,web_secret:c},success:function(e){},error:function(e){d("An error occurred while saving to "+(window.is_typo3?"typo3":"wordpress"))}})}else d("An error occurred. Please check your semantify api-key! ("+t.message+")")}))}}},N={name:"Delete",icon:"close",createJsonLD:!1,onclick:function(e){var t=i()("#panel-"+e.panelId).data("smtfyAnnId"),n=i()("#panel-"+e.panelId).data("smtfyWebId"),r=i()("#panel-"+e.panelId).data("smtfyWebSecret");if(f(window.IA_currently_added_annotations,t),window.IA_delete_id_whitelist.push(t),!t||confirm("Do you really want to delete this annotation?")){i()("#panel-"+e.panelId).hide(500);var o=i()("#ia-data").attr("data-post_id"),s=i()("#ia-data").attr("data-nonce");i.a.ajax({type:"post",url:window.myAjax.ajaxurl,data:{action:"iasemantify_delete_ann",post_id:o,nonce:s,ann_id:e.annId,ds_hash:e.dsHash||"NO_DS",web_id:n,web_secret:r},success:function(e){},error:function(e){d("An error occurred while deleting from wordpress")}})}}},E={name:"Copy",icon:"content_copy",createJsonLD:!0,onclick:function(e){e.jsonLd&&b(JSON.stringify(e.jsonLd,null,2))}},T={name:"Close",icon:"close",createJsonLD:!1,onclick:function(e){i()("#panel-"+e.panelId.toString()).hide()}},R={name:"Clear",icon:"delete",onclick:function(e){e.inputFields.forEach((function(t){var n=t.slice(t.indexOf("_")+1,t.indexOf("_",t.indexOf("_")+1));e.panelId.toString()===n&&i()("#"+t).val("")}))}},k={name:"Save",icon:"save",onlyIcon:!1,createJsonLD:!0,onclick:function(e){if(e.jsonLd){var t=[],n={};n.content=e.jsonLd,n.dsHash=e.dsHash,t.push(n);var r={htmlAllowed:!0,style:"toast",timeout:3e3},a={"website-secret":e.options.smtfySemantifyWebsiteSecret};g(o+"/api/annotation/"+e.options.smtfySemantifyWebsiteUID,a,t,(function(n){if(console.log(n),n&&n[0]&&n[0].UID){r.content="Successfully saved Annotation to semantify.it",i.a.snackbar(r);var a=s+n[0].UID,l=document.createElement("div");document.body.appendChild(l),l.setAttribute("id","IA_preview_id"),i()("#IA_preview_id").append('<div class="bootstrap semantify semantify-instant-annotations"><div class="modal fade" id="IA_saveModal" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h3 class="modal-title">Successfully saved JSON-LD annotation!</h3></div><div class="modal-body"><pre id="IA_preview_textArea" style="max-height: 300px;"></pre><button class="btn btn-default" id="IA_preview_copy" style="float: right; position:relative;bottom:55px; right:5px "> <i class="material-icons">content_copy</i> Copy</button><br/>Saved annotation "<b>'+n[0].name+'" </b><div id="IA_toWebsite" style="display: inline"></div> at: <a target="_blank" id="IA_annUrl" href="'+a+'">'+a+'</a> <br/><br/><button class="btn btn-default" style="margin:0; padding: 2px; text-transform:none; font-weight:normal" id="IA_JS_inject"><span class="caret"/>  How do i get this annotation into my website?</button><br/><br/><br/><div id="IA_loginSection"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div></div>'),i()("#IA_preview_copy").click((function(){b(JSON.stringify(e.jsonLd,null,2))})),i()("#IA_JS_inject").after('<div id="IA_JS_inject_area" style="display:none;"><br/> Add this Javascript code to your Website: <pre id="IA_JS_inject_code"></pre><button class="btn btn-default" id="IA_inject_copy" style="float: right; position:relative;bottom:55px; right:5px "> <i class="material-icons">content_copy</i> Copy</button></div>');var c=w(n[0].UID);i()("#IA_inject_copy").click((function(){b(c)})),i()("#IA_JS_inject_code").html(c),i()("#IA_JS_inject").click((function(){i()("#IA_JS_inject_area").html()&&("none"===i()("#IA_JS_inject_area").css("display")?i()("#IA_JS_inject_area").slideDown(200):i()("#IA_JS_inject_area").slideUp(200))})),i()("#IA_preview_textArea").html(v(JSON.stringify(e.jsonLd,null,2)));var u=function(){y(o+"/api/website",{Authorization:"Bearer "+S},(function(e){e?(i()("#IA_loginSection").after('<div class="list-group" id="IA_my_websites"><h4>Your websites: (Select one to save your annotation to) </h4> </div>'),e.forEach((function(e){i()("#IA_my_websites").append('<button type="button" class="list-group-item list-group-item-action" id="IA_'+e.uid+'" style="padding: 5px 0">'+e.name+" ("+e.domain+")</button>"),i()("#IA_"+e.uid).click((function(){i()("#IA_my_websites").slideUp(100),console.log("ele",e);var n={"website-secret":e.secret};g(o+"/api/annotation/"+e.uid,n,t,(function(t){if(console.log(t),t&&t[0]&&t[0].UID){console.log("saved",t),r.content="Saved the annotation to: "+e.name+" ("+e.domain+")",i.a.snackbar(r),i()("#IA_toWebsite").append("to website <b>"+e.name+(e.domain?" ("+e.domain+")":"")+"</b>");var n=s+t[0].UID;i()("#IA_annUrl").html(n).attr("href",n);var o=w(t[0].UID);i()("#IA_inject_copy").click((function(){b(o)})),i()("#IA_JS_inject_code").html(o)}else r.content="Failed to save the annotation to: "+e.name+" ("+e.domain+")",i.a.snackbar(r)}))}))}))):(r.content="There has been an error when retrieving your websites",i.a.snackbar(r))}))};S?u():i()("#IA_loginSection").append('<p>Want to save this Annotation to your Semantify.it account?</p><button type="button" class="btn button-sti-red" id="IA_loginBtn" style="margin:0 10px 0 0;padding:6px 30px; line-height:24px;">Login</button><button type="button" class="btn button-sti-red" id="IA_registerBtn" style="padding:6px 30px" onclick=" window.open(\'https://semantify.it/register\',\'_blank\')" title="Register at semantify.it"> <i class="material-icons">open_in_new</i>  Register</button><div id="IA_credentialsSection" hidden><input type="text" class="form-control" id="IA_username" placeholder="Username/Email" title="Username/Email"><input type="password" class="form-control" id="IA_password" placeholder="Password" title="Password"></div>');var d=function(e){13===e.keyCode&&i()("#IA_loginBtn").click()};i()("#IA_username").keyup((function(e){d(e)})),i()("#IA_password").keyup((function(e){d(e)})),i()("#IA_saveModal").modal().on("hidden.bs.modal",(function(){i()(this).remove()})),i()("#IA_loginBtn").click((function(){if("none"===i()("#IA_credentialsSection").css("display"))i()("#IA_credentialsSection").slideDown(100);else{var e={identifier:i()("#IA_username").val(),password:i()("#IA_password").val()};g(o+"/api/login",void 0,e,(function(e){e?(i()("#IA_loginSection").slideUp(100),S=e.token,u()):(r.content="Couldn't log in to semantify.it",i.a.snackbar(r))}))}}))}else r.content="There was an error saving annotation to semantify.it",i.a.snackbar(r)}))}}},_={name:"Preview",icon:"find_in_page",createJsonLD:!0,onclick:function(e){if(null!==e.jsonLd){var t=document.createElement("div");document.body.appendChild(t),t.setAttribute("id","preview_id"),i()("#preview_id").append('<div class="bootstrap semantify semantify-instant-annotations"><div class="modal fade" id="previewModal" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Preview JSON-LD</h4></div><div class="modal-body"><pre id="preview_textArea" style="max-height: 500px;"></pre><button class="btn btn-default" id="IA_simple_preview_copy" style="float: right; position:relative;bottom:55px; right:5px "> <i class="material-icons">content_copy</i> Copy</button></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div></div>'),i()("#preview_textArea").html(v(JSON.stringify(e.jsonLd,null,2))),i()("#previewModal").modal().on("hidden.bs.modal",(function(){i()(this).remove()})),i()("#IA_simple_preview_copy").click((function(){b(JSON.stringify(e.jsonLd,null,2))}))}}},D=[_,R,k],L=[_,j,N];function B(e){var t=[];switch(e){case"no":t=[];break;case"default":case void 0:case null:t=D.slice();break;case"wp_delete":t=[N];break;case"wp_default":t=L.slice();break;default:e.split("+").forEach((function(e){switch(e){case"preview":t.push(_);break;case"clear":t.push(R);break;case"delete":t.push(T);break;case"save":t.push(k);break;case"copy":t.push(E);break;case"wpsave":t.push(j)}}))}return t}function P(e){var t,n=[],r=!0,i=!1,o=void 0;try{for(var s,a=(t=e,Array.isArray(t)?t:[t])[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;"string"==typeof l?n=n.concat(B(l)):n.push(l)}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}var M=n(21),U=n.n(M);var J=x((function(e,t){var n=new U.a;n.addVocabularies(e).then((function(){return t(n)}))})),F=function(e,t){!function(e,t){var n=[];e&&e["@graph"][0]&&Array.isArray(e["@graph"][0]["ds:usedVocabularies"])&&(n=JSON.parse(JSON.stringify(e["@graph"][0]["ds:usedVocabularies"]))),e&&e["@graph"][0]&&e["@graph"][0]["schema:schemaVersion"]?q((function(r){var i;r.constructSDOVocabularyURL((i=e["@graph"][0]["schema:schemaVersion"],/.*schema\.org\/version\/([0-9\.]+)\//g.exec(i)[1])).then((function(e){n.push(e),t(n)}))})):t(n)}(e,(function(e){J(e,t)}))},V=function(e){var t=new U.a;t.constructSDOVocabularyURL("latest").then((function(e){return t.addVocabularies([e])})).then((function(){return e(t)}))},q=x(V),z=function(e,t){try{return e.getEnumeration(t).getEnumerationMembers()}catch(e){return}};function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Y=p,W=u,X=function(e){var t=[];return i.a.each(e,(function(e,n){-1==i.a.inArray(n,t)&&t.push(n)})),t},$=function(e){for(var t=[e],n=!1;!n&&t.length;){var r=t.shift();n=Object.keys(r).some((function(e){if("@type"!==e&&"@context"!==e&&r[e]instanceof Array&&!O(r[e]))return!0;null!==r[e]&&"object"===c(r[e])&&t.push(r[e])}))}return n},Q=v,K=function e(t){var n,r=arguments[1]||"",i=arguments[2]||{};for(n in t)t.hasOwnProperty(n)&&("object"!==c(t[n])||O(t[n])?i[r+n]=t[n]:e(t[n],r+n+".",i));return i},Z=function(e,t,n,r){for(var i=e,o=t.split("-"),s=o.length,a=0;a<s-1;a++){var l=o[a];i[l]||(i[l]={}),i=i[l]}var c=o[s-1];return r?Array.isArray(i[c])?i[c].push(n):i[c]?i[c]=[i[c],n]:i[c]=n:i[c]=n,e},ee=function(e){var t=[];return i.a.each(e,(function(e,n){t.push("<li>"+n+"</li> \n")})),t},te=h,ne=function(e){return'[id="'+e+'"]'},re=function(e){return e.startsWith("schema")?u(e):e},ie=function(e){return l(e).reduce((function(e,t){var n=a(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})},oe=function(){return(++I).toString()},se=O,ae=[],le=[],ce=[];var ue=0;var de=x((function(e,t,n){var r="".concat(o,"/api/domainSpecification/").concat(t?"hash/":"").concat(e);Y(r,(function(r){if(!r)throw new Error("Ds with hash/id '"+e+"'does not exist");r.hash=t?e:null,n(r)}))}));function he(){fe.apply(void 0,arguments)}function fe(e,t,n,r){var s=i()("#"+e);if(!s)throw new Error("Cannot find div with id "+e);var a={panelId:"Panel"+ue++};s.append('<div id="loading'+a.panelId+'" class="col-lg-3 col-md-4 col-sm-6 text-center" style="margin: 10px; padding: 10px; background: white; border-radius: 10px;"><img src="'+o+'/images/loading.gif"></div>');var l=Object.assign({buttons:"default",title:void 0,panelColClass:"col-lg-3 col-md-4 col-sm-6 col-xs-12",withSubClassSelection:!0,withMultValues:!1,annotation:void 0,smtfyAnnotationUID:void 0,smtfySemantifyWebsiteUID:"Hkqtxgmkz",smtfySemantifyWebsiteSecret:"ef0a64008d0490fc4764c2431ca4797b"},n);if(l.buttons=P(l.buttons),t)if("string"==typeof t)de(t,!0,(function(e){pe(a,s,e,l,r)}));else{if(!t.dsId)throw new Error('Either provide ds as string or {dsId: "yourdsid"}');de(t.dsId,!1,(function(e){pe(a,s,e,l,r)}))}else pe(a,s,void 0,l,r)}function pe(e,t,n,r,s){F(n&&n.content,(function(a){!function(e,t,n,r,s,a){var l=e.panelId;i()("#loading"+l).hide();var c=n&&n.content["@graph"][0],u=r&&r.title?r.title:void 0===c?"Domainspecification not found":c["schema:name"],d=u,h=r&&r.buttons&&r.buttons.length>0?'<div class="panel-footer text-center" id="panel-footer-'+l+'"></div>':"";if(t.append('<div class="'+r.panelColClass+'" id="panel-'+l+'"><div class="panel panel-info "><div class="panel-heading sti-red"> <h3>'+u+'</h3></div> <div class="panel-body" id="panel-body-'+l+'"></div>'+h+"</div></div>"),n){var f;if(Array.isArray(c["sh:targetClass"])){f=[];var p=!0,y=!1,g=void 0;try{for(var m,v=c["sh:targetClass"][Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var b=m.value;f.push(re(b))}}catch(e){y=!0,g=e}finally{try{p||null==v.return||v.return()}finally{if(y)throw g}}}else f=re(c["sh:targetClass"]);Array.isArray(f)&&1===f.length&&(f=f[0]);var w={panelId:l,name:d,root:f};ae.push(w);var x=c["sh:property"],I=[],S=[],O=function e(t,n,r,i,o,s,a){var l=[];for(var c in t)if(t.hasOwnProperty(c)){var u=t[c],d=ye(u["sh:or"])[0],h=!u["sh:minCount"]||0===u["sh:minCount"],f=!u["sh:maxCount"]||u["sh:maxCount"]>1,p=re(u["sh:path"]),y=z(s,d["sh:class"]);if(!d["sh:node"]&&(d["sh:datatype"]||d["sh:in"]||y)){var g={simpleName:p,name:(""===n?"":n+"-")+p,type:d["sh:datatype"],fatherType:r,isOptional:h,multipleValuesAllowed:!!a&&f,rootIsOptional:o};if(d["sh:in"]||y){g.type="Enumeration";var m=[];ye(d["sh:in"]||y).forEach((function(e){"object"===G(e)&&e["@id"]?m.push(W(e["@id"])):"string"==typeof e&&m.push(W(e))})),g.enums=m}l.push(g)}else if(d["sh:node"]){var v,b=""===n?p:n+"-"+p,w=b+"-@type";if(Array.isArray(d["sh:class"])){v=[];var x=!0,I=!1,S=void 0;try{for(var O,A=d["sh:class"][Symbol.iterator]();!(x=(O=A.next()).done);x=!0){var C=O.value;v.push(W(C))}}catch(e){I=!0,S=e}finally{try{x||null==A.return||A.return()}finally{if(I)throw S}}}else v=W(d["sh:class"]);var j={name:v,path:w,panelId:i};le.push(j);var N=!0===o||h;l=l.concat(e(d["sh:node"]["sh:property"],b,d["sh:class"],i,N,s,a))}else console.log("UNKOWN PROP",u)}return l}(x,"",f,l,!1,s,r.withMultValues),j=!0,N=!1,E=void 0;try{for(var T,R=O[Symbol.iterator]();!(j=(T=R.next()).done);j=!0){var k=T.value;k.isOptional||k.rootIsOptional?S.push(k):I.push(k)}}catch(e){N=!0,E=e}finally{try{j||null==R.return||R.return()}finally{if(N)throw E}}for(var _=0,D=I;_<D.length;_++){var L=D[_];ge(l,L.name,A(s,L.simpleName,L.name),L.type,L.enums,"#panel-body-",L.isOptional,L.rootIsOptional,L.multipleValuesAllowed)}if(S.length>0){i()("#panel-body-"+l).append('<button type="button" class="btn btn-block btn-default text-left" id="panel-body-opt-btn-'+l+'" style="background-color: lightgrey;">Optional<span class="caret"></button>').append('<div id="panel-body-opt-'+l+'"> </div>'),X=l,i()("#panel-body-opt-btn-"+X).click((function(){var e=i()("#panel-body-opt-"+X);"none"===e.css("display")?e.slideDown(500):e.slideUp(500)}));for(var B=0,P=S;B<P.length;B++){L=P[B];ge(l,L.name,A(s,L.simpleName,L.name),L.type,L.enums,"#panel-body-opt-",L.isOptional,L.rootIsOptional,L.multipleValuesAllowed)}}if(i()("#panel-body-opt-"+l).slideUp(0),r.withSubClassSelection)if(i()("#panel-body-"+l).append("<hr>"),Array.isArray(f)){b=0;var M=!0,U=!1,J=void 0;try{for(var F,V=f[Symbol.iterator]();!(M=(F=V.next()).done);M=!0){w=F.value;var q=C(s,w).sort();i()("#panel-body-"+l).append('<select name="select" class="form-control input-myBackground input-mySelect" id="sub_'+l+"_"+b+'" title="Select a sub-class if you want to specify further">'),(H=i()("#sub_"+l+"_"+b)).append('<option value="'+w+'">Default: '+w+"</option>"),q.forEach((function(e){H.append('<option value="'+e+'">'+e+"</option>")})),H.append("</select>"),b++}}catch(e){U=!0,J=e}finally{try{M||null==V.return||V.return()}finally{if(U)throw J}}}else{var H;q=C(s,f).sort();i()("#panel-body-"+l).append('<select name="select" class="form-control input-myBackground input-mySelect" id="sub_'+l+'" title="Select a sub-class if you want to specify further">'),(H=i()("#sub_"+l)).append('<option value="'+f+'">Default: '+f+"</option>"),q.forEach((function(e){H.append('<option value="'+e+'">'+e+"</option>")})),H.append("</select>")}}else i()("#panel-body-"+l).html('<pre  style="max-height:400px" id="ia_panel_'+l+'_content"></pre>');var X;var $=!0,Q=!1,K=void 0;try{for(var Z,ee=r.buttons[Symbol.iterator]();!($=(Z=ee.next()).done);$=!0){var te=Z.value;!function(t){var o=te.name,a=te.onclick,l=te.additionalClasses,c=te.hasOwnProperty("icon")?te.icon:null,u=!!te.createJsonLD,d=!1!==te.onlyIcon;i()("#panel-footer-"+t).append('<button class="btn button-sti-red" id="panel-footer-btn-'+o+"-"+t+'" style="margin: 5px 5px; padding: 10px 10px" '+(l||"")+' title="'+o+'" >'+(c?'<i class="material-icons">'+c+"</i>":o)+(d?"":" "+o)+"</button>"),i()("#panel-footer-btn-"+o+"-"+t).click((function(o){o.preventDefault(),a({jsonLd:i()("#panel-footer-btn-Preview-"+t).prop("already_annotation_created")?i()("#panel-footer-btn-Preview-"+t).prop("already_annotation_created"):u?ve(t,s):null,dsHash:n&&n.hash,annId:i()("#panel-"+t).data("smtfyAnnId"),webId:i()("#panel-"+t).data("smtfyWebId"),panelId:t,inputFields:ce,options:r,iaBox:e})}))}(l)}}catch(e){Q=!0,K=e}finally{try{$||null==ee.return||ee.return()}finally{if(Q)throw K}}r.annotation?me(e,n,r,a):r.smtfyAnnotationUID?function(e,t,n,r){i()("#panel-"+e.panelId).data("smtfyAnnId",n.smtfyAnnotationUID).data("smtfyWebId",n.smtfySemantifyWebsiteUID).data("smtfyWebSecret",n.smtfySemantifyWebsiteSecret),Y(o+"/api/annotation/short/"+n.smtfyAnnotationUID,(function(o){"string"==typeof o&&(o=JSON.parse(o)),void 0===o?(i()("#panel-body-"+e.panelId).html("There was an error loading the annotation with id: <b>"+n.smtfyAnnotationUID+"</b> from the server!\n Reload the page or check if the annotation was deleted"),i()("#panel-footer-btn-Preview-"+e.panelId).prop("disabled",!0),i()("#panel-footer-btn-Save-"+e.panelId).prop("disabled",!0)):(n.annotation=o,me(e,t,n,r))}))}(e,n,r,a):a&&a(e)}(e,t,n,r,a,s)}))}var ye=function(e){return e["@list"]?e["@list"]:e};function ge(e,t,n,r,o,s,a,l,c,u,d){var h="IA_"+e+"_"+t+(d?"_"+d:""),f=u?ne(u):s+e;switch(r){case"xsd:string":case"xsd:anyURI":case"xsd:double":case"xsd:float":case"xsd:integer":i()(f).append('<input type="text" class="form-control input-myBackground" id="'+h+'" placeholder="'+t+'" title="'+n+'">');break;case"xsd:boolean":i()(f).append('<select style="color:#aaa" name="select" class="form-control input-myBackground" id="'+h+'" title=" '+n+'"></select>'),i()(ne(h)).append('<option value="" selected style="color:#aaa">'+t+'</option><option  style="color:#000" value="true">true</option><option style="color:#000" value="false">false</option>'),i()(ne(h)).change((function(){""==i()(this).val()?i()(this).css({color:"#aaa"}):i()(this).css({color:"#000"})}));break;case"xsd:date":i()(f).append('<input type="text" class="form-control input-myBackground" id="'+h+'" placeholder="'+t+'" title="'+n+'">'),i()(ne(h)).datetimepicker({format:"YYYY-MM-DD"});break;case"xsd:dateTime":i()(f).append('<input type="text" class="form-control input-myBackground" id="'+h+'" placeholder="'+t+'" title="'+n+'">'),i()(ne(h)).datetimepicker({format:"YYYY-MM-DDTHH:mm"});break;case"xsd:time":i()(f).append('<input type="text" class="form-control input-myBackground" id="'+h+'" placeholder="'+t+'" title="'+n+'">'),i()(ne(h)).datetimepicker({format:"HH:mm"});break;case"Enumeration":i()(f).append('<select style="color:#bfc0bf;'+(c?"-webkit-appearance: none;":"")+'" name="select" class="form-control input-myBackground" id="'+h+'" title=" '+n+'">'),i()(ne(h)).change((function(){""==i()(this).val()?i()(this).css({color:"#bfc0bf"}):i()(this).css({color:"#555555"})}));var p=i()(ne(h));p.append('<option value="" selected style="color:#bfc0bf">Select: '+t+"</option>"),o.forEach((function(e){p.append('<option style="color:#555555" value="'+e+'">'+e+"</option>")})),p.append("</select>")}c&&!u&&(i()(f).append('<span id="'+h+'_addmore" style="position: relative;color:lightgray;cursor: pointer;float:right;top: -38px;right: 4px;height: 0;"><i class="material-icons">add_circle_outline</i></span>'),i()(f).append('<div id="'+h+'_moreContainer" style="margin-right:30px"/>'),i()(ne(h+"_addmore")).click((function(){ge(e,t,n,r,o,s,a,l,c,h+"_moreContainer",oe())}))),u&&(i()(f).append('<span id="'+h+'_remove" style="position: relative;color:lightgray;cursor: pointer;float:right;top: -38px;right: -30px;height: 0;"><i class="material-icons">clear</i></span>'),i()(ne(h+"_remove")).click((function(){i()(ne(h)).remove(),i()(ne(h+"_remove")).remove()}))),i()(ne(h)).data("type",r).data("enumerations",o).data("isOptional",a).data("rootIsOptional",l).data("multipleValuesAllowed",c).data("name",t),ce.push(h)}function me(e,t,n,r){var o=e.panelId,s=n.annotation;if($(s))i()("#panel-body-"+o).html('<pre id="ia_panel_'+o+'_content"></pre> To edit this annotation, please visit <a href="https://semantify.it">semantify.it</a>  and use the full editor. In this version, no multiple values are allowed! '),i()("#panel-footer-btn-Preview-"+o).prop("already_annotation_created",s),i()("#panel-footer-btn-Save-"+o).prop("disabled",!0),(A=i()("#ia_panel_"+o+"_content")).html(Q(JSON.stringify(s,null,2))),A.css("max-height","200px"),A.css("overflow","hidden"),A.css("text-overflow","ellipsis"),A.css("-webkit-mask","linear-gradient(0deg, rgba(0,0,0,0) 20%, rgba(0,0,0,1) 70%)");else if(t){var a=K(s);if(Array.isArray(s["@type"])){var l=0,c=!0,u=!1,d=void 0;try{for(var h,f=s["@type"][Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;i()("#sub_"+o+"_"+l).val(p).change(),l++}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}else i()("#sub_"+o).val(a["@type"]).change();var y=!0,g=!1,m=void 0;try{for(var v,b=function(e){for(var t=[],n=0,r=ce;n<r.length;n++){var i=r[n];i.slice(i.indexOf("_")+1,i.indexOf("_",i.indexOf("_")+1))===e.toString()&&t.push(i)}return t}(o)[Symbol.iterator]();!(y=(v=b.next()).done);y=!0){var w=v.value,x=i()(ne(w)),I=a[x.data("name").replace(/-/g,".")];if(se(I)){x.val(I[0].replace("http://schema.org/","")),x.trigger("change");var S=i()(ne(w+"_addmore"));if(S)for(var O=1;O<I.length;O++){S.click(),i()(ne(w+"_moreContainer")).children().eq(2*(O-1)).val(I[O].replace("http://schema.org/",""))}}else void 0!==I&&I.length>0&&(I=I.replace("http://schema.org/",""),x.val(I),x.trigger("change"))}}catch(e){g=!0,m=e}finally{try{y||null==b.return||b.return()}finally{if(g)throw m}}}else{var A;i()("#panel-body-"+o).append("This annotation does not have any Domain Specification. Therefore you won`t be able to edit it."),i()("#panel-footer-btn-Preview-"+o).prop("already_annotation_created",s),i()("#panel-footer-btn-Save-"+o).prop("disabled",!0),(A=i()("#ia_panel_"+o+"_content")).html(Q(JSON.stringify(s,null,2))),A.css("max-height","200px"),A.css("overflow","hidden"),A.css("text-overflow","ellipsis"),A.css("-webkit-mask","linear-gradient(0deg, rgba(0,0,0,0) 20%, rgba(0,0,0,1) 70%)")}r&&r(e)}function ve(e,t){var n,r="Thing";if(ae.forEach((function(t){t.panelId==e&&(t.name,r=t.root)})),Array.isArray(r))for(var o in n=[],r)n.push(i()("#sub_"+e+"_"+o).val());else n=i()("#sub_"+e).val();null!=n&&""!=n&&null!=n&&(r=n);for(var s=[],a=[],l=Object.entries(t.getVocabularies()),c={"@context":l=1===l.length&&"schema"===l[0][0]?l[0][1]:ie(l.map((function(e){var t=H(e,2),n=t[0];return["schema"===n?"@vocab":n,t[1]]}))),"@type":r},u=!0,d=!0,h=[],f=[],p=[],y=0,g=ce;y<g.length;y++){(b=g[y]).slice(b.indexOf("_")+1,b.indexOf("_",b.indexOf("_")+1))===e.toString()&&h.push(b)}for(var m=0,v=h;m<v.length;m++){var b=v[m],w=i()(ne(b)),x=w.val(),I=w.data("name"),S=w.data("isOptional"),O=w.data("rootIsOptional");if(null!=x&&""!==x&&0!==x.length&&null!=x.length||!1!==S||!1!==O||(u=!1,f.push(w)),null!=x&&null!=x&&""!=x&&0!=x.length&&null!=x.length&&!0===O){for(var A=[],C=I.split("-");C.length>1;)C.pop(),A.push(C.join("-"));h.forEach((function(e){var t=i()(ne(e)),n=t.data("name"),r=t.data("isOptional"),o=t.data("rootIsOptional"),s=n.split("-");s=s.length;for(var a=t.val(),l=0;l<A.length;l++){var c=A[l].split("-");c=c.length,0==r&&1==o&&n.indexOf(A[l])>=0&&s===c+1&&(void 0!==a&&""!==a&&null!=a&&0!==a.length&&null!=a.length||(p.push(n),d=!1))}}))}if(le.forEach((function(t){if(t.panelId===e){var n={name:t.name,path:t.path};a.push(n)}})),null!=x&&""!==x&&0!==x.length&&null!=x.length){for(var j=I.split("-");j.length>1;){j.pop();var N=j.join("-")+"-@type";s.push(N)}a.forEach((function(e){s.forEach((function(t){t===e.path&&(c=Z(c,e.path,e.name.slice()))}))})),c=Z(c,I,x,!0)}}return u&&d?c:(u?(p=ee(X(p)),te("Please also fill in <ul>"+p.join("")+"</ul>",3e3+1e3*(p.length-1)),p.forEach((function(t){var n=i()("#IA_"+e+"_"+t.replace(/<(?:.|\n)*?>/gm,""));n.css({border:"1px solid rgba(255, 0, 0, 1)","box-shadow":"0 0 10px rgba(255, 0, 0, 1)"}),setTimeout((function(){n.css({border:"","box-shadow":""})}),3e3)}))):(f.forEach((function(e){e.css({border:"1px solid rgba(255, 0, 0, 1)","box-shadow":"0 0 10px rgba(255, 0, 0, 1)"}),setTimeout((function(){e.css({border:"","box-shadow":""})}),3e3)})),te("Please fill in all required fields",3e3)),null)}var be={semantifyUrl:o,remove:f,copyStr:b,syntaxHighlight:v,send_snackbarMSG:h,send_snackbarMSG_fail:d,httpGetHeaders:y,httpPostJson:g,httpCall:m,httpGet:p,sdoAdapter:V}}]);